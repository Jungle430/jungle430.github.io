<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>CMU 15-445 Lecture #21: Database Crash Recovery - Jungle&#39;s Blog</title><meta name="description" content="Welcome to Jungle&#39;s blog."><meta property="og:title" content="CMU 15-445 Lecture #21: Database Crash Recovery" />
<meta property="og:description" content="CMU 15-445 Database Systems Lecture #21: Database Crash Recovery Crash Recovery The DBMS relies on its recovery algorithms to ensure database consistency(C), transaction atomicity(A), and durability(D) despite failures. Each recovery algorithm is comprised of two parts: Actions during normal transaction processing to ensure that the DBMS can recover from a failure Actions after a failure to recover the database to a state that ensures the atomicity, consistency, and durability of" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter21/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-04-22T11:11:57+08:00" />
<meta property="article:modified_time" content="2024-04-22T11:11:57+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="CMU 15-445 Lecture #21: Database Crash Recovery"/>
<meta name="twitter:description" content="CMU 15-445 Database Systems Lecture #21: Database Crash Recovery Crash Recovery The DBMS relies on its recovery algorithms to ensure database consistency(C), transaction atomicity(A), and durability(D) despite failures. Each recovery algorithm is comprised of two parts: Actions during normal transaction processing to ensure that the DBMS can recover from a failure Actions after a failure to recover the database to a state that ensures the atomicity, consistency, and durability of"/>
<meta name="application-name" content="Jungle&#39;s blog">
<meta name="apple-mobile-web-app-title" content="Jungle&#39;s blog"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter21/" /><link rel="prev" href="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter20/" /><link rel="stylesheet" href="/css/page.min.css"><link rel="stylesheet" href="/css/home.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "CMU 15-445 Lecture #21: Database Crash Recovery",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/Jungle430.github.io\/posts\/cmu-15-445-database-systems\/chapter21\/"
        },"genre": "posts","keywords": "Database Systems","wordcount":  1114 ,
        "url": "https:\/\/Jungle430.github.io\/posts\/cmu-15-445-database-systems\/chapter21\/","datePublished": "2024-04-22T11:11:57+08:00","dateModified": "2024-04-22T11:11:57+08:00","publisher": {
            "@type": "Organization",
            "name": "Jungle"},"author": {
                "@type": "Person",
                "name": "Jungle"
            },"description": ""
    }
    </script></head><body data-header-desktop="fixed" data-header-mobile="auto"><script>(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Jungle&#39;s Blog">Jungle&#39;s Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/">ğŸ“š æ–‡ç«  </a><a class="menu-item" href="/tags/">ğŸ·ï¸ æ ‡ç­¾ </a><a class="menu-item" href="/categories/">ğŸ—ƒï¸ åˆ†ç±» </a><a class="menu-item" href="/about/">ğŸ‘´ å…³äº </a><a class="menu-item" href="https://github.com/Jungle430" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Jungle&#39;s Blog">Jungle&#39;s Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">ğŸ“šæ–‡ç« </a><a class="menu-item" href="/tags/" title="">ğŸ·ï¸æ ‡ç­¾</a><a class="menu-item" href="/categories/" title="">ğŸ—ƒï¸åˆ†ç±»</a><a class="menu-item" href="/about/" title="">ğŸ‘´å…³äº</a><a class="menu-item" href="https://github.com/Jungle430" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><div class="menu-item"><a href="javascript:void(0);" class="theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div></div>
    </div>
</header><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single" data-toc="enable"><div class="single-card" ><h2 class="single-title animated flipInX">CMU 15-445 Lecture #21: Database Crash Recovery</h2><div class="post-meta">
                <div class="post-meta-line"><span class="post-author"><a href="https://github.com/Jungle430" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jungle</a></span>&nbsp;<span class="post-category">å‡ºç‰ˆäº  <a href="/categories/cmu-15-445-database-systems/"><i class="far fa-folder fa-fw"></i>CMU 15-445 Database Systems</a></span></div>
                <div class="post-meta-line"><span><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2024-04-22">2024-04-22</time></span>&nbsp;<span><i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 1114 å­—</span>&nbsp;
                    <span><i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 3 åˆ†é’Ÿ</span>&nbsp;</div>
            </div>
            
            <hr><div class="details toc" id="toc-static"  data-kept="">
                    <div class="details-summary toc-title">
                        <span>ç›®å½•</span>
                        <span><i class="details-icon fas fa-angle-right"></i></span>
                    </div>
                    <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#lecture-21-database-crash-recovery">Lecture #21: Database Crash Recovery</a>
      <ul>
        <li><a href="#crash-recovery">Crash Recovery</a></li>
        <li><a href="#wal-records">WAL Records</a></li>
        <li><a href="#normal-execution">Normal Execution</a></li>
        <li><a href="#checkpointing">Checkpointing</a></li>
        <li><a href="#aries-recovery">ARIES Recovery</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
                </div><div class="content" id="content"><h1 id="cmu-15-445-database-systems">CMU 15-445 Database Systems</h1>
<h2 id="lecture-21-database-crash-recovery">Lecture #21: Database Crash Recovery</h2>
<h3 id="crash-recovery">Crash Recovery</h3>
<ul>
<li>
<p>The DBMS relies on its recovery algorithms to <strong>ensure database consistency(C), transaction atomicity(A), and durability(D)</strong> despite failures.</p>
</li>
<li>
<p>Each recovery algorithm is comprised of two parts:</p>
<ul>
<li>Actions <strong>during normal</strong> transaction processing to ensure that the DBMS can recover from a failure</li>
<li>Actions <strong>after a failure</strong> to recover the database to a state that ensures the atomicity, consistency, and durability of transactions.</li>
</ul>
</li>
<li>
<p>Check Pointçš„é—®é¢˜</p>
<ul>
<li>æ€§èƒ½é—®é¢˜ï¼šåˆ·ç›˜çš„æ—¶å€™æ•´ä¸ªDBMSéƒ½åœä½äº†</li>
<li>æ‰«æçš„æ—¶å€™Check Pointå‰åéƒ½è¦çœ‹ï¼Œä¹Ÿå¾ˆæµªè´¹æ•ˆç‡</li>
<li>æ²¡æœ‰ç‰¹åˆ«åˆé€‚çš„åˆ·ç›˜é¢‘ç‡ï¼Œé«˜äº†é¢‘ç¹å°å¡ï¼Œä½äº†å®šæ—¶å¤§å¡</li>
</ul>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Algorithms_for_Recovery_and_Isolation_Exploiting_Semantics" target="_blank" rel="noopener noreffer"><strong>Algorithms for Recovery and Isolation Exploiting Semantics(ARIES)</strong></a></p>
<ul>
<li>
<p>Developed at IBM Research in early 1990s for the DB2 DBMS</p>
</li>
<li>
<p>There are three key concepts in the ARIES recovery protocol:</p>
<ul>
<li>
<p><strong>Write Ahead Logging(WAL)</strong>: Any change is recorded in log on stable storage before the database change is written to disk <strong>(STEAL + NO-FORCE).</strong> å†™ç›˜ç­–ç•¥</p>
</li>
<li>
<p><strong>Repeating History During Redo</strong>: On restart, retrace actions and restore database to exact state before crash.</p>
</li>
<li>
<p><strong>Logging Changes During Undo</strong>: Record undo actions to log to ensure action is not repeated in the event of repeated failures.</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="wal-records">WAL Records</h3>
<ul>
<li>Every log record now includes a globally unique log sequence number (LSN).æ—¥å¿—çš„åºåˆ—å·</li>
</ul>
<figure><a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter21-1.png" title="/img/CMU 15-445 Database Systems/chapter21-1.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter21-1.png" data-sub-html="<h2>æ—¥å¿—åˆ†ç±»</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/CMU%2015-445%20Database%20Systems/chapter21-1.png"
            data-srcset="/img/CMU%2015-445%20Database%20Systems/chapter21-1.png, /img/CMU%2015-445%20Database%20Systems/chapter21-1.png 1.5x, /img/CMU%2015-445%20Database%20Systems/chapter21-1.png 2x"
            data-sizes="auto"
            alt="/img/CMU 15-445 Database Systems/chapter21-1.png" />
    </a><figcaption class="image-caption">æ—¥å¿—åˆ†ç±»</figcaption>
    </figure>
<ul>
<li>
<p>æ¯ä¸ªæ•°æ®é¡µä¼šæœ‰ä¸€ä¸ª<strong>pageLSN</strong>ï¼Œè®°å½•è¿™ä¸€é¡µæœ€æ–°çš„ä¿®æ”¹</p>
</li>
<li>
<p>æ¯ä¸ªç³»ç»Ÿä¼šæœ‰ä¸€ä¸ª<strong>flushedLSN</strong>ï¼Œå‰é¢çš„è¿›äº†ç£ç›˜ï¼Œåé¢çš„éƒ½åœ¨å†…å­˜æ²¡æœ‰åˆ·ç›˜</p>
</li>
<li>
<p>è„é¡µå†™å›åˆ°ç£ç›˜çš„å¿…è¦æ¡ä»¶ $pageLST\le flushedLSN$ï¼Œè¿™ä¸ªè„é¡µä¹‹å‰æ‰€ä½œçš„ä¿®æ”¹å¿…é¡»å…ˆè¦åˆ·åˆ°ç£ç›˜é‡Œé¢å»ï¼Œå®ƒæ‰èƒ½åˆ·å›åˆ°ç›˜é‡Œé¢å»</p>
</li>
<li>
<a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter21-2.png" title="/img/CMU 15-445 Database Systems/chapter21-2.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter21-2.png">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/CMU%2015-445%20Database%20Systems/chapter21-2.png"
            data-srcset="/img/CMU%2015-445%20Database%20Systems/chapter21-2.png, /img/CMU%2015-445%20Database%20Systems/chapter21-2.png 1.5x, /img/CMU%2015-445%20Database%20Systems/chapter21-2.png 2x"
            data-sizes="auto"
            alt="/img/CMU 15-445 Database Systems/chapter21-2.png" />
    </a>
</li>
<li>
<p>æ¯æ¬¡åˆ·ç›˜çš„æ—¶å€™è¦æ›´æ–°<strong>flushedLSN</strong></p>
</li>
</ul>
<h3 id="normal-execution">Normal Execution</h3>
<ul>
<li>
<p>æƒ…æ™¯ï¼šæ¯ä¸ªäº‹åŠ¡éƒ½ä¼šè¯»å’Œå†™æ•°æ®ï¼Œç»“æœæœ‰commitå’Œrollback</p>
</li>
<li>
<p>å‡è®¾</p>
<ul>
<li>æ‰€æœ‰çš„logéƒ½åœ¨ä¸€é¡µé‡Œé¢</li>
<li>å†™ç£ç›˜æ˜¯åŸå­æ“ä½œ</li>
<li>ä½¿ç”¨ä¸¥æ ¼2PL</li>
<li>çªƒå–å¼+éå¼ºåˆ¶</li>
</ul>
</li>
<li>
<p>COMMIT</p>
<ul>
<li>logä¸Šé¢åŠ ä¸€æ¡COMMIT</li>
<li>COMMITä¹‹å‰æœ‰å…³è¿™ä¸ªäº‹åŠ¡çš„æ‰€æœ‰æ—¥å¿—éƒ½è¦åˆ·ç›˜ï¼Œåˆ·ç›˜æ˜¯è¿ç»­å†™+åŒæ­¥</li>
<li>åé¢åˆ·è„é¡µçš„æ—¶å€™ä¼šè¿½åŠ ä¸€å¥TXN-END</li>
<li>åˆ·å®Œç›˜ä¹‹åçš„æ•°æ®åœ¨å†…å­˜é‡Œé¢å°±å¯ä»¥å¹²æ‰äº†</li>
<li><figure><a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter21-3.png" title="/img/CMU 15-445 Database Systems/chapter21-3.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter21-3.png" data-sub-html="<h2>COMMITè¯æ˜æäº¤æˆåŠŸï¼ŒTXN-ENDä»£è¡¨è„é¡µè¢«åˆ·å›å»äº†</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/CMU%2015-445%20Database%20Systems/chapter21-3.png"
            data-srcset="/img/CMU%2015-445%20Database%20Systems/chapter21-3.png, /img/CMU%2015-445%20Database%20Systems/chapter21-3.png 1.5x, /img/CMU%2015-445%20Database%20Systems/chapter21-3.png 2x"
            data-sizes="auto"
            alt="/img/CMU 15-445 Database Systems/chapter21-3.png" />
    </a><figcaption class="image-caption">COMMITè¯æ˜æäº¤æˆåŠŸï¼ŒTXN-ENDä»£è¡¨è„é¡µè¢«åˆ·å›å»äº†</figcaption>
    </figure></li>
</ul>
</li>
<li>
<p>ROLLBACK</p>
<ul>
<li>
<p>åŠ ä¸ŠprevLSNå­—æ®µï¼šè®°å½•è¿™ä¸ªäº‹åŠ¡çš„ä¸Šä¸€æ¡æ—¥å¿—çš„åœ°ç‚¹ï¼ˆç±»æ¯”åŒé“¾è¡¨ä¸­çš„prevæŒ‡é’ˆï¼‰</p>
</li>
<li>
<a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter21-4.png" title="/img/CMU 15-445 Database Systems/chapter21-4.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter21-4.png">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/CMU%2015-445%20Database%20Systems/chapter21-4.png"
            data-srcset="/img/CMU%2015-445%20Database%20Systems/chapter21-4.png, /img/CMU%2015-445%20Database%20Systems/chapter21-4.png 1.5x, /img/CMU%2015-445%20Database%20Systems/chapter21-4.png 2x"
            data-sizes="auto"
            alt="/img/CMU 15-445 Database Systems/chapter21-4.png" />
    </a>
</li>
<li>
<figure><a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter21-5.png" title="/img/CMU 15-445 Database Systems/chapter21-5.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter21-5.png" data-sub-html="<h2>å›æ»šå°±æ˜¯è®°å½•ç›¸åçš„æ—¥å¿—</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/CMU%2015-445%20Database%20Systems/chapter21-5.png"
            data-srcset="/img/CMU%2015-445%20Database%20Systems/chapter21-5.png, /img/CMU%2015-445%20Database%20Systems/chapter21-5.png 1.5x, /img/CMU%2015-445%20Database%20Systems/chapter21-5.png 2x"
            data-sizes="auto"
            alt="/img/CMU 15-445 Database Systems/chapter21-5.png" />
    </a><figcaption class="image-caption">å›æ»šå°±æ˜¯è®°å½•ç›¸åçš„æ—¥å¿—</figcaption>
    </figure>
</li>
<li>
<p>å…·ä½“æ“ä½œï¼š</p>
<ul>
<li>
<p>åŠ ä¸ŠABORT</p>
</li>
<li>
<p>æ’¤é”€ä¿®æ”¹ï¼ŒåŒæ—¶è¿½åŠ å¯¹åº”çš„å›æ»šæ—¥å¿—</p>
</li>
<li>
<p>æ¸…ç†åšå®Œäº†åŠ ä¸ŠTXN-ENDçš„æ ‡å¿—</p>
</li>
<li>
<p>æ³¨æ„ï¼šæ¸…ç†çš„è¿‡ç¨‹æ˜¯ä¸å¯èƒ½å›æ»šçš„</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="checkpointing">Checkpointing</h3>
<ul>
<li>
<p>æ£€æŸ¥ç‚¹çš„é—®é¢˜</p>
<ul>
<li>è¦åœæ­¢å¤„ç†æ–°äº‹åŠ¡ï¼ŒåŒæ—¶æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„äº‹åŠ¡éƒ½è¦åšå®Œæ‰èƒ½åˆ·ç›˜ï¼Œè¿™ä¸ªå¯¹æ•ˆç‡çš„å½±å“å¾ˆå¤§</li>
<li>æ”¹è¿›ï¼šè®©æ‰€æœ‰è¿›è¡Œä¸­çš„äº‹åŠ¡æš‚åœ/ç»™æ‰€æœ‰éœ€è¦åˆ·ç›˜çš„æ•°æ®åŠ é”ï¼Œè€Œä¸æ˜¯ç­‰ä»–ä»¬åšå®Œ</li>
</ul>
</li>
<li>
<p><strong>Active Transaction Table (ATT)</strong></p>
<ul>
<li>Checkpointingçš„æ—¶å€™è¿˜åœ¨æ´»åŠ¨çš„äº‹åŠ¡çš„è¡¨</li>
<li>One entry per currently active txn.
<ul>
<li>â†’ txnId: Unique txn identifier.</li>
<li>â†’ status: The current â€œmodeâ€ of the txn.</li>
<li>â†’ lastLSN: Most recent LSN created by txn</li>
<li>Remove entry after the TXN-END record.(TXN-ENDæ‰ç®—ä¸æ´»åŠ¨)</li>
</ul>
</li>
<li>Txn Status Codes:
<ul>
<li>R â†’ Running</li>
<li>C â†’ Committing</li>
<li>U â†’ Candidate for Undo</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Dirty Page Table (DPT)</strong></p>
<ul>
<li>Checkpointingçš„æ—¶å€™çš„è„é¡µ</li>
<li>One entry per dirty page in the buffer pool:
<ul>
<li>â†’ recLSN: The LSN of the log record that first caused the page to be dirty.</li>
</ul>
</li>
</ul>
</li>
<li>
<figure><a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter21-6.png" title="/img/CMU 15-445 Database Systems/chapter21-6.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter21-6.png" data-sub-html="<h2>è®°å½•çš„æ—¶å€™æ ‡æ³¨æ›´å¤šä¿¡æ¯</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/CMU%2015-445%20Database%20Systems/chapter21-6.png"
            data-srcset="/img/CMU%2015-445%20Database%20Systems/chapter21-6.png, /img/CMU%2015-445%20Database%20Systems/chapter21-6.png 1.5x, /img/CMU%2015-445%20Database%20Systems/chapter21-6.png 2x"
            data-sizes="auto"
            alt="/img/CMU 15-445 Database Systems/chapter21-6.png" />
    </a><figcaption class="image-caption">è®°å½•çš„æ—¶å€™æ ‡æ³¨æ›´å¤šä¿¡æ¯</figcaption>
    </figure>
</li>
</ul>
<hr>
<ul>
<li><strong>Fuzzy Checkpoints</strong>
<ul>
<li>Checkpointingçš„æ—¶å€™å…¶ä»–äº‹åŠ¡ä¹Ÿç»§ç»­è¿è¡Œ</li>
<li>æŠŠcheckpointä»ä¸€ä¸ªæ—¶é—´ç‚¹å˜æˆä¸€ä¸ªæ—¶é—´æ®µ(POINT -&gt; BEGIN+END)</li>
<li><figure><a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter21-7.png" title="/img/CMU 15-445 Database Systems/chapter21-7.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter21-7.png" data-sub-html="<h2>BEGIN&#43;END</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/CMU%2015-445%20Database%20Systems/chapter21-7.png"
            data-srcset="/img/CMU%2015-445%20Database%20Systems/chapter21-7.png, /img/CMU%2015-445%20Database%20Systems/chapter21-7.png 1.5x, /img/CMU%2015-445%20Database%20Systems/chapter21-7.png 2x"
            data-sizes="auto"
            alt="/img/CMU 15-445 Database Systems/chapter21-7.png" />
    </a><figcaption class="image-caption">BEGIN+END</figcaption>
    </figure></li>
</ul>
</li>
</ul>
<h3 id="aries-recovery">ARIES Recovery</h3>
<ol>
<li><strong>Analysis</strong>: Read the WAL to identify dirty pages in the buffer pool and active transactions at the time of the crash. At the end of the analysis phase the ATT tells the DBMS which transactions were active at the time of the crash. The DPT tells the DBMS which dirty pages might not have made it to disk.</li>
<li><strong>Redo</strong>: Repeat all actions starting from an appropriate point in the log (even txns that will abort).</li>
<li><strong>Undo</strong>: Reverse the actions of transactions that did not commit before the crash.</li>
</ol>
<ul>
<li><figure><a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter21-8.png" title="/img/CMU 15-445 Database Systems/chapter21-8.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter21-8.png" data-sub-html="<h2>æ¢å¤çš„è¿‡ç¨‹</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/CMU%2015-445%20Database%20Systems/chapter21-8.png"
            data-srcset="/img/CMU%2015-445%20Database%20Systems/chapter21-8.png, /img/CMU%2015-445%20Database%20Systems/chapter21-8.png 1.5x, /img/CMU%2015-445%20Database%20Systems/chapter21-8.png 2x"
            data-sizes="auto"
            alt="/img/CMU 15-445 Database Systems/chapter21-8.png" />
    </a><figcaption class="image-caption">æ¢å¤çš„è¿‡ç¨‹</figcaption>
    </figure></li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info"><div class="post-info-tag"><span><a href="/tags/database-systems/">Database Systems</a>
                </span></div><div class="post-info-line"><div class="post-info-mod">
                <span>æ›´æ–°äº 2024-04-22</span>
            </div><div class="post-info-mod"></div>
        </div><div class="post-info-share">
            <span><a href="javascript:void(0);" title="åˆ†äº«åˆ° Twitter" data-sharer="twitter" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter21/" data-title="CMU 15-445 Lecture #21: Database Crash Recovery" data-hashtags="Database Systems"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Facebook" data-sharer="facebook" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter21/" data-hashtag="Database Systems"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Linkedin" data-sharer="linkedin" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter21/"><i class="fab fa-linkedin fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° WhatsApp" data-sharer="whatsapp" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter21/" data-title="CMU 15-445 Lecture #21: Database Crash Recovery" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Line" data-sharer="line" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter21/" data-title="CMU 15-445 Lecture #21: Database Crash Recovery"><i class="fab fa-line fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° å¾®åš" data-sharer="weibo" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter21/" data-title="CMU 15-445 Lecture #21: Database Crash Recovery"><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Myspace" data-sharer="myspace" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter21/" data-title="CMU 15-445 Lecture #21: Database Crash Recovery" data-description=""><i data-svg-src="/lib/simple-icons/icons/myspace.min.svg"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Blogger" data-sharer="blogger" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter21/" data-title="CMU 15-445 Lecture #21: Database Crash Recovery" data-description=""><i class="fab fa-blogger fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° ç™¾åº¦" data-sharer="baidu" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter21/" data-title="CMU 15-445 Lecture #21: Database Crash Recovery"><i data-svg-src="/lib/simple-icons/icons/baidu.min.svg"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Evernote" data-sharer="evernote" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter21/" data-title="CMU 15-445 Lecture #21: Database Crash Recovery"><i class="fab fa-evernote fa-fw"></i></a></span>
        </div></div><div class="post-nav"><a href="/posts/cmu-15-445-database-systems/chapter20/" class="prev" rel="prev" title="CMU 15-445 Lecture #20: Database Logging"><i class="fas fa-angle-left fa-fw"></i>Previous Post</a></div></div>
</div></article></div>
            </main>
            <footer class="footer"><div class="footer-container"><div class="footer-line">ç”± <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.105.0">Hugo</a> å¼ºåŠ›é©±åŠ¨ | ä¸»é¢˜ - <a href="https://github.com/khusika/FeelIt" target="_blank" rel="noopener noreffer" title="FeelIt 1.0.1"><i class="fas fa-hand-holding-heart fa-fw"></i> FeelIt</a>
        </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2022 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://github.com/Jungle430">Jungle</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
</div>
<script>
if ('serviceWorker' in navigator) {
    navigator.serviceWorker
        .register('/sw.min.js?version=0.0.1', { scope: '/' })
        .then(() => {
            console.info('Jungle\u0027s Blog\u00A0Service Worker Registered');
        }, err => console.error('Jungle\u0027s Blog\u00A0Service Worker registration failed: ', err));

    navigator.serviceWorker
        .ready
        .then(() => {
            console.info('Jungle\u0027s Blog\u00A0Service Worker Ready');
        });
}
</script>
</footer>
        </div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-chevron-up fa-fw"></i>
            </a></div><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><script src="https://polyfill.io/v3/polyfill.min.js?features=Array.prototype.fill%2CArray.prototype.find%2CArray.from%2CIntersectionObserver%2CMath.sign%2CObject.assign%2CPromise%2CObject.entries%2Chtml5shiv%2CObject.values%2Cfetch%2CElement.prototype.after"></script><script src="/lib/lazysizes/lazysizes.min.js"></script><script src="/lib/clipboard/clipboard.min.js"></script><script src="/lib/sharer/sharer.min.js"></script><script src="/lib/katex/katex.min.js"></script><script src="/lib/katex/auto-render.min.js"></script><script src="/lib/katex/copy-tex.min.js"></script><script src="/lib/katex/mhchem.min.js"></script><script>window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":100},"comment":{},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false}};</script><script src="/js/theme.min.js"></script></body></html>
