<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>CMU 15-445 Lecture #06: Buffer Pools - Jungle&#39;s Blog</title><meta name="description" content="Welcome to Jungle&#39;s blog."><meta property="og:title" content="CMU 15-445 Lecture #06: Buffer Pools" />
<meta property="og:description" content="CMU 15-445 Database Systems Lecture #06: Buffer Pools Introduction DBMSéœ€è¦è´Ÿè´£ç®¡ç†æ•°æ®åœ¨å†…å­˜å’Œç£ç›˜ä¹‹é—´ç§»åŠ¨ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æ•°æ®ä¸èƒ½åœ¨ç£ç›˜ä¸­è¢«å¤„ç†ï¼Œè€Œæ˜¯éœ€è¦åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¤„ç†å®Œæˆåå†å†™å›ç£" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-04-08T20:02:45+08:00" />
<meta property="article:modified_time" content="2024-04-08T20:02:45+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="CMU 15-445 Lecture #06: Buffer Pools"/>
<meta name="twitter:description" content="CMU 15-445 Database Systems Lecture #06: Buffer Pools Introduction DBMSéœ€è¦è´Ÿè´£ç®¡ç†æ•°æ®åœ¨å†…å­˜å’Œç£ç›˜ä¹‹é—´ç§»åŠ¨ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æ•°æ®ä¸èƒ½åœ¨ç£ç›˜ä¸­è¢«å¤„ç†ï¼Œè€Œæ˜¯éœ€è¦åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¤„ç†å®Œæˆåå†å†™å›ç£"/>
<meta name="application-name" content="Jungle&#39;s blog">
<meta name="apple-mobile-web-app-title" content="Jungle&#39;s blog"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter6/" /><link rel="prev" href="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter5/" /><link rel="next" href="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter7/" /><link rel="stylesheet" href="/css/page.min.css"><link rel="stylesheet" href="/css/home.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "CMU 15-445 Lecture #06: Buffer Pools",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/Jungle430.github.io\/posts\/cmu-15-445-database-systems\/chapter6\/"
        },"genre": "posts","keywords": "Database Systems","wordcount":  2543 ,
        "url": "https:\/\/Jungle430.github.io\/posts\/cmu-15-445-database-systems\/chapter6\/","datePublished": "2024-04-08T20:02:45+08:00","dateModified": "2024-04-08T20:02:45+08:00","publisher": {
            "@type": "Organization",
            "name": "Jungle"},"author": {
                "@type": "Person",
                "name": "Jungle"
            },"description": ""
    }
    </script></head><body data-header-desktop="fixed" data-header-mobile="auto"><script>(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Jungle&#39;s Blog">Jungle&#39;s Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/">ğŸ“š æ–‡ç«  </a><a class="menu-item" href="/tags/">ğŸ·ï¸ æ ‡ç­¾ </a><a class="menu-item" href="/categories/">ğŸ—ƒï¸ åˆ†ç±» </a><a class="menu-item" href="/about/">ğŸ‘´ å…³äº </a><a class="menu-item" href="https://github.com/Jungle430" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Jungle&#39;s Blog">Jungle&#39;s Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">ğŸ“šæ–‡ç« </a><a class="menu-item" href="/tags/" title="">ğŸ·ï¸æ ‡ç­¾</a><a class="menu-item" href="/categories/" title="">ğŸ—ƒï¸åˆ†ç±»</a><a class="menu-item" href="/about/" title="">ğŸ‘´å…³äº</a><a class="menu-item" href="https://github.com/Jungle430" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><div class="menu-item"><a href="javascript:void(0);" class="theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div></div>
    </div>
</header><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single" data-toc="enable"><div class="single-card" ><h2 class="single-title animated flipInX">CMU 15-445 Lecture #06: Buffer Pools</h2><div class="post-meta">
                <div class="post-meta-line"><span class="post-author"><a href="https://github.com/Jungle430" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jungle</a></span>&nbsp;<span class="post-category">å‡ºç‰ˆäº  <a href="/categories/cmu-15-445-database-systems/"><i class="far fa-folder fa-fw"></i>CMU 15-445 Database Systems</a></span></div>
                <div class="post-meta-line"><span><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2024-04-08">2024-04-08</time></span>&nbsp;<span><i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 2543 å­—</span>&nbsp;
                    <span><i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 6 åˆ†é’Ÿ</span>&nbsp;</div>
            </div>
            
            <hr><div class="details toc" id="toc-static"  data-kept="">
                    <div class="details-summary toc-title">
                        <span>ç›®å½•</span>
                        <span><i class="details-icon fas fa-angle-right"></i></span>
                    </div>
                    <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#lecture-06-buffer-pools">Lecture #06: Buffer Pools</a>
      <ul>
        <li><a href="#introduction">Introduction</a></li>
        <li><a href="#locks-vs-latches">Locks vs. Latches</a></li>
        <li><a href="#buffer-pool">Buffer Pool</a></li>
        <li><a href="#buffer-pool-optimizations">Buffer Pool Optimizations</a></li>
        <li><a href="#buffer-replacement-policies">Buffer Replacement Policies</a></li>
        <li><a href="#disk-io-and-os-cache">Disk I/O and OS Cache</a></li>
        <li><a href="#other-memory-pools">Other Memory Pools</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
                </div><div class="content" id="content"><h1 id="cmu-15-445-database-systems">CMU 15-445 Database Systems</h1>
<h2 id="lecture-06-buffer-pools">Lecture #06: Buffer Pools</h2>
<h3 id="introduction">Introduction</h3>
<ul>
<li>DBMSéœ€è¦è´Ÿè´£ç®¡ç†æ•°æ®åœ¨å†…å­˜å’Œç£ç›˜ä¹‹é—´ç§»åŠ¨ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æ•°æ®ä¸èƒ½åœ¨ç£ç›˜ä¸­è¢«å¤„ç†ï¼Œè€Œæ˜¯éœ€è¦åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¤„ç†å®Œæˆåå†å†™å›ç£ç›˜ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±éœ€è¦Buffer Poolsæ¥è¿›è¡Œç®¡ç†ï¼Œä½¿å¾—DBMSçš„å…¶ä»–éƒ¨åˆ†å¯ä»¥åƒåœ¨å†…å­˜ä¸­å¤„ç†æ‰€æœ‰æ•°æ®é‚£æ ·è¿›è¡Œæ“ä½œ</li>
</ul>
<figure><a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter6-1.png" title="/img/CMU 15-445 Database Systems/chapter6-1.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter6-1.png" data-sub-html="<h2>Buffer Poolæ¨¡å‹</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/CMU%2015-445%20Database%20Systems/chapter6-1.png"
            data-srcset="/img/CMU%2015-445%20Database%20Systems/chapter6-1.png, /img/CMU%2015-445%20Database%20Systems/chapter6-1.png 1.5x, /img/CMU%2015-445%20Database%20Systems/chapter6-1.png 2x"
            data-sizes="auto"
            alt="/img/CMU 15-445 Database Systems/chapter6-1.png" />
    </a><figcaption class="image-caption">Buffer Poolæ¨¡å‹</figcaption>
    </figure>
<ul>
<li>ä¸€ä¸ªDBMSéœ€è¦è€ƒè™‘ä¸‹é¢çš„ä¸¤ä¸ªæ–¹é¢
<ul>
<li><strong>Spatial Control</strong>: refers to where pages are physically written on disk. The goal of spatial control is to keep pages
that are used together often as physically close together as possible on disk to possibly help with prefetching and
other optimizations.(å†™ç£ç›˜çš„æ—¶å€™æŠŠéœ€è¦ç»å¸¸ä¸€èµ·ç”¨çš„é¡µå°½é‡å†™åˆ°ç£ç›˜çš„ä¸€å—åœ°æ–¹ï¼Œè¿™æ ·ä¸‹æ¬¡ç”¨ä¹Ÿèƒ½å¤Ÿä¸€æŠŠåŠ è½½åˆ°Buffer Poolé‡Œé¢)</li>
<li><strong>Temporal Control</strong>: is deciding when to read pages into memory and when to write them to disk. Temporal control
aims to minimize the number of stalls from having to read data from disk.(ä½•æ—¶å†™å›ç£ç›˜ï¼Œå¯¹äºä¸€äº›çƒ­ç‚¹å†™æ•°æ®æ²¡æœ‰å¿…è¦å†™ä¸€æ¬¡åˆ·ä¸€æ¬¡ç›˜ï¼Œå®Œå…¨å¯ä»¥å†™å¥½å¤šæ¬¡åˆ·ä¸€æ¬¡ç£ç›˜ï¼Œå› ä¸ºåˆ·ç›˜çš„ä»£ä»·å¤ªå¤§äº†)</li>
</ul>
</li>
</ul>
<h3 id="locks-vs-latches">Locks vs. Latches</h3>
<ul>
<li>
<p>è‹±è¯­å’Œæ¦‚å¿µæ€§çš„é—®é¢˜</p>
</li>
<li>
<p><strong>Locks</strong>: A lock is a higher-level, logical primitive that protects the contents of a database (e.g., tuples, tables, databases)
from other transactions. Database systems can expose to the user which locks are being held as queries are run. Locks
need to be able to roll back changes.(é€»è¾‘ä¸Šé¢çš„é”ï¼Œæ¯”å¦‚è¡Œé”/è¡¨é”/åº“é”ï¼Œä¸å…³å¿ƒåº•å±‚å®ç°ï¼Œç”¨äºç†è®ºä¸Šé¢çš„è®¨è®ºï¼Œä¸ºäº†é˜²æ­¢æ­»é”ï¼Œä¸€èˆ¬è¿™ç§é”éƒ½å¯ä»¥å›æ»š)</p>
</li>
<li>
<p><strong>Latches</strong>: A latch is a low-level protection primitive that the DBMS uses for the critical sections in its internal data
structures (e.g., hash tables, regions of memory). Latches are held for only the duration of the operation being made.
Latches do not need to be able to roll back changes. This is often implemented by simple language primitives like
mutexs and/or conditional variables.(Locksçš„å…·ä½“å®ç°ï¼Œæ¯”å¦‚æ•°æ®ç«äº‰çš„åŒºåŸŸæ˜¯å“ªï¼Œç”¨äº’æ–¥é”è¿˜æ˜¯ä¿¡å·é‡ï¼Œæ‚²è§‚é”è¿˜æ˜¯ä¹è§‚é”)</p>
</li>
</ul>
<h3 id="buffer-pool">Buffer Pool</h3>
<ul>
<li>
<p>It is organized as an array of fixed-size pages. Each array entry is called a frame. ç¼“å­˜æ± çš„æœ¬è´¨å°±æ˜¯å†…å­˜é‡Œé¢çš„ä¸€å—å›ºå®šçš„æ•°ç»„ï¼Œè¿™ä¸ªé‡Œé¢çš„ä¸€ä¸ªå…ƒç´ å°±å«frameäº†ï¼Œä½†æ˜¯å…¶å®å’Œpageæ˜¯ä¸€ä¸ªä¸œè¥¿</p>
</li>
<li>
<p><strong>page directory</strong>:åœ¨æ•°æ®åº“çš„ç£ç›˜ä¸Šè¿˜ç»´æŠ¤äº†ä¸€ä¸ªpage directoryï¼Œè¿™ä¸ªä¸œè¥¿å­˜çš„å°±æ˜¯é¡µidåˆ°é¡µåœ¨ç£ç›˜ç‰©ç†ä½ç½®çš„æ˜ å°„ï¼Œæ‰€ä»¥è¯´è¿™ä¸ªå¦‚æœä¿®æ”¹äº†å¿…é¡»å†™å›åˆ°ç£ç›˜ä¸Šï¼Œè¿™æ ·DBMSé‡æ–°å¯åŠ¨çš„æ—¶å€™æ‰èƒ½æ‰¾åˆ°ï¼Œä»–ä¹Ÿé€šå¸¸å›ä¸€ç›´åœ¨å†…å­˜é‡Œé¢ï¼Œå› ä¸ºä½ æ‰¾é¡µå¿…é¡»è¦å…ˆé€šè¿‡page directoryå»æ‰¾é¡µçš„ç‰©ç†ä½ç½®</p>
</li>
<li>
<p><strong>Buffer Pool Meta-data</strong>:ç¼“å­˜æ± å¿…é¡»è¦å­˜å‚¨ä¸€äº›meta-dataï¼Œä»è€Œä¿è¯æ­£ç¡®æ€§å’Œæé«˜ç¼“å­˜æ± çš„æ•ˆç‡ï¼Œå¸¸è§çš„ä¸€äº›meta-data</p>
<ul>
<li>
<p><strong>page table</strong>:è¿™ä¸ªæ˜¯å†…å­˜ä¸­çš„ä¸€ä¸ªhashè¡¨ï¼Œå®ƒçš„æ˜ å°„æ˜¯é¡µé¢id $\rightarrow$ è¿™ä¸ªé¡µåœ¨ç¼“å­˜æ± ä¸­çš„å¸§ä½ç½®ï¼Œå› ä¸ºé¡µåœ¨ç¼“å­˜æ± é‡Œé¢çš„é¡ºåºå’Œç£ç›˜ä¸­çš„é¡ºåºå¾€å¾€ä¸ä¸€è‡´ï¼Œæ‰€ä»¥éœ€è¦page tableæ¥åšè¿™ä¸ªé¢å¤–çš„é—´æ¥å±‚ï¼Œé™¤äº†é¡µåœ¨ç¼“å­˜æ± ä¸­çš„ä½ç½®ï¼Œpage tableè¿˜ç»´æŠ¤äº†å…¶ä»–meta-dataï¼Œæ¯”å¦‚ä¸€ä¸ªè„æ ‡å¿—ï¼ˆè¯´æ˜è¿™ä¸ªé¡µæ˜¯ä¸æ˜¯è„é¡µï¼‰ï¼Œå¼•ç”¨è®¡æ•°å™¨ï¼ˆæœ‰å“ªå‡ ä¸ªäº‹åŠ¡åœ¨ç”¨å®ƒï¼‰ï¼Œè¿™ä¸ªå’Œpage directoryçš„ä¸€ä¸ªå¤§çš„åŒºåˆ«å°±æ˜¯ä»–ä¸ç”¨è®°åœ¨ç£ç›˜ä¸Š</p>
</li>
<li>
<p><strong>dirty-flag</strong>:è¿™ä¸ªå°±æ˜¯ä¸Šé¢page tableç»´æŠ¤çš„ä¸€ä¸ªé¡µçš„meta-dataä¹‹ä¸€ï¼Œå½“æœ‰çº¿ç¨‹å¯¹buffer poolä¸­çš„æŸä¸ªé¡µé¢è¿›è¡Œä¿®æ”¹çš„æ—¶å€™è¿™ä¸ªæ ‡å¿—ä¼šè¢«è®¾ç½®ï¼Œè¿™æé†’è¿™ä¸ªé¡µåœ¨è¢«è¸¢å‡ºbuffer poolçš„æ—¶å€™å¿…é¡»è¦åˆ·ç›˜</p>
</li>
<li>
<p><strong>Pin/reference counter</strong>:è¿™ä¸ªä¹Ÿæ˜¯ä¸Šé¢page tableç»´æŠ¤çš„ä¸€ä¸ªé¡µçš„meta-dataä¹‹ä¸€ï¼Œä¸»è¦æ˜¯è®°å½•æœ‰å‡ ä¸ªçº¿ç¨‹æ­£åœ¨è®¿é—®è¯¥é¡µï¼Œçº¿ç¨‹å¿…é¡»åœ¨è®¿é—®è¯¥é¡µä¹‹å‰å¢åŠ counterï¼Œå¦‚æœcounter &gt; 0ï¼Œé‚£ä¹ˆè¯¥é¡µå°±æ— æ³•è¢«é©±é€ï¼Œcounterä¸ä¼šç®¡ç†å¹¶å‘äº‹åŠ¡é‚£äº›ä¸œè¥¿ï¼Œå¦‚æœå½“å‰ç¼“å†²æ± çš„æ‰€æœ‰é¡µéƒ½æ— æ³•è¢«è¸¢ï¼Œè€Œä¸”å·²ç»æ»¡äº†ï¼Œå°±ä¼šæŠ›å‡ºOOM(out-of-memory)çš„é”™è¯¯</p>
</li>
</ul>
</li>
<li>
<p><strong>Memory Allocation Policies</strong></p>
<ul>
<li>
<p>Memory in the database is allocated for the buffer pool according to two policies</p>
</li>
<li>
<p><strong>Global policies</strong>: è€ƒè™‘æ‰€æœ‰äº‹åŠ¡ï¼Œæ¥æ‰¾åˆ°åˆ†é…å†…å­˜çš„æœ€ä½³å†³ç­–</p>
</li>
<li>
<p><strong>local policies</strong>:åšå‡ºå†³ç­–çš„æ—¶å€™åªè€ƒè™‘å•ä¸ªäº‹åŠ¡ï¼Œå³ä½¿ä»–ä¸é€‚åˆæ•´ä¸ªå·¥ä½œè´Ÿè½½ï¼Œæœ¬åœ°ç­–ç•¥å°†å¸§åˆ†é…ç»™ç‰¹å®šçš„äº‹åŠ¡ï¼Œè€Œä¸è€ƒè™‘å¹¶å‘äº‹åŠ¡çš„è¡Œä¸ºã€‚ä½†æ˜¯ï¼Œå®ƒä»ç„¶æ”¯æŒäº‹åŠ¡ä¹‹é—´å…±äº«å¸§</p>
</li>
<li>
<p>Most systems use a combination of both global and local policies.</p>
</li>
</ul>
</li>
</ul>
<h3 id="buffer-pool-optimizations">Buffer Pool Optimizations</h3>
<ul>
<li>
<p><strong>Multiple Buffer Pools</strong></p>
<ul>
<li>DBMSå¯ä»¥å¼€å¥½å¤šä¸ªç¼“å†²æ± ï¼Œæ¯”å¦‚æŒ‰ç…§ç±»å‹åˆ†ï¼ˆç´¢å¼•ç¼“å†²æ± ï¼Œæ•°æ®ç¼“å†²æ± ï¼‰ï¼ŒåŒä¸€ç±»ä¼¼ä½¿ç”¨hashå†åˆ†åˆ°ä¸åŒçš„åŒºåŸŸï¼Œè¿™æ ·æ¯ä¸ªç¼“å†²æ± éƒ½å¯ä»¥é€‰æ‹©é€‚åˆè‡ªå·±çš„å­˜å‚¨ç­–ç•¥ï¼ŒåŒæ—¶åˆ†æˆå¤šä¸ªç¼“å­˜æ± ä¹Ÿé¿å…äº†ä¸€ä¸ªç¼“å†²æ± é¢‘ç¹çš„é”ç«äº‰é—®é¢˜</li>
<li>Object IDs and hashing are two approaches to mapping desired pages to a buffer pool.
<ul>
<li><strong>Object IDs</strong>:ç»´æŠ¤ä¸€ä¸ªidåˆ°ç¼“å­˜æ± åŒºåŸŸçš„æ˜ å°„ï¼Œè¿™æ ·æ ¹æ®é¡µçš„idå°±èƒ½åˆ†é…åˆ°å¯¹åº”çš„ç¼“å­˜æ± ä¸­ï¼Œè€Œä¸”è¿™ä¸ªæ˜ å°„è‡ªå·±ç»´æŠ¤ï¼Œä½ å¯ä»¥æŠŠåˆ†é…çš„ç­–ç•¥åšçš„æ›´ç»†æ›´æ™ºèƒ½ï¼Œä»£ä»·å°±æ˜¯è¿™ä¸ªæ˜ å°„ä¹Ÿæ˜¯é¢å¤–çš„å†…å­˜å¼€é”€</li>
<li><strong>hashing</strong>:å¯¹é¡µçš„idåšhashæ¥ç¡®å®šåˆ°é‚£å—ç¼“å­˜æ± </li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Pre-fetching</strong>: æ ¹æ®æŸ¥è¯¢è®¡åˆ’æ¥å¯¹é¢„å–é¡µé¢è¿›è¡Œä¼˜åŒ–ï¼Œæ¯”å¦‚å¤„ç†ç¬¬ä¸€ç»„é¡µé¢çš„æ—¶å€™æŠŠç¬¬äºŒç»„é¡µé¢ç»™é¢„æå–åˆ°ç¼“å†²æ± ä¸­ï¼ˆè¿™ä¸ªåœ¨é¡ºåºæ‰«æçš„æ—¶å€™å¸¸ç”¨ï¼‰ï¼Œåœ¨ç´¢å¼•æ‰«æçš„æ—¶å€™å¤„ç†æŸä¸ªå¶å­é¡µçš„æ—¶å€™å¯ä»¥æŠŠè¿™ä¸ªå¶å­é¡µçš„ä¸‹ä¸€é¡µä¹Ÿé¢„æå–åˆ°ç¼“å†²æ± ä¸­ï¼Œè¿™éƒ½æé«˜äº†æ•ˆç‡ï¼ˆè¿™ä¸ªä¸‹ä¸€é¡µéƒ½æ˜¯é€»è¾‘ä¸Šçš„ï¼Œä¸æ˜¯ç‰©ç†ä¸Šçš„ï¼‰</p>
</li>
<li>
<p><strong>Scan Sharing (Synchronized Scans)</strong>:å°½é‡å¤ç”¨ç¼“å†²æ± é‡Œé¢çš„æ•°æ®ï¼Œæ¯”å¦‚ç¬¬ä¸€ä¸ªäº‹åŠ¡æ˜¯SELECT ALL FROM Aï¼Œç¬¬äºŒä¸ªäº‹åŠ¡ä¹Ÿæ˜¯SELECT ALL FROM Aï¼Œè¿™ä¸ªæ—¶å€™ç¬¬ä¸€ä¸ªäº‹åŠ¡æŠŠé¡µ3~6åŠ è½½åˆ°ç¼“å†²æ± é‡Œé¢äº†ï¼Œé‚£ç¬¬äºŒä¸ªäº‹åŠ¡å¯ä»¥ä»è¿™ä¸ªåœ°æ–¹è·Ÿç€ç¬¬ä¸€ä¸ªäº‹åŠ¡å¼€å§‹æ‰«ï¼Œç­‰æŠŠåé¢é‚£äº›è·Ÿç€ç¬¬ä¸€ä¸ªäº‹åŠ¡æ‰«å®Œä¹‹åå†å»æ‰«å‰é¢çš„è¡¨ï¼Œæˆ–è€…è¯´è¿™ä¸ªæ—¶å€™æœ‰SELECT ALL FROM A LIMIT 100è¿™ç§äº‹åŠ¡ï¼Œå¯ä»¥ç›´æ¥åˆ°ç¼“å†²æ± é‡Œé¢æ‰¾ä¸€å¼ è¡¨æ‹¿100æ¡æ•°æ®å°±èµ°ï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ¯æ¬¡æŸ¥è¯¢ç»“æœä¸ä¸€æ ·çš„åŸå› ï¼‰</p>
</li>
<li>
<p><strong>Buffer Pool Bypass</strong>:å…¨è¡¨æ‰«æï¼ˆå¯èƒ½åŠ SORTï¼‰ï¼Œå¤§å‹JOINè¿™ç§ä¸œè¥¿å¤§æ¦‚ç‡è¿™æ¬¡æŸ¥è¯¢å®Œäº†ä¹‹åè¿‘æœŸä¸ä¼šå†å·®ï¼Œè¿™ç§æ•°æ®é™¤äº†æŸ¥è¯¢æ—¶åŠ è½½åˆ°å†…å­˜ä¸­æŸ¥è¯¢å®Œäº†å°±æ‰”å‡ºå»ï¼Œæ¥èŠ‚çº¦ç¼“å†²æ± çš„èµ„æº</p>
</li>
</ul>
<h3 id="buffer-replacement-policies">Buffer Replacement Policies</h3>
<ul>
<li>
<p>è¦æ±‚æ˜¯å‡†ç¡®+å¿«+å¼€é”€å°</p>
</li>
<li>
<p><strong>COLCK</strong>:æ—¶é’Ÿè½®è¯¢ï¼Œå¦‚æœæœ‰frameè¢«è®¿é—®è¿‡ç»™æ‰“ä¸Šæ ‡è®°ï¼Œæ—¶é’Ÿå¾ªç¯çœ‹æ¯ä¸€å¸§ï¼Œæœ‰æ ‡è®°çš„æ¸…ç©ºæ ‡è®°ï¼Œæ²¡æœ‰æ ‡è®°è¯æ˜æœ€è¿‘æ²¡äººè®¿é—®ä½ ï¼Œç»™è¸¢å‡º</p>
</li>
<li>
<p><strong>LRU/LRU-K</strong>:çœ‹è¿™ä¸¤ç¯‡å°±å¤Ÿäº†</p>
<ul>
<li>
<p><a href="https://jungle430.github.io/posts/cmu-15-445-database-systems/lru_and_lru-k/" target="_blank" rel="noopener noreffer">ã€ŠLRU and LRU-Kã€‹</a></p>
</li>
<li>
<p><a href="https://zhuanlan.zhihu.com/p/622224538" target="_blank" rel="noopener noreffer">ã€ŠCMU 15-445 P1 LRU-K Replacement Policyã€‹</a></p>
</li>
</ul>
</li>
<li>
<p><strong>localization per query</strong>:é©±é€é¡µåªé©±é€è‡ªå·±äº‹åŠ¡ç›¸å…³çš„ï¼Œé˜²æ­¢æŠŠå…¶ä»–äº‹åŠ¡çš„é¡µç»™é©±é€</p>
</li>
<li>
<p><strong>priority hints</strong>:ç»™ä¸€äº›é¡µä¸Šæ ‡è®°ï¼Œå‘Šè¯‰ç¼“å­˜æ± è¿™é¡µä¸è¦éšä¾¿æ¸…ç†ï¼Œæ¯”å¦‚ç´¢å¼•çš„æ ¹èŠ‚ç‚¹ï¼Œè¿™ç§ä¸œè¥¿è½»æ˜“ä¸ä¼šæ¸…ç†</p>
</li>
<li>
<p><strong>Dirty Pages</strong>:è¸¢å‡ºé¡µçš„æ—¶å€™é¡µæ˜¯å¦æ˜¯è„é¡µå¯¹äºè¸¢å‡ºé¡µæ—¶å€™çš„å¤„ç†ä¸ä¸€æ ·</p>
<ul>
<li>éè„é¡µï¼šç›´æ¥åˆ é™¤å°±è¡Œ</li>
<li>è„é¡µï¼šè¦åˆ·å›ç£ç›˜ï¼Œå½“ç„¶èƒ½å†™ä¸å›å»å°±å°½é‡å…ˆä¸å†™å›å»ï¼ˆåé¢ä¼šè®²WALï¼Œredo-logï¼‰ï¼Œä¸€å®šè¦å…ˆå†™å›å†è¸¢å‡º</li>
</ul>
</li>
</ul>
<h3 id="disk-io-and-os-cache">Disk I/O and OS Cache</h3>
<ul>
<li>æ“ä½œç³»ç»Ÿæœ¬èº«ä¹Ÿæœ‰cacheçš„ç®¡ç†ï¼Œä½†æ˜¯å’ŒDBMSè¦æ±‚çš„å·®çš„å¾ˆå¤šï¼Œæ‰€ä»¥DBMSçš„ç¼“å­˜ç®¡ç†éƒ½æ˜¯å®šåˆ¶åŒ–çš„ï¼Œä¸ä¾èµ–æ“ä½œç³»ç»Ÿçš„è°ƒç”¨</li>
</ul>
<h3 id="other-memory-pools">Other Memory Pools</h3>
<ul>
<li>
<p>é™¤äº†ç¼“å­˜é¡µè¿˜ä¼šç¼“å­˜åˆ«çš„æ•°æ®ï¼ˆæ¯”å¦‚çƒ­ç‚¹æŸ¥è¯¢æ•°æ®ï¼Œè¿™é‡Œæœ‰ç‚¹åƒNoSQLçš„ä¸€äº›åŠŸèƒ½äº†ï¼‰</p>
<ul>
<li>
<p>Sorting + Join Buffers</p>
</li>
<li>
<p>Query Caches</p>
</li>
<li>
<p>Maintenance Buffers</p>
</li>
<li>
<p>Log Buffers</p>
</li>
<li>
<p>Dictionary Caches</p>
</li>
</ul>
</li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info"><div class="post-info-tag"><span><a href="/tags/database-systems/">Database Systems</a>
                </span></div><div class="post-info-line"><div class="post-info-mod">
                <span>æ›´æ–°äº 2024-04-08</span>
            </div><div class="post-info-mod"></div>
        </div><div class="post-info-share">
            <span><a href="javascript:void(0);" title="åˆ†äº«åˆ° Twitter" data-sharer="twitter" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter6/" data-title="CMU 15-445 Lecture #06: Buffer Pools" data-hashtags="Database Systems"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Facebook" data-sharer="facebook" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter6/" data-hashtag="Database Systems"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Linkedin" data-sharer="linkedin" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter6/"><i class="fab fa-linkedin fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° WhatsApp" data-sharer="whatsapp" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter6/" data-title="CMU 15-445 Lecture #06: Buffer Pools" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Line" data-sharer="line" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter6/" data-title="CMU 15-445 Lecture #06: Buffer Pools"><i class="fab fa-line fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° å¾®åš" data-sharer="weibo" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter6/" data-title="CMU 15-445 Lecture #06: Buffer Pools"><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Myspace" data-sharer="myspace" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter6/" data-title="CMU 15-445 Lecture #06: Buffer Pools" data-description=""><i data-svg-src="/lib/simple-icons/icons/myspace.min.svg"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Blogger" data-sharer="blogger" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter6/" data-title="CMU 15-445 Lecture #06: Buffer Pools" data-description=""><i class="fab fa-blogger fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° ç™¾åº¦" data-sharer="baidu" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter6/" data-title="CMU 15-445 Lecture #06: Buffer Pools"><i data-svg-src="/lib/simple-icons/icons/baidu.min.svg"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Evernote" data-sharer="evernote" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter6/" data-title="CMU 15-445 Lecture #06: Buffer Pools"><i class="fab fa-evernote fa-fw"></i></a></span>
        </div></div><div class="post-nav"><a href="/posts/cmu-15-445-database-systems/chapter5/" class="prev" rel="prev" title="CMU 15-445 Lecture #05: Storage Models &amp; Compression"><i class="fas fa-angle-left fa-fw"></i>Previous Post</a>
            <a href="/posts/cmu-15-445-database-systems/chapter7/" class="next" rel="next" title="CMU 15-445 Lecture #07: Hash Tables">Next Post<i class="fas fa-angle-right fa-fw"></i></a></div></div>
</div></article></div>
            </main>
            <footer class="footer"><div class="footer-container"><div class="footer-line">ç”± <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.105.0">Hugo</a> å¼ºåŠ›é©±åŠ¨ | ä¸»é¢˜ - <a href="https://github.com/khusika/FeelIt" target="_blank" rel="noopener noreffer" title="FeelIt 1.0.1"><i class="fas fa-hand-holding-heart fa-fw"></i> FeelIt</a>
        </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2022 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://github.com/Jungle430">Jungle</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
</div>
<script>
if ('serviceWorker' in navigator) {
    navigator.serviceWorker
        .register('/sw.min.js?version=0.0.1', { scope: '/' })
        .then(() => {
            console.info('Jungle\u0027s Blog\u00A0Service Worker Registered');
        }, err => console.error('Jungle\u0027s Blog\u00A0Service Worker registration failed: ', err));

    navigator.serviceWorker
        .ready
        .then(() => {
            console.info('Jungle\u0027s Blog\u00A0Service Worker Ready');
        });
}
</script>
</footer>
        </div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-chevron-up fa-fw"></i>
            </a></div><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><script src="https://polyfill.io/v3/polyfill.min.js?features=Array.prototype.fill%2CArray.prototype.find%2CArray.from%2CIntersectionObserver%2CMath.sign%2CObject.assign%2CPromise%2CObject.entries%2Chtml5shiv%2CObject.values%2Cfetch%2CElement.prototype.after"></script><script src="/lib/lazysizes/lazysizes.min.js"></script><script src="/lib/clipboard/clipboard.min.js"></script><script src="/lib/sharer/sharer.min.js"></script><script src="/lib/katex/katex.min.js"></script><script src="/lib/katex/auto-render.min.js"></script><script src="/lib/katex/copy-tex.min.js"></script><script src="/lib/katex/mhchem.min.js"></script><script>window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":100},"comment":{},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false}};</script><script src="/js/theme.min.js"></script></body></html>
