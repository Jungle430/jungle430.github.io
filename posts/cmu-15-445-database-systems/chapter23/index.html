<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>CMU 15-445 Lecture #23: Distributed OLTP Databases - Jungle&#39;s Blog</title><meta name="description" content="Welcome to Jungle&#39;s blog."><meta property="og:title" content="CMU 15-445 Lecture #23: Distributed OLTP Databases" />
<meta property="og:description" content="CMU 15-445 Database Systems Lecture #23: Distributed OLTP Databases We have not discussed how to ensure that all nodes agree to commit a txn and then to make sure it does commit if the DBMS decides it should. â†’ What happens if a node fails? â†’ What happens if messages show up late? â†’ What happens if the system does not wait for every node to agree to commit? Atomic" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter23/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-06-17T17:09:19+08:00" />
<meta property="article:modified_time" content="2024-06-17T17:09:19+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="CMU 15-445 Lecture #23: Distributed OLTP Databases"/>
<meta name="twitter:description" content="CMU 15-445 Database Systems Lecture #23: Distributed OLTP Databases We have not discussed how to ensure that all nodes agree to commit a txn and then to make sure it does commit if the DBMS decides it should. â†’ What happens if a node fails? â†’ What happens if messages show up late? â†’ What happens if the system does not wait for every node to agree to commit? Atomic"/>
<meta name="application-name" content="Jungle&#39;s blog">
<meta name="apple-mobile-web-app-title" content="Jungle&#39;s blog"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter23/" /><link rel="prev" href="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter22/" /><link rel="stylesheet" href="/css/page.min.css"><link rel="stylesheet" href="/css/home.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "CMU 15-445 Lecture #23: Distributed OLTP Databases",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/Jungle430.github.io\/posts\/cmu-15-445-database-systems\/chapter23\/"
        },"genre": "posts","keywords": "Database Systems","wordcount":  1124 ,
        "url": "https:\/\/Jungle430.github.io\/posts\/cmu-15-445-database-systems\/chapter23\/","datePublished": "2024-06-17T17:09:19+08:00","dateModified": "2024-06-17T17:09:19+08:00","publisher": {
            "@type": "Organization",
            "name": "Jungle"},"author": {
                "@type": "Person",
                "name": "Jungle"
            },"description": ""
    }
    </script></head><body data-header-desktop="fixed" data-header-mobile="auto"><script>(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Jungle&#39;s Blog">Jungle&#39;s Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/">ğŸ“š æ–‡ç«  </a><a class="menu-item" href="/tags/">ğŸ·ï¸ æ ‡ç­¾ </a><a class="menu-item" href="/categories/">ğŸ—ƒï¸ åˆ†ç±» </a><a class="menu-item" href="/about/">ğŸ‘´ å…³äº </a><a class="menu-item" href="https://github.com/Jungle430" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Jungle&#39;s Blog">Jungle&#39;s Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">ğŸ“šæ–‡ç« </a><a class="menu-item" href="/tags/" title="">ğŸ·ï¸æ ‡ç­¾</a><a class="menu-item" href="/categories/" title="">ğŸ—ƒï¸åˆ†ç±»</a><a class="menu-item" href="/about/" title="">ğŸ‘´å…³äº</a><a class="menu-item" href="https://github.com/Jungle430" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><div class="menu-item"><a href="javascript:void(0);" class="theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div></div>
    </div>
</header><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single" data-toc="enable"><div class="single-card" ><h2 class="single-title animated flipInX">CMU 15-445 Lecture #23: Distributed OLTP Databases</h2><div class="post-meta">
                <div class="post-meta-line"><span class="post-author"><a href="https://github.com/Jungle430" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jungle</a></span>&nbsp;<span class="post-category">å‡ºç‰ˆäº  <a href="/categories/cmu-15-445-database-systems/"><i class="far fa-folder fa-fw"></i>CMU 15-445 Database Systems</a></span></div>
                <div class="post-meta-line"><span><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2024-06-17">2024-06-17</time></span>&nbsp;<span><i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 1124 å­—</span>&nbsp;
                    <span><i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 3 åˆ†é’Ÿ</span>&nbsp;</div>
            </div>
            
            <hr><div class="details toc" id="toc-static"  data-kept="">
                    <div class="details-summary toc-title">
                        <span>ç›®å½•</span>
                        <span><i class="details-icon fas fa-angle-right"></i></span>
                    </div>
                    <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#lecture-23-distributed-oltp-databases">Lecture #23: Distributed OLTP Databases</a>
      <ul>
        <li><a href="#atomic-commit-protocols"><strong>Atomic Commit Protocols</strong></a>
          <ul>
            <li><a href="#two-phase-commit">Two-Phase Commit</a></li>
            <li><a href="#paxos">PAXOS</a></li>
          </ul>
        </li>
        <li><a href="#replication"><strong>Replication</strong></a></li>
        <li><a href="#cap-theorem"><strong>CAP Theorem</strong></a></li>
      </ul>
    </li>
  </ul>
</nav></div>
                </div><div class="content" id="content"><h1 id="cmu-15-445-database-systems">CMU 15-445 Database Systems</h1>
<h2 id="lecture-23-distributed-oltp-databases">Lecture #23: Distributed OLTP Databases</h2>
<ul>
<li>We have not discussed how to ensure that all nodes agree to commit a txn and then to make sure it does commit if the DBMS decides it should.
<ul>
<li>â†’ What happens if a node fails?</li>
<li>â†’ What happens if messages show up late?</li>
<li>â†’ What happens if the system does not wait for every node to agree to commit?</li>
</ul>
</li>
</ul>
<h3 id="atomic-commit-protocols"><strong>Atomic Commit Protocols</strong></h3>
<ul>
<li>å¤šä¸ªèŠ‚ç‚¹è¦è¿›è¡ŒåŸå­æäº¤</li>
<li>è§£å†³æ–¹æ¡ˆ
<ul>
<li>Two-Phase Commit (1970s)</li>
<li>Three-Phase Commit (1983)</li>
<li>Paxos (1989)</li>
<li>Raft (2013)</li>
<li>ZAB (2008? Zookeeper Atomic Broadcast protocol, <strong>Apache Zookeeper</strong>)</li>
<li>Viewstamped Replication (1988)</li>
</ul>
</li>
</ul>
<h4 id="two-phase-commit">Two-Phase Commit</h4>
<figure><a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter23-1.png" title="/img/CMU 15-445 Database Systems/chapter23-1.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter23-1.png" data-sub-html="<h2>Two-Phase Commitï¼ŒPhase1: Prepareï¼šè¯¢é—®å…¶ä»–èŠ‚ç‚¹å‡†å¤‡å¥½äº†æ²¡</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/CMU%2015-445%20Database%20Systems/chapter23-1.png"
            data-srcset="/img/CMU%2015-445%20Database%20Systems/chapter23-1.png, /img/CMU%2015-445%20Database%20Systems/chapter23-1.png 1.5x, /img/CMU%2015-445%20Database%20Systems/chapter23-1.png 2x"
            data-sizes="auto"
            alt="/img/CMU 15-445 Database Systems/chapter23-1.png" />
    </a><figcaption class="image-caption">Two-Phase Commitï¼Œ<strong>Phase1: Prepare</strong>ï¼šè¯¢é—®å…¶ä»–èŠ‚ç‚¹å‡†å¤‡å¥½äº†æ²¡</figcaption>
    </figure>
<figure><a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter23-2.png" title="/img/CMU 15-445 Database Systems/chapter23-2.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter23-2.png" data-sub-html="<h2>Two-Phase Commit å…¶ä»–èŠ‚ç‚¹è®¤ä¸ºå¯è¡Œï¼Œå›å¤OK</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/CMU%2015-445%20Database%20Systems/chapter23-2.png"
            data-srcset="/img/CMU%2015-445%20Database%20Systems/chapter23-2.png, /img/CMU%2015-445%20Database%20Systems/chapter23-2.png 1.5x, /img/CMU%2015-445%20Database%20Systems/chapter23-2.png 2x"
            data-sizes="auto"
            alt="/img/CMU 15-445 Database Systems/chapter23-2.png" />
    </a><figcaption class="image-caption">Two-Phase Commit å…¶ä»–èŠ‚ç‚¹è®¤ä¸ºå¯è¡Œï¼Œå›å¤OK</figcaption>
    </figure>
<figure><a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter23-3.png" title="/img/CMU 15-445 Database Systems/chapter23-3.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter23-3.png" data-sub-html="<h2>Two-Phase Commit Phase2: Commitï¼šå‘å…¶ä»–èŠ‚ç‚¹å‘é€commitè¯·æ±‚</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/CMU%2015-445%20Database%20Systems/chapter23-3.png"
            data-srcset="/img/CMU%2015-445%20Database%20Systems/chapter23-3.png, /img/CMU%2015-445%20Database%20Systems/chapter23-3.png 1.5x, /img/CMU%2015-445%20Database%20Systems/chapter23-3.png 2x"
            data-sizes="auto"
            alt="/img/CMU 15-445 Database Systems/chapter23-3.png" />
    </a><figcaption class="image-caption">Two-Phase Commit <strong>Phase2: Commit</strong>ï¼šå‘å…¶ä»–èŠ‚ç‚¹å‘é€commitè¯·æ±‚</figcaption>
    </figure>
<figure><a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter23-4.png" title="/img/CMU 15-445 Database Systems/chapter23-4.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter23-4.png" data-sub-html="<h2>Two-Phase Commit æœ¬åœ°æäº¤å®Œæˆåå›å¤OK</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/CMU%2015-445%20Database%20Systems/chapter23-4.png"
            data-srcset="/img/CMU%2015-445%20Database%20Systems/chapter23-4.png, /img/CMU%2015-445%20Database%20Systems/chapter23-4.png 1.5x, /img/CMU%2015-445%20Database%20Systems/chapter23-4.png 2x"
            data-sizes="auto"
            alt="/img/CMU 15-445 Database Systems/chapter23-4.png" />
    </a><figcaption class="image-caption">Two-Phase Commit æœ¬åœ°æäº¤å®Œæˆåå›å¤OK</figcaption>
    </figure>
<figure><a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter23-5.png" title="/img/CMU 15-445 Database Systems/chapter23-5.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter23-5.png" data-sub-html="<h2>å‘Šè¯‰åº”ç”¨æäº¤æˆåŠŸ</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/CMU%2015-445%20Database%20Systems/chapter23-5.png"
            data-srcset="/img/CMU%2015-445%20Database%20Systems/chapter23-5.png, /img/CMU%2015-445%20Database%20Systems/chapter23-5.png 1.5x, /img/CMU%2015-445%20Database%20Systems/chapter23-5.png 2x"
            data-sizes="auto"
            alt="/img/CMU 15-445 Database Systems/chapter23-5.png" />
    </a><figcaption class="image-caption">å‘Šè¯‰åº”ç”¨æäº¤æˆåŠŸ</figcaption>
    </figure>
<ul>
<li>
<p>å¦‚æœæœ‰èŠ‚ç‚¹å‘é€äº†ABORTçš„è¯·æ±‚ï¼Œåè°ƒè€…ä¼šå›å¤åº”ç”¨äº‹åŠ¡å›æ»šï¼Œç„¶åå‘æ‰€æœ‰èŠ‚ç‚¹å‘é€ABORTæŒ‡ä»¤</p>
</li>
<li>
<p>2PC OPTIMIZATIONS</p>
<ul>
<li>
<p><strong>Early Prepare Voting</strong> <em>(Rare)</em></p>
<ul>
<li>â†’ If you send a query to a remote node that you know will be the last one to execute in this txn, then that node will also return their vote for the prepare phase with the query result.(å¦‚æœçŸ¥é“æ˜¯äº‹åŠ¡çš„æœ€åä¸€å¥æˆ‘è‡ªå·±è‡ªå·±æŠ•ç¥¨ï¼Œä¸ç”¨ç­‰ç”¨æˆ·æŒ‡ä»¤)</li>
</ul>
</li>
<li>
<p><strong>Early Ack After Prepare</strong> <em>(Common)</em></p>
<ul>
<li>â†’ If all nodes vote to commit a txn, the coordinator can send the client an acknowledgement that their txn was successful before the commit phase finishes.(æäº¤ä¹‹å‰å…ˆåå‘Šè¯‰åº”ç”¨æœ¬æ¬¡txnæˆåŠŸäº†ï¼Œä¹Ÿæœ‰ä¸€å®šæ•°æ®å®‰å…¨çš„é£é™©)</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure><a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter23-6.png" title="/img/CMU 15-445 Database Systems/chapter23-6.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter23-6.png" data-sub-html="<h2>Early Ack After Prepare</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/CMU%2015-445%20Database%20Systems/chapter23-6.png"
            data-srcset="/img/CMU%2015-445%20Database%20Systems/chapter23-6.png, /img/CMU%2015-445%20Database%20Systems/chapter23-6.png 1.5x, /img/CMU%2015-445%20Database%20Systems/chapter23-6.png 2x"
            data-sizes="auto"
            alt="/img/CMU 15-445 Database Systems/chapter23-6.png" />
    </a><figcaption class="image-caption">Early Ack After Prepare</figcaption>
    </figure>
<h4 id="paxos">PAXOS</h4>
<ul>
<li>
<p>Consensus protocol where a coordinator proposes an outcome (e.g., commit or abort) and then the participants vote on whether that outcome should succeedï¼ˆåè°ƒå‘˜æå‡ºæ¥ä¸€ä¸ªè¯·æ±‚ï¼Œå¤§å®¶æŠ•ç¥¨å†³å®šï¼‰</p>
</li>
<li>
<p>Does not block if a majority of participants are available and has provably minimal message delays in the best case.ï¼ˆå¯ç”¨æƒ…å†µä¸‹å°‘æ•°æœä»å¤šæ•°ï¼‰</p>
</li>
</ul>
<figure><a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter23-7.png" title="/img/CMU 15-445 Database Systems/chapter23-7.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter23-7.png" data-sub-html="<h2>äº‹åŠ¡å†²çªæ—¶è¦è¿›è¡Œèˆå¼ƒ</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/CMU%2015-445%20Database%20Systems/chapter23-7.png"
            data-srcset="/img/CMU%2015-445%20Database%20Systems/chapter23-7.png, /img/CMU%2015-445%20Database%20Systems/chapter23-7.png 1.5x, /img/CMU%2015-445%20Database%20Systems/chapter23-7.png 2x"
            data-sizes="auto"
            alt="/img/CMU 15-445 Database Systems/chapter23-7.png" />
    </a><figcaption class="image-caption">äº‹åŠ¡å†²çªæ—¶è¦è¿›è¡Œèˆå¼ƒ</figcaption>
    </figure>
<hr>
<ul>
<li>
<p><strong>Two</strong> <strong>Phase Commit</strong>: Blocks if coordinator fails after the prepare message is sent, until coordinator recovers.</p>
</li>
<li>
<p><strong>Paxos</strong>: Nonblocking if a majority participants are alive, provided there is a sufficiently long period without further failures.</p>
</li>
<li>
<p><strong>Raft:</strong> Similar to Paxos but with fewer node types. Only nodes with most up-to-date log can become leaders.</p>
</li>
<li>
<p><strong>Multi-Paxos</strong>: If the system elects a single leader that oversees proposing changes for some period, then it can skip the propose phase. The system periodically renews who the leader is using another Paxos round. When there is a failure, the DBMS can fall back to full Paxos.</p>
</li>
</ul>
<h3 id="replication"><strong>Replication</strong></h3>
<ul>
<li>
<p>å‰¯æœ¬ï¼Œå†—ä½™å­˜å‚¨ä¿è¯ç¨³å®šæ€§</p>
</li>
<li>
<p>Design Decisions:</p>
<ul>
<li>â†’ Replica Configuration</li>
<li>â†’ Propagation Scheme</li>
<li>â†’ Propagation Timing</li>
<li>â†’ Update Method</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p><strong>Replica Configuration</strong></p>
</li>
<li>
<p><strong>Approach #1: Primary-Replica</strong></p>
<ul>
<li>â†’ All updates go to a designated primary for each object.</li>
<li>â†’ The primary propagates updates to its replicas by shipping logs.</li>
<li>â†’ Read-only txns may be allowed to access replicas.</li>
<li>â†’ If the primary goes down, then hold an election to select a new primary.</li>
</ul>
</li>
<li>
<p><strong>Approach #2: Multi-Primary</strong></p>
<ul>
<li>â†’ Txns can update data objects at any replica.</li>
<li>â†’ Replicas must synchronize with each other using an atomic commit protocol.</li>
</ul>
</li>
</ul>
<a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter23-8.png" title="/img/CMU 15-445 Database Systems/chapter23-8.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter23-8.png">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/CMU%2015-445%20Database%20Systems/chapter23-8.png"
            data-srcset="/img/CMU%2015-445%20Database%20Systems/chapter23-8.png, /img/CMU%2015-445%20Database%20Systems/chapter23-8.png 1.5x, /img/CMU%2015-445%20Database%20Systems/chapter23-8.png 2x"
            data-sizes="auto"
            alt="/img/CMU 15-445 Database Systems/chapter23-8.png" />
    </a>
<hr>
<ul>
<li><strong>K-Safety</strong>
<ul>
<li>ç¡®ä¿çº¿ä¸Šè‡³å°‘æœ‰Kä¸ªæ•°æ®å‰¯æœ¬</li>
<li>ä½äºè¯¥é˜ˆå€¼ï¼Œæ•°æ®åº“ç›´æ¥ä¸‹çº¿</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p><strong>Propagation Scheme</strong></p>
<ul>
<li>
<p><em>synchronous</em> scheme: ä¸»åº“æäº¤äº‹åŠ¡çš„æ—¶å€™è¦å¡ä½å»é€šçŸ¥ä»èŠ‚ç‚¹ï¼Œå½“ä»èŠ‚ç‚¹ä¹Ÿæäº¤æˆåŠŸåæ‰å‘Šè¯‰ç”¨æˆ·æˆåŠŸäº†</p>
</li>
<li>
<p><em>asynchronous</em> scheme: ä¸»åº“æäº¤å®Œäº†å°±æ‹‰åˆ°ï¼Œä¸ç®¡åç»­</p>
</li>
<li>
<figure><a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter23-9.png" title="/img/CMU 15-445 Database Systems/chapter23-9.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter23-9.png" data-sub-html="<h2>synchronous, asynchronous</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/CMU%2015-445%20Database%20Systems/chapter23-9.png"
            data-srcset="/img/CMU%2015-445%20Database%20Systems/chapter23-9.png, /img/CMU%2015-445%20Database%20Systems/chapter23-9.png 1.5x, /img/CMU%2015-445%20Database%20Systems/chapter23-9.png 2x"
            data-sizes="auto"
            alt="/img/CMU 15-445 Database Systems/chapter23-9.png" />
    </a><figcaption class="image-caption"><em>synchronous</em>, <em>asynchronous</em></figcaption>
    </figure>
</li>
<li>
<p>æŠ˜ä¸­è§£å†³æ–¹æ¡ˆï¼šåŠåŒæ­¥ï¼šç­‰æ—¥å¿—ä¼ é€åˆ°å¤‡åº“ï¼Œä¸ç”¨ç­‰å¤‡åº“æ‰§è¡Œå®Œï¼ˆMySQLï¼‰</p>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li><strong>Propagation Timing</strong>
<ul>
<li><strong>Continuous</strong>ï¼šæŒç»­ä¸æ–­å‘å¤‡åº“ä¼ æ’­ï¼Œéš¾çš„å°±æ˜¯å›æ»šçš„é—®é¢˜ï¼Œè¦ä¸»å¤‡ä¸€èµ·å›æ»š</li>
<li><strong>On Commit</strong>ï¼šThe DBMS only sends the log messages for a txn to the replicas once the txn is commits.ï¼ˆä¸»åº“æäº¤å®Œäº†æ‰ç»™å¤‡åº“å‘æ—¥å¿—ï¼‰ï¼Œä¸ç”¨åœ¨å›æ»šä¸Šé¢æµªè´¹æ—¶é—´</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p><strong>Active vs Passive</strong></p>
<ul>
<li>
<p><strong>Active-Active</strong>ï¼šä¸»åº“ç»™å¤‡åº“çš„æ˜¯SQLè¯­å¥ï¼Œå¤‡åº“è¿˜è¦é‡æ–°æ‰§è¡Œä¸€é</p>
</li>
<li>
<p><strong>Active-Passive</strong>ï¼šä¸»åº“ç»™å¤‡åº“çš„ç‰©ç†æ—¥å¿—ï¼Œå¤‡åº“ç›´æ¥æ‰§è¡Œæ—¥å¿—å°±è¡Œ</p>
</li>
<li>
<p>ç‰©ç†æ—¥å¿—å¤§ï¼ŒSQLæ‰§è¡Œæ…¢ï¼Œç°å®ä¸­å¾€å¾€æ˜¯æ··åˆä¼ æ’­ï¼ˆMySQLï¼‰</p>
</li>
</ul>
</li>
</ul>
<h3 id="cap-theorem"><strong>CAP Theorem</strong></h3>
<ul>
<li>
<p>â†’ <strong>Consistent</strong></p>
</li>
<li>
<p>â†’ <strong>Always Available</strong></p>
</li>
<li>
<p>â†’ <strong>Network Partition Tolerant</strong>ï¼ˆæ–­å¼€ç½‘ç»œï¼Œé›†ç¾¤åˆ†è£‚è¿˜èƒ½ç”¨ï¼‰</p>
</li>
<li>
<p>ä¸Šè¿°çš„ä¸‰ç‚¹æ°¸è¿œä¸å¯èƒ½åŒæ—¶å®ç°</p>
</li>
<li>
<p>æ‹“å±•ï¼šè”é‚¦æ•°æ®åº“ï¼šé€šè¿‡ç»Ÿä¸€APIæ¥è®©ä¸åŒç§ç±»çš„æ•°æ®åº“åˆæˆä¸€ä¸ªé›†ç¾¤ï¼Œä½†æ˜¯ä¸šç•Œç›®å‰æ²¡æœ‰ä»€ä¹ˆäº§å“</p>
</li>
</ul>
<a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter23-10.png" title="/img/CMU 15-445 Database Systems/chapter23-10.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter23-10.png">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/CMU%2015-445%20Database%20Systems/chapter23-10.png"
            data-srcset="/img/CMU%2015-445%20Database%20Systems/chapter23-10.png, /img/CMU%2015-445%20Database%20Systems/chapter23-10.png 1.5x, /img/CMU%2015-445%20Database%20Systems/chapter23-10.png 2x"
            data-sizes="auto"
            alt="/img/CMU 15-445 Database Systems/chapter23-10.png" />
    </a>
</div><div class="post-footer" id="post-footer">
    <div class="post-info"><div class="post-info-tag"><span><a href="/tags/database-systems/">Database Systems</a>
                </span></div><div class="post-info-line"><div class="post-info-mod">
                <span>æ›´æ–°äº 2024-06-17</span>
            </div><div class="post-info-mod"></div>
        </div><div class="post-info-share">
            <span><a href="javascript:void(0);" title="åˆ†äº«åˆ° Twitter" data-sharer="twitter" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter23/" data-title="CMU 15-445 Lecture #23: Distributed OLTP Databases" data-hashtags="Database Systems"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Facebook" data-sharer="facebook" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter23/" data-hashtag="Database Systems"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Linkedin" data-sharer="linkedin" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter23/"><i class="fab fa-linkedin fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° WhatsApp" data-sharer="whatsapp" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter23/" data-title="CMU 15-445 Lecture #23: Distributed OLTP Databases" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Line" data-sharer="line" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter23/" data-title="CMU 15-445 Lecture #23: Distributed OLTP Databases"><i class="fab fa-line fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° å¾®åš" data-sharer="weibo" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter23/" data-title="CMU 15-445 Lecture #23: Distributed OLTP Databases"><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Myspace" data-sharer="myspace" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter23/" data-title="CMU 15-445 Lecture #23: Distributed OLTP Databases" data-description=""><i data-svg-src="/lib/simple-icons/icons/myspace.min.svg"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Blogger" data-sharer="blogger" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter23/" data-title="CMU 15-445 Lecture #23: Distributed OLTP Databases" data-description=""><i class="fab fa-blogger fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° ç™¾åº¦" data-sharer="baidu" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter23/" data-title="CMU 15-445 Lecture #23: Distributed OLTP Databases"><i data-svg-src="/lib/simple-icons/icons/baidu.min.svg"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Evernote" data-sharer="evernote" data-url="https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter23/" data-title="CMU 15-445 Lecture #23: Distributed OLTP Databases"><i class="fab fa-evernote fa-fw"></i></a></span>
        </div></div><div class="post-nav"><a href="/posts/cmu-15-445-database-systems/chapter22/" class="prev" rel="prev" title="CMU 15-445 Lecture #22: Introduction to Distributed Databases"><i class="fas fa-angle-left fa-fw"></i>Previous Post</a></div></div>
</div></article></div>
            </main>
            <footer class="footer"><div class="footer-container"><div class="footer-line">ç”± <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.105.0">Hugo</a> å¼ºåŠ›é©±åŠ¨ | ä¸»é¢˜ - <a href="https://github.com/khusika/FeelIt" target="_blank" rel="noopener noreffer" title="FeelIt 1.0.1"><i class="fas fa-hand-holding-heart fa-fw"></i> FeelIt</a>
        </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2022 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://github.com/Jungle430">Jungle</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
</div>
<script>
if ('serviceWorker' in navigator) {
    navigator.serviceWorker
        .register('/sw.min.js?version=0.0.1', { scope: '/' })
        .then(() => {
            console.info('Jungle\u0027s Blog\u00A0Service Worker Registered');
        }, err => console.error('Jungle\u0027s Blog\u00A0Service Worker registration failed: ', err));

    navigator.serviceWorker
        .ready
        .then(() => {
            console.info('Jungle\u0027s Blog\u00A0Service Worker Ready');
        });
}
</script>
</footer>
        </div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-chevron-up fa-fw"></i>
            </a></div><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><script src="https://polyfill.io/v3/polyfill.min.js?features=Array.prototype.fill%2CArray.prototype.find%2CArray.from%2CIntersectionObserver%2CMath.sign%2CObject.assign%2CPromise%2CObject.entries%2Chtml5shiv%2CObject.values%2Cfetch%2CElement.prototype.after"></script><script src="/lib/lazysizes/lazysizes.min.js"></script><script src="/lib/clipboard/clipboard.min.js"></script><script src="/lib/sharer/sharer.min.js"></script><script src="/lib/katex/katex.min.js"></script><script src="/lib/katex/auto-render.min.js"></script><script src="/lib/katex/copy-tex.min.js"></script><script src="/lib/katex/mhchem.min.js"></script><script>window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":100},"comment":{},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false}};</script><script src="/js/theme.min.js"></script></body></html>
