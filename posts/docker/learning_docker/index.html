<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Learning docker - Jungle&#39;s Blog</title><meta name="description" content="Welcome to Jungle&#39;s blog."><meta property="og:title" content="Learning docker" />
<meta property="og:description" content="Learning Docker èƒŒæ™¯æ¦‚è¦ $2005 \Rightarrow 2015$ï¼šCloudï¼ˆäº‘æŠ€æœ¯ï¼‰æ—¶ä»£ï¼Œä¸ºContaineræ‰“ä¸‹åŸºç¡€ï¼Œå¸¦æ¥åœŸå£¤ $2015 \Rightarrow\ Now$ï¼šContainerï¼ˆå®¹å™¨ï¼‰æ—¶ä»£ï¼Œæœ€" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://Jungle430.github.io/posts/docker/learning_docker/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-14T17:54:38+08:00" />
<meta property="article:modified_time" content="2023-09-14T17:54:38+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Learning docker"/>
<meta name="twitter:description" content="Learning Docker èƒŒæ™¯æ¦‚è¦ $2005 \Rightarrow 2015$ï¼šCloudï¼ˆäº‘æŠ€æœ¯ï¼‰æ—¶ä»£ï¼Œä¸ºContaineræ‰“ä¸‹åŸºç¡€ï¼Œå¸¦æ¥åœŸå£¤ $2015 \Rightarrow\ Now$ï¼šContainerï¼ˆå®¹å™¨ï¼‰æ—¶ä»£ï¼Œæœ€"/>
<meta name="application-name" content="Jungle&#39;s blog">
<meta name="apple-mobile-web-app-title" content="Jungle&#39;s blog"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://Jungle430.github.io/posts/docker/learning_docker/" /><link rel="prev" href="https://Jungle430.github.io/posts/go/pdqsort/" /><link rel="next" href="https://Jungle430.github.io/posts/cmu-15-445-database-systems/lru_and_lru-k/" /><link rel="stylesheet" href="/css/page.min.css"><link rel="stylesheet" href="/css/home.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Learning docker",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/Jungle430.github.io\/posts\/docker\/learning_docker\/"
        },"genre": "posts","keywords": "docker","wordcount":  4386 ,
        "url": "https:\/\/Jungle430.github.io\/posts\/docker\/learning_docker\/","datePublished": "2023-09-14T17:54:38+08:00","dateModified": "2023-09-14T17:54:38+08:00","publisher": {
            "@type": "Organization",
            "name": "Jungle"},"author": {
                "@type": "Person",
                "name": "Jungle"
            },"description": ""
    }
    </script></head><body data-header-desktop="fixed" data-header-mobile="auto"><script>(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Jungle&#39;s Blog">Jungle&#39;s Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/">ğŸ“š æ–‡ç«  </a><a class="menu-item" href="/tags/">ğŸ·ï¸ æ ‡ç­¾ </a><a class="menu-item" href="/categories/">ğŸ—ƒï¸ åˆ†ç±» </a><a class="menu-item" href="/about/">ğŸ‘´ å…³äº </a><a class="menu-item" href="https://github.com/Jungle430" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Jungle&#39;s Blog">Jungle&#39;s Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">ğŸ“šæ–‡ç« </a><a class="menu-item" href="/tags/" title="">ğŸ·ï¸æ ‡ç­¾</a><a class="menu-item" href="/categories/" title="">ğŸ—ƒï¸åˆ†ç±»</a><a class="menu-item" href="/about/" title="">ğŸ‘´å…³äº</a><a class="menu-item" href="https://github.com/Jungle430" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><div class="menu-item"><a href="javascript:void(0);" class="theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div></div>
    </div>
</header><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single" data-toc="enable"><div class="single-card" ><h2 class="single-title animated flipInX">Learning docker</h2><div class="post-meta">
                <div class="post-meta-line"><span class="post-author"><a href="https://github.com/Jungle430" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jungle</a></span>&nbsp;<span class="post-category">å‡ºç‰ˆäº  <a href="/categories/docker/"><i class="far fa-folder fa-fw"></i>docker</a></span></div>
                <div class="post-meta-line"><span><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2023-09-14">2023-09-14</time></span>&nbsp;<span><i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 4386 å­—</span>&nbsp;
                    <span><i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 9 åˆ†é’Ÿ</span>&nbsp;</div>
            </div>
            
            <hr><div class="details toc" id="toc-static"  data-kept="">
                    <div class="details-summary toc-title">
                        <span>ç›®å½•</span>
                        <span><i class="details-icon fas fa-angle-right"></i></span>
                    </div>
                    <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#èƒŒæ™¯æ¦‚è¦">èƒŒæ™¯æ¦‚è¦</a></li>
    <li><a href="#containerçš„æ¦‚å¿µ"><code>Container</code>çš„æ¦‚å¿µ</a></li>
    <li><a href="#å®‰è£…">å®‰è£…</a>
      <ul>
        <li><a href="#windows"><code>Windows</code></a></li>
        <li><a href="#linux"><code>Linux</code></a></li>
      </ul>
    </li>
    <li><a href="#åˆ›å»ºä¸æ“ä½œå®¹å™¨">åˆ›å»ºä¸æ“ä½œå®¹å™¨</a>
      <ul>
        <li><a href="#åˆ›å»ºå®¹å™¨">åˆ›å»ºå®¹å™¨</a></li>
        <li><a href="#æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨">æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨</a></li>
        <li><a href="#æŸ¥çœ‹æ‰€æœ‰å®¹å™¨">æŸ¥çœ‹æ‰€æœ‰å®¹å™¨</a></li>
        <li><a href="#å¯åŠ¨å®¹å™¨">å¯åŠ¨å®¹å™¨</a></li>
        <li><a href="#åœæ­¢æ­£åœ¨è¿è¡Œçš„å®¹å™¨">åœæ­¢æ­£åœ¨è¿è¡Œçš„å®¹å™¨</a></li>
        <li><a href="#åˆ é™¤å®¹å™¨">åˆ é™¤å®¹å™¨</a></li>
        <li><a href="#å¤šå®¹å™¨æ“ä½œ">å¤šå®¹å™¨æ“ä½œ</a></li>
      </ul>
    </li>
    <li><a href="#ç«¯å£æ˜ å°„ä¸ä¸»è¢«åŠ¨æ¨¡å¼">ç«¯å£æ˜ å°„ä¸ä¸»/è¢«åŠ¨æ¨¡å¼</a>
      <ul>
        <li><a href="#ç«¯å£æ˜ å°„">ç«¯å£æ˜ å°„</a></li>
        <li><a href="#ä¸»åŠ¨æ¨¡å¼é»˜è®¤">ä¸»åŠ¨æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰</a></li>
        <li><a href="#è¢«åŠ¨æ¨¡å¼åå°è¿è¡Œ">è¢«åŠ¨æ¨¡å¼ï¼ˆåå°è¿è¡Œï¼‰</a></li>
        <li><a href="#è½¬æ¢æˆä¸»åŠ¨æ¨¡å¼">è½¬æ¢æˆä¸»åŠ¨æ¨¡å¼</a></li>
        <li><a href="#detachedæ¨¡å¼ä¸‹æŸ¥çœ‹æ—¥å¿—çš„æ–¹æ³•"><code>detached</code>æ¨¡å¼ä¸‹æŸ¥çœ‹æ—¥å¿—çš„æ–¹æ³•</a></li>
      </ul>
    </li>
    <li><a href="#äº¤äº’æ¨¡å¼">äº¤äº’æ¨¡å¼</a>
      <ul>
        <li><a href="#å¦‚ä½•exitåä¸å…³é—­å®¹å™¨">å¦‚ä½•<code>exit</code>åä¸å…³é—­å®¹å™¨</a></li>
      </ul>
    </li>
    <li><a href="#é•œåƒè·å–image-registry">é•œåƒè·å–/<code>Image Registry</code></a>
      <ul>
        <li><a href="#è·å–é•œåƒçš„ä¸‰ä¸ªé€”å¾„">è·å–é•œåƒçš„ä¸‰ä¸ªé€”å¾„</a></li>
        <li><a href="#é•œåƒçš„æ‹‰å–å’Œåˆ é™¤">é•œåƒçš„æ‹‰å–å’Œåˆ é™¤</a></li>
        <li><a href="#æŸ¥çœ‹ç°æœ‰é•œåƒ">æŸ¥çœ‹ç°æœ‰é•œåƒ</a></li>
        <li><a href="#æŸ¥çœ‹é•œåƒè¯¦ç»†ä¿¡æ¯">æŸ¥çœ‹é•œåƒè¯¦ç»†ä¿¡æ¯</a></li>
        <li><a href="#åˆ é™¤é•œåƒ">åˆ é™¤é•œåƒ</a></li>
        <li><a href="#imageçš„å¯¼å…¥å¯¼å‡º"><code>image</code>çš„å¯¼å…¥/å¯¼å‡º</a></li>
      </ul>
    </li>
    <li><a href="#dockerfile"><code>Dockerfile</code></a>
      <ul>
        <li><a href="#æ„å»ºdockerfile">æ„å»º<code>Dockerfile</code></a>
          <ul>
            <li><a href="#fromè¯­æ³•"><code>FROM</code>è¯­æ³•</a></li>
            <li><a href="#runå‘½ä»¤"><code>RUN</code>å‘½ä»¤</a></li>
            <li><a href="#æ–‡ä»¶æ“ä½œ">æ–‡ä»¶æ“ä½œ</a></li>
            <li><a href="#env"><code>ENV</code></a></li>
            <li><a href="#arg"><code>ARG</code></a></li>
            <li><a href="#cmd"><code>CMD</code></a></li>
            <li><a href="#entrypoint"><code>ENTRYPOINT</code></a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#docker-compose"><code>Docker-compose</code></a>
      <ul>
        <li><a href="#ymlæ–‡ä»¶çš„åŸºæœ¬è¯­æ³•"><code>yml</code>æ–‡ä»¶çš„åŸºæœ¬è¯­æ³•</a></li>
      </ul>
    </li>
    <li><a href="#ç½‘ç»œé…ç½®">ç½‘ç»œé…ç½®</a></li>
  </ul>
</nav></div>
                </div><div class="content" id="content"><h1 id="learning-docker">Learning Docker</h1>
<h2 id="èƒŒæ™¯æ¦‚è¦">èƒŒæ™¯æ¦‚è¦</h2>
<ul>
<li>$2005 \Rightarrow 2015$ï¼š<code>Cloud</code>ï¼ˆäº‘æŠ€æœ¯ï¼‰æ—¶ä»£ï¼Œä¸º<code>Container</code>æ‰“ä¸‹åŸºç¡€ï¼Œå¸¦æ¥åœŸå£¤</li>
<li>$2015 \Rightarrow\ Now$ï¼š<code>Container</code>ï¼ˆå®¹å™¨ï¼‰æ—¶ä»£ï¼Œæœ€å‡ºåçš„ä»£è¡¨å°±æ˜¯<code>Docker</code></li>
</ul>
<h2 id="containerçš„æ¦‚å¿µ"><code>Container</code>çš„æ¦‚å¿µ</h2>
<ul>
<li>ç®€è¿°ï¼šå¤åˆ¶äº†ä¸€éä½ çš„è¿è¡Œç¯å¢ƒï¼Œåˆ«äººæ‹¿è¿‡æ¥èƒ½ç›´æ¥è·‘å¯¹åº”çš„ç¨‹åºï¼Œä¸ç”¨å†æŠ˜è…¾é…ç¯å¢ƒè¿™ç§å¸é©¬äº‹æƒ…äº†</li>
</ul>
<h2 id="å®‰è£…">å®‰è£…</h2>
<h3 id="windows"><code>Windows</code></h3>
<ul>
<li>
<p><a href="https://www.docker.com" target="_blank" rel="noopener noreffer">Dockerå®˜ç½‘</a>ï¼Œä¸‹è½½æ¡Œé¢ç‰ˆ</p>
</li>
<li>
<p>æ³¨æ„å®‰è£…å‰å¼€å¯<code>BIOS</code>è™šæ‹ŸåŒ–</p>
</li>
<li>
<p>å¦‚æœå¼€å¯<code>wsl2</code>èƒ½çœå»å¾ˆå¤šäº‹æƒ…ï¼ˆ</p>
</li>
<li>
<p>æœ€ç»ˆéªŒè¯ï¼šå‘½ä»¤è¡Œè¿è¡Œ</p>
</li>
</ul>
<h3 id="linux"><code>Linux</code></h3>
<ul>
<li><a href="get.docker.com" rel="">get.docker.com</a>
<ul>
<li>ä¸‹è½½åè·‘è„šæœ¬å³å¯</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl -fsSL get.docker.com -o get-docker.sh
</span></span><span class="line"><span class="cl">sudo ./get-docker.sh
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æœ€ç»ˆéªŒè¯ï¼šå‘½ä»¤è¡Œè¿è¡Œ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl start docker
</span></span><span class="line"><span class="cl">docker version
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="åˆ›å»ºä¸æ“ä½œå®¹å™¨">åˆ›å»ºä¸æ“ä½œå®¹å™¨</h2>
<ul>
<li>é•œåƒ(<code>image</code>)ï¼šåŒ…å«<code>OS</code>å’Œåº”ç”¨çš„å¯¹è±¡ï¼Œç±»ä¼¼è™šæ‹Ÿæœºçš„æ¨¡æ¿ï¼ˆè£…ç³»ç»Ÿç”¨çš„é‚£ç§ï¼Œæ¯”å¦‚ç³»ç»Ÿç›˜ï¼ï¼‰ï¼Œåªèƒ½è¯»</li>
<li>å®¹å™¨(<code>container</code>)ï¼šå’Œé•œåƒå‡ ä¹ä¸€æ ·ï¼Œä½†æ˜¯æ¯”é•œåƒå¤šäº†ä¸€å±‚<code>Read-Write Layer</code>ï¼Œè¿™æ ·å°±å¯ä»¥å†™äº†</li>
</ul>
<hr>
<h3 id="åˆ›å»ºå®¹å™¨">åˆ›å»ºå®¹å™¨</h3>
<ul>
<li>
<p>å…ˆæ£€æµ‹<code>Client</code>å’Œ<code>Server</code>æ˜¯å¦éƒ½å¯åŠ¨<code>docker version</code>ï¼ˆ<code>docker</code>æ¡Œé¢ç‰ˆè¦æŒ‚ç€ï¼‰</p>
</li>
<li>
<p>åˆ›å»ºå‘½ä»¤<code>docker container run &lt;image name&gt;</code>(å®¹å™¨é‡Œé¢æ˜¯å¯¹åº”çš„<code>image name</code>)</p>
</li>
<li>
<p>ä¾‹å­</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># å»ºnginxçš„é•œåƒï¼Œå¹¶è¿è¡Œ</span>
</span></span><span class="line"><span class="cl">docker container run nginx
</span></span><span class="line"><span class="cl"><span class="c1"># å»ºubuntuçš„é•œåƒï¼Œå¹¶è¿è¡Œ</span>
</span></span><span class="line"><span class="cl">docker container run ubuntu
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>Docker Hub</code>ï¼šå®˜æ–¹é•œåƒç¤¾åŒºï¼Œé‡Œé¢æœ‰å¤§é‡åˆ¶ä½œå¥½çš„é•œåƒï¼ˆåˆ›å»ºå®¹å™¨å°±æ˜¯ä¸Šä¸Šé¢å…ˆæ‹‰å–é•œåƒï¼Œç„¶ååˆ¶ä½œæˆé•œåƒè£…åœ¨<code>Docker</code>é‡Œé¢ï¼‰</li>
</ul>
<hr>
<h3 id="æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨">æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">ROG</span><span class="p">&gt;</span> <span class="n">docker</span> <span class="n">container</span> <span class="nb">ls
</span></span></span><span class="line"><span class="cl"><span class="nb"></span><span class="n">CONTAINER</span> <span class="n">ID</span>   <span class="n">IMAGE</span>                 <span class="n">COMMAND</span>       <span class="n">CREATED</span>        <span class="n">STATUS</span>              <span class="n">PORTS</span>     <span class="n">NAMES</span>
</span></span><span class="line"><span class="cl"><span class="n">9ed70676585e</span>   <span class="n">l543306408</span><span class="p">/</span><span class="n">rros_lab</span>   <span class="s2">&#34;/bin/bash&#34;</span>   <span class="n">8</span> <span class="n">hours</span> <span class="n">ago</span>    <span class="n">Up</span> <span class="n">About</span> <span class="n">a</span> <span class="n">minute</span>             <span class="n">rros_lab1</span>
</span></span><span class="line"><span class="cl"><span class="n">a99fc6e9cfe3</span>   <span class="n">l543306408</span><span class="p">/</span><span class="n">rros_lab</span>   <span class="s2">&#34;/bin/bash&#34;</span>   <span class="n">11</span> <span class="n">hours</span> <span class="n">ago</span>   <span class="n">Up</span> <span class="n">5</span> <span class="n">seconds</span>                  <span class="n">rros_lab</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æŸ¥çœ‹æ‰€æœ‰å®¹å™¨">æŸ¥çœ‹æ‰€æœ‰å®¹å™¨</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">ROG</span><span class="p">&gt;</span> <span class="n">docker</span> <span class="n">container</span> <span class="nb">ps </span><span class="n">-a</span>
</span></span><span class="line"><span class="cl"><span class="n">CONTAINER</span> <span class="n">ID</span>   <span class="n">IMAGE</span>                 <span class="n">COMMAND</span>             <span class="n">CREATED</span>        <span class="n">STATUS</span>                         <span class="n">PORTS</span>     <span class="n">NAMES</span>
</span></span><span class="line"><span class="cl"><span class="n">e64ddbdaadc8</span>   <span class="nb">rust-oslab</span><span class="err">:</span><span class="n">latest</span>     <span class="s2">&#34;/bin/sh -c bash&#34;</span>   <span class="n">9</span> <span class="n">hours</span> <span class="n">ago</span>    <span class="n">Exited</span> <span class="p">(</span><span class="n">0</span><span class="p">)</span> <span class="n">About</span> <span class="n">an</span> <span class="n">hour</span> <span class="n">ago</span>             <span class="nb">rust-oslab</span><span class="p">-</span><span class="n">1</span>
</span></span><span class="line"><span class="cl"><span class="n">9ed70676585e</span>   <span class="n">l543306408</span><span class="p">/</span><span class="n">rros_lab</span>   <span class="s2">&#34;/bin/bash&#34;</span>         <span class="n">9</span> <span class="n">hours</span> <span class="n">ago</span>    <span class="n">Exited</span> <span class="p">(</span><span class="n">137</span><span class="p">)</span> <span class="n">43</span> <span class="n">seconds</span> <span class="n">ago</span>              <span class="n">rros_lab1</span>
</span></span><span class="line"><span class="cl"><span class="n">a99fc6e9cfe3</span>   <span class="n">l543306408</span><span class="p">/</span><span class="n">rros_lab</span>   <span class="s2">&#34;/bin/bash&#34;</span>         <span class="n">12</span> <span class="n">hours</span> <span class="n">ago</span>   <span class="n">Exited</span> <span class="p">(</span><span class="n">137</span><span class="p">)</span> <span class="n">42</span> <span class="n">seconds</span> <span class="n">ago</span>              <span class="n">rros_lab</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># ç­‰ä»·å‘½ä»¤</span>
</span></span><span class="line"><span class="cl"><span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">ROG</span><span class="p">&gt;</span> <span class="n">docker</span> <span class="n">container</span> <span class="nb">ls </span><span class="n">-a</span>
</span></span><span class="line"><span class="cl"><span class="n">CONTAINER</span> <span class="n">ID</span>   <span class="n">IMAGE</span>                 <span class="n">COMMAND</span>             <span class="n">CREATED</span>        <span class="n">STATUS</span>                       <span class="n">PORTS</span>     <span class="n">NAMES</span>
</span></span><span class="line"><span class="cl"><span class="n">e64ddbdaadc8</span>   <span class="nb">rust-oslab</span><span class="err">:</span><span class="n">latest</span>     <span class="s2">&#34;/bin/sh -c bash&#34;</span>   <span class="n">9</span> <span class="n">hours</span> <span class="n">ago</span>    <span class="n">Exited</span> <span class="p">(</span><span class="n">0</span><span class="p">)</span> <span class="n">30</span> <span class="n">seconds</span> <span class="n">ago</span>              <span class="nb">rust-oslab</span><span class="p">-</span><span class="n">1</span>
</span></span><span class="line"><span class="cl"><span class="n">9ed70676585e</span>   <span class="n">l543306408</span><span class="p">/</span><span class="n">rros_lab</span>   <span class="s2">&#34;/bin/bash&#34;</span>         <span class="n">10</span> <span class="n">hours</span> <span class="n">ago</span>   <span class="n">Exited</span> <span class="p">(</span><span class="n">137</span><span class="p">)</span> <span class="n">7</span> <span class="n">minutes</span> <span class="n">ago</span>             <span class="n">rros_lab1</span>
</span></span><span class="line"><span class="cl"><span class="n">a99fc6e9cfe3</span>   <span class="n">l543306408</span><span class="p">/</span><span class="n">rros_lab</span>   <span class="s2">&#34;/bin/bash&#34;</span>         <span class="n">12</span> <span class="n">hours</span> <span class="n">ago</span>   <span class="n">Exited</span> <span class="p">(</span><span class="n">137</span><span class="p">)</span> <span class="n">7</span> <span class="n">minutes</span> <span class="n">ago</span>             <span class="n">rros_lab</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å¯åŠ¨å®¹å™¨">å¯åŠ¨å®¹å™¨</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">docker</span> <span class="n">container</span> <span class="n">run</span> <span class="p">&lt;</span><span class="n">image</span> <span class="n">name</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="åœæ­¢æ­£åœ¨è¿è¡Œçš„å®¹å™¨">åœæ­¢æ­£åœ¨è¿è¡Œçš„å®¹å™¨</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">docker</span> <span class="n">container</span> <span class="n">stop</span> <span class="p">&lt;</span><span class="n">id</span><span class="p">&gt;</span> <span class="c"># idå†™å‰ç¼€å°±è¡Œï¼Œä¸€èˆ¬å‰ç¼€ä¸ä¼šå†²çª</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="åˆ é™¤å®¹å™¨">åˆ é™¤å®¹å™¨</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">docker</span> <span class="n">container</span> <span class="nb">rm </span><span class="p">&lt;</span><span class="n">id</span><span class="p">&gt;</span> <span class="c"># idå†™å‰ç¼€å°±è¡Œï¼Œä¸€èˆ¬å‰ç¼€ä¸ä¼šå†²çª</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<ul>
<li>ä¸Šé¢çš„å‘½ä»¤å¯ä»¥çœç•¥<code>container</code>ä¸è¿‡ä¸ºäº†å¼ºè°ƒ<code>container</code>å¹³æ—¶ä¸åšåˆ é™¤ï¼ˆä¸<code>image</code>åŒºåˆ†ï¼‰</li>
</ul>
<hr>
<h3 id="å¤šå®¹å™¨æ“ä½œ">å¤šå®¹å™¨æ“ä½œ</h3>
<ul>
<li>ä¸€æ¬¡åœæ‰å¤šä¸ªå®¹å™¨çš„æ€è·¯
<ul>
<li>æŸ¥çœ‹æ‰€æœ‰å®¹å™¨çš„<code>id</code></li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">ROG</span><span class="p">&gt;</span> <span class="n">docker</span> <span class="n">container</span> <span class="nb">ps </span><span class="n">-a</span> <span class="n">-q</span>
</span></span><span class="line"><span class="cl"><span class="n">660040021c4d</span>
</span></span><span class="line"><span class="cl"><span class="n">9ed70676585e</span>
</span></span><span class="line"><span class="cl"><span class="n">a99fc6e9cfe3</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ç„¶ååˆ©ç”¨æŒ‡ä»¤ç»„åˆ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">ROG</span><span class="p">&gt;</span> <span class="n">docker</span> <span class="n">container</span> <span class="n">stop</span> <span class="p">$(</span><span class="n">docker</span> <span class="n">container</span> <span class="nb">ps </span><span class="n">-a</span> <span class="n">-q</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">660040021c4d</span>
</span></span><span class="line"><span class="cl"><span class="n">9ed70676585e</span>
</span></span><span class="line"><span class="cl"><span class="n">a99fc6e9cfe3</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p><b>å‘½ä»¤ç»„åˆçš„æ€è·¯å¯ä»¥ç”¨åˆ°å¾ˆå¤š<code>docker</code>éœ€è¦æ‰¹é‡å¤„ç†çš„æƒ…å†µä¸‹</b></p>
</li>
<li>
<p><b>åˆ é™¤æ­£åœ¨è¿è¡Œçš„å®¹å™¨ä¼šæŠ¥é”™ï¼</b></p>
<ul>
<li>å¼ºåˆ¶åˆ é™¤ï¼š<code>docker container rm &lt;id&gt; -f</code></li>
</ul>
</li>
</ul>
<h2 id="ç«¯å£æ˜ å°„ä¸ä¸»è¢«åŠ¨æ¨¡å¼">ç«¯å£æ˜ å°„ä¸ä¸»/è¢«åŠ¨æ¨¡å¼</h2>
<h3 id="ç«¯å£æ˜ å°„">ç«¯å£æ˜ å°„</h3>
<ul>
<li>ç›®çš„ï¼šè®©å®¹å™¨èƒ½è¿‡åœ¨å¤–ç½‘è®¿é—®åˆ°</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">docker</span> <span class="n">container</span> <span class="n">run</span> <span class="n">-p</span> <span class="p">&lt;</span><span class="s2">&#34;æœåŠ¡å™¨çš„ç«¯å£&#34;</span><span class="p">&gt;</span><span class="err">:</span><span class="p">&lt;</span><span class="s2">&#34;å®¹å™¨çš„ç«¯å£&#34;</span><span class="p">&gt;</span> <span class="n">nginx</span>
</span></span><span class="line"><span class="cl"><span class="n">docker</span> <span class="n">container</span> <span class="n">run</span> <span class="n">-p</span> <span class="n">80</span><span class="err">:</span><span class="n">80</span> <span class="n">nginx</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æ£€æµ‹æ˜¯å¦å¯åŠ¨
<ul>
<li>æµè§ˆå™¨ä¸­è®¿é—®<code>127.0.0.1:80</code></li>
</ul>
</li>
</ul>
<hr>
<h3 id="ä¸»åŠ¨æ¨¡å¼é»˜è®¤">ä¸»åŠ¨æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰</h3>
<ul>
<li>
<p>ç›¸å½“äºå‘½ä»¤è¡Œé‡Œé¢çš„å­è¿›ç¨‹ï¼Œä¼šæ‰“å°æ—¥å¿—ä¿¡æ¯</p>
</li>
<li>
<p>å®¹æ˜“è¢«è¯¯æ“ä½œåœæ‰ï¼ˆå…³æ‰å‘½ä»¤è¡Œæˆ–è€…ä¸å°å¿ƒ<code>Ctrl + c</code>ï¼‰</p>
</li>
<li>
<p>è°ƒè¯•æ—¶ä½¿ç”¨</p>
</li>
</ul>
<h3 id="è¢«åŠ¨æ¨¡å¼åå°è¿è¡Œ">è¢«åŠ¨æ¨¡å¼ï¼ˆåå°è¿è¡Œï¼‰</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">docker</span> <span class="n">container</span> <span class="n">run</span> <span class="n">-d</span> <span class="n">-p</span> <span class="n">80</span><span class="err">:</span><span class="n">80</span> <span class="n">nginx</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>ä¸å†æ‰“å°æ—¥å¿—</p>
</li>
<li>
<p>ä¸ä¼šå› ä¸ºå…³æ‰å‘½ä»¤è¡Œè€Œç»ˆæ­¢</p>
</li>
<li>
<p>ä½¿ç”¨<code>docker container ls</code>å°±èƒ½æŸ¥çœ‹åˆ°</p>
</li>
</ul>
<h3 id="è½¬æ¢æˆä¸»åŠ¨æ¨¡å¼">è½¬æ¢æˆä¸»åŠ¨æ¨¡å¼</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">docker</span> <span class="n">attach</span> <span class="p">&lt;</span><span class="n">id</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="detachedæ¨¡å¼ä¸‹æŸ¥çœ‹æ—¥å¿—çš„æ–¹æ³•"><code>detached</code>æ¨¡å¼ä¸‹æŸ¥çœ‹æ—¥å¿—çš„æ–¹æ³•</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">docker</span> <span class="n">container</span> <span class="n">run</span> <span class="n">-d</span> <span class="n">-p</span> <span class="n">80</span><span class="err">:</span><span class="n">80</span> <span class="n">nginx</span>
</span></span><span class="line"><span class="cl"><span class="n">docker</span> <span class="n">container</span> <span class="n">logs</span> <span class="p">&lt;</span><span class="n">id</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c"># idå†™é•œåƒåå­—ä¹Ÿè¡Œ</span>
</span></span><span class="line"><span class="cl"><span class="n">docker</span> <span class="n">container</span> <span class="n">logs</span> <span class="p">&lt;</span><span class="n">image</span> <span class="n">name</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>è·Ÿè¸ªæ—¥å¿—ï¼ˆå˜æˆç»ˆç«¯çš„å­è¿›ç¨‹ï¼Œä¸ä¼šè‡ªåŠ¨åœæ­¢ï¼Œ<code>Ctrl + C</code>ç»ˆæ­¢ï¼‰</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">docker</span> <span class="n">container</span> <span class="n">logs</span> <span class="o">-f</span> <span class="p">&lt;</span><span class="n">id</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="äº¤äº’æ¨¡å¼">äº¤äº’æ¨¡å¼</h2>
<ul>
<li>å…ˆå¯åŠ¨å®¹å™¨</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">ROG</span><span class="p">&gt;</span> <span class="n">docker</span> <span class="n">container</span> <span class="nb">ls
</span></span></span><span class="line"><span class="cl"><span class="nb"></span><span class="n">CONTAINER</span> <span class="n">ID</span>   <span class="n">IMAGE</span>     <span class="n">COMMAND</span>   <span class="n">CREATED</span>   <span class="n">STATUS</span>    <span class="n">PORTS</span>     <span class="n">NAMES</span>
</span></span><span class="line"><span class="cl"><span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">ROG</span><span class="p">&gt;</span> <span class="n">docker</span> <span class="n">container</span> <span class="nb">start </span><span class="n">rros_lab1</span>
</span></span><span class="line"><span class="cl"><span class="n">rros_lab1</span>
</span></span><span class="line"><span class="cl"><span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">ROG</span><span class="p">&gt;</span> <span class="n">docker</span> <span class="n">container</span> <span class="nb">ls
</span></span></span><span class="line"><span class="cl"><span class="nb"></span><span class="n">CONTAINER</span> <span class="n">ID</span>   <span class="n">IMAGE</span>                 <span class="n">COMMAND</span>       <span class="n">CREATED</span>        <span class="n">STATUS</span>         <span class="n">PORTS</span>     <span class="n">NAMES</span>
</span></span><span class="line"><span class="cl"><span class="n">9ed70676585e</span>   <span class="n">l543306408</span><span class="p">/</span><span class="n">rros_lab</span>   <span class="s2">&#34;/bin/bash&#34;</span>   <span class="n">21</span> <span class="n">hours</span> <span class="n">ago</span>   <span class="n">Up</span> <span class="n">3</span> <span class="n">seconds</span>             <span class="n">rros_lab1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>è¿›å…¥å®¹å™¨ç»ˆç«¯</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker attach &lt;container name&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><figure><a class="lightgallery" href="/img/Learning%20Docker/docker%20attach.png" title="/img/Learning Docker/docker attach.png" data-thumbnail="/img/Learning Docker/docker attach.png" data-sub-html="<h2>``</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/Learning%20Docker/docker%20attach.png"
            data-srcset="/img/Learning%20Docker/docker%20attach.png, /img/Learning%20Docker/docker%20attach.png 1.5x, /img/Learning%20Docker/docker%20attach.png 2x"
            data-sizes="auto"
            alt="/img/Learning Docker/docker attach.png" />
    </a><figcaption class="image-caption">``</figcaption>
    </figure>
<ul>
<li><code>exit</code>é€€å‡ºåå®¹å™¨ä¹Ÿä¼šå…³é—­</li>
</ul>
<hr>
<h3 id="å¦‚ä½•exitåä¸å…³é—­å®¹å™¨">å¦‚ä½•<code>exit</code>åä¸å…³é—­å®¹å™¨</h3>
<ul>
<li>ä½¿ç”¨<code>detached</code>æ¨¡å¼</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker <span class="nb">exec</span> -it &lt;container name&gt; &lt;shell&gt;ï¼ˆé€šå¸¸ç”¨shæˆ–è€…bashï¼‰
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">ROG</span><span class="p">&gt;</span> <span class="n">docker</span> <span class="n">container</span> <span class="nb">ls
</span></span></span><span class="line"><span class="cl"><span class="nb"></span><span class="n">CONTAINER</span> <span class="n">ID</span>   <span class="n">IMAGE</span>                 <span class="n">COMMAND</span>       <span class="n">CREATED</span>        <span class="n">STATUS</span>          <span class="n">PORTS</span>     <span class="n">NAMES</span>
</span></span><span class="line"><span class="cl"><span class="n">9ed70676585e</span>   <span class="n">l543306408</span><span class="p">/</span><span class="n">rros_lab</span>   <span class="s2">&#34;/bin/bash&#34;</span>   <span class="n">22</span> <span class="n">hours</span> <span class="n">ago</span>   <span class="n">Up</span> <span class="n">52</span> <span class="n">seconds</span>             <span class="n">rros_lab1</span>
</span></span><span class="line"><span class="cl"><span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">ROG</span><span class="p">&gt;</span> <span class="n">docker</span> <span class="n">exec</span> <span class="n">-it</span> <span class="n">rros_lab1</span> <span class="n">bash</span>
</span></span><span class="line"><span class="cl"><span class="n">root</span><span class="nv">@9ed70676585e</span><span class="err">:</span><span class="p">/</span><span class="n">data</span><span class="p">/</span><span class="nb">bupt-rtos</span><span class="c"># ls</span>
</span></span><span class="line"><span class="cl"><span class="n">20210704_ojeda_rust_support</span><span class="p">.</span><span class="n">mbx</span>  <span class="n">arm64_ramdisk</span>  <span class="n">rros</span>
</span></span><span class="line"><span class="cl"><span class="n">root</span><span class="nv">@9ed70676585e</span><span class="err">:</span><span class="p">/</span><span class="n">data</span><span class="p">/</span><span class="nb">bupt-rtos</span><span class="c"># exit</span>
</span></span><span class="line"><span class="cl"><span class="n">exit</span>
</span></span><span class="line"><span class="cl"><span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">ROG</span><span class="p">&gt;</span> <span class="n">docker</span> <span class="n">container</span> <span class="nb">ls
</span></span></span><span class="line"><span class="cl"><span class="nb"></span><span class="n">CONTAINER</span> <span class="n">ID</span>   <span class="n">IMAGE</span>                 <span class="n">COMMAND</span>       <span class="n">CREATED</span>        <span class="n">STATUS</span>              <span class="n">PORTS</span>     <span class="n">NAMES</span>
</span></span><span class="line"><span class="cl"><span class="n">9ed70676585e</span>   <span class="n">l543306408</span><span class="p">/</span><span class="n">rros_lab</span>   <span class="s2">&#34;/bin/bash&#34;</span>   <span class="n">22</span> <span class="n">hours</span> <span class="n">ago</span>   <span class="n">Up</span> <span class="n">About</span> <span class="n">a</span> <span class="n">minute</span>             <span class="n">rros_lab1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="é•œåƒè·å–image-registry">é•œåƒè·å–/<code>Image Registry</code></h2>
<h3 id="è·å–é•œåƒçš„ä¸‰ä¸ªé€”å¾„">è·å–é•œåƒçš„ä¸‰ä¸ªé€”å¾„</h3>
<ul>
<li>
<p><code>pull from registry</code></p>
<ul>
<li>å¸¸è§<code>registry</code>ï¼š<a href="https://hub.docker.com" target="_blank" rel="noopener noreffer">Docker Hub</a>ï¼Œ<a href="https://quay.io" target="_blank" rel="noopener noreffer">quay.io</a></li>
</ul>
</li>
<li>
<p><code>Dockerfile (online)</code></p>
</li>
<li>
<p>è‡ªæœ‰æ–‡ä»¶å¯¼å…¥<code>(offline)</code></p>
</li>
<li>
<p>ä½¿ç”¨å®˜æ–¹è®¤è¯çš„é•œåƒï¼šå®‰å…¨</p>
</li>
</ul>
<hr>
<h3 id="é•œåƒçš„æ‹‰å–å’Œåˆ é™¤">é•œåƒçš„æ‹‰å–å’Œåˆ é™¤</h3>
<ul>
<li>æ‹‰å–ï¼šå®˜ç½‘æ‰¾å‘½ä»¤</li>
</ul>
<figure><a class="lightgallery" href="/img/Learning%20Docker/docker%20pull.png" title="/img/Learning Docker/docker pull.png" data-thumbnail="/img/Learning Docker/docker pull.png" data-sub-html="<h2>``</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/Learning%20Docker/docker%20pull.png"
            data-srcset="/img/Learning%20Docker/docker%20pull.png, /img/Learning%20Docker/docker%20pull.png 1.5x, /img/Learning%20Docker/docker%20pull.png 2x"
            data-sizes="auto"
            alt="/img/Learning Docker/docker pull.png" />
    </a><figcaption class="image-caption">``</figcaption>
    </figure>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker pull wordpress
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æ–°ç‰ˆæœ¬å¯ä»¥åŠ ä¸Š<code>image</code>å‰ç¼€ï¼ˆå¼ºè°ƒï¼Œå’Œ<code>container</code>ä½œåŒºåˆ†ï¼‰</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker image pull wordpress
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å®é™…æ•ˆæœï¼ˆé»˜è®¤æœ€æ–°ç‰ˆï¼Œå¦‚æœè¦å…¶ä»–ç‰ˆæœ¬å»<code>tag</code>é‡Œé¢æ‰¾å¯¹åº”ç‰ˆæœ¬çš„å‘½ä»¤ï¼‰</li>
</ul>
<figure><a class="lightgallery" href="/img/Learning%20Docker/docker%20pull%20busybox.png" title="/img/Learning Docker/docker pull busybox.png" data-thumbnail="/img/Learning Docker/docker pull busybox.png" data-sub-html="<h2>``</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/Learning%20Docker/docker%20pull%20busybox.png"
            data-srcset="/img/Learning%20Docker/docker%20pull%20busybox.png, /img/Learning%20Docker/docker%20pull%20busybox.png 1.5x, /img/Learning%20Docker/docker%20pull%20busybox.png 2x"
            data-sizes="auto"
            alt="/img/Learning Docker/docker pull busybox.png" />
    </a><figcaption class="image-caption">``</figcaption>
    </figure>
<h3 id="æŸ¥çœ‹ç°æœ‰é•œåƒ">æŸ¥çœ‹ç°æœ‰é•œåƒ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker image ls
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æŸ¥çœ‹é•œåƒè¯¦ç»†ä¿¡æ¯">æŸ¥çœ‹é•œåƒè¯¦ç»†ä¿¡æ¯</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker image inspect &lt;image id&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å…³æ³¨å¯¹åº”çš„<code>OS</code>å’Œæ¶æ„</li>
</ul>
<hr>
<h3 id="åˆ é™¤é•œåƒ">åˆ é™¤é•œåƒ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker image rm &lt;id&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="imageçš„å¯¼å…¥å¯¼å‡º"><code>image</code>çš„å¯¼å…¥/å¯¼å‡º</h3>
<ul>
<li>
<p><code>image</code>å¯¼å‡º</p>
</li>
<li>
<p>åœ¨è¦ä¿å­˜çš„ä½ç½®æ‰§è¡Œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">docker</span> <span class="n">image</span> <span class="n">save</span> <span class="p">&lt;</span><span class="n">image</span> <span class="n">name</span><span class="p">&gt;</span><span class="err">:</span><span class="p">&lt;</span><span class="n">tag</span><span class="p">&gt;</span> <span class="n">-o</span> <span class="p">&lt;</span><span class="n">new</span> <span class="n">image</span> <span class="n">name</span><span class="p">&gt;.</span><span class="n">image</span>
</span></span><span class="line"><span class="cl"><span class="c"># example</span>
</span></span><span class="line"><span class="cl"><span class="n">docker</span> <span class="n">image</span> <span class="n">save</span> <span class="n">busybox</span><span class="err">:</span><span class="n">latest</span> <span class="n">-o</span> <span class="n">mybusybox</span><span class="p">.</span><span class="n">image</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><code>image</code>å¯¼å…¥</p>
</li>
<li>
<p>ä¹Ÿæ˜¯åœ¨å¯¹åº”é•œåƒçš„ä½ç½®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">docker</span> <span class="n">image</span> <span class="n">load</span> <span class="n">-i</span> <span class="p">&lt;</span><span class="n">load</span> <span class="n">image</span> <span class="n">name</span><span class="p">&gt;.</span><span class="n">image</span>
</span></span><span class="line"><span class="cl"><span class="c"># ä¾‹å­</span>
</span></span><span class="line"><span class="cl"><span class="n">docker</span> <span class="n">image</span> <span class="n">load</span> <span class="n">-i</span> <span class="p">.\</span><span class="n">mybusybox</span><span class="p">.</span><span class="n">image</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h2 id="dockerfile"><code>Dockerfile</code></h2>
<ul>
<li><code>Dockerfile</code>ï¼šä½¿ç”¨ç»„åˆæ˜ åƒå‘½ä»¤çš„æ–‡æœ¬æ–‡æ¡£ï¼Œç”¨äº<code>DIY</code>è‡ªå·±çš„<code>image</code></li>
</ul>
<hr>
<ul>
<li>ä¾‹å­<code>ubuntu</code>æ‰§è¡Œ<code>python</code>ç¨‹åº</li>
<li><code>hello.py</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Hello, my first docker!&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>Dockerfile</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">FROM</span><span class="s"> ubuntu:latest</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span>  apt-get update <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span>noninteractive apt-get install --no-install-recommends -y python3.9 python3-pip python3.9-dev<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">ADD</span> hello.py /<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;python3&#34;</span><span class="p">,</span><span class="s2">&#34;hello.py&#34;</span><span class="p">]</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p><code>FROM</code>ï¼šå¼•å…¥ç³»ç»Ÿ</p>
</li>
<li>
<p><code>RUN</code>ï¼šå®‰è£…ç¯å¢ƒï¼ˆ<code>build</code>çš„æ—¶å€™æ‰§è¡Œï¼‰</p>
</li>
<li>
<p><code>ADD</code>ï¼šå°†æœ¬æœºæ–‡ä»¶åŠ å…¥åˆ°<code>image</code>ä¸­ï¼Œé»˜è®¤åŠ å…¥åˆ°<code>image</code>çš„æ ¹ç›®å½•</p>
</li>
<li>
<p><code>CMD</code>ï¼šç›¸å½“äºä½¿ç”¨<code>shell</code>å‘½ä»¤(<code>build</code>åæ‰§è¡Œ)</p>
</li>
</ul>
<hr>
<h3 id="æ„å»ºdockerfile">æ„å»º<code>Dockerfile</code></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker image build -t &lt;image name&gt;:&lt;tag<span class="o">(</span>è‹¥å¿½ç•¥åˆ™é»˜è®¤latest<span class="o">)</span>&gt; &lt;image path<span class="o">(</span>é€šå¸¸ç”¨<span class="s2">&#34;.&#34;</span>ï¼Œæœ¬åœ°ç›®å½•<span class="o">)</span>&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<ul>
<li>
<p>å°†é•œåƒä¸Šä¼ åˆ°<code>Docker Hub</code>ä¸Šé¢</p>
<ul>
<li>è§„åˆ™ï¼š<code>&lt;Hub name&gt;/&lt;image name&gt;</code></li>
</ul>
</li>
<li>
<p>æ›´æ”¹åå­—ä½¿å…¶èƒ½å¤Ÿä¸Šä¼ </p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker image tag &lt;old name&gt; &lt;new name&gt;
</span></span><span class="line"><span class="cl"><span class="c1"># example</span>
</span></span><span class="line"><span class="cl">docker image tag myimage username/myimage
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>é€šè¿‡<code>id/name</code>ä¸Šä¼ </li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker login <span class="c1"># è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ç™»å½•</span>
</span></span><span class="line"><span class="cl">docker image push username/myimage
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h4 id="fromè¯­æ³•"><code>FROM</code>è¯­æ³•</h4>
<ul>
<li>
<p>å¼•å…¥åŸºç¡€é•œåƒ</p>
</li>
<li>
<p>ä¸‰ä¸ªåŸºæœ¬åŸåˆ™</p>
<ul>
<li>
<p>å®˜æ–¹é•œåƒä¼˜äºéå®˜æ–¹é•œåƒï¼ˆå®‰å…¨æ€§ï¼‰</p>
</li>
<li>
<p>å›ºå®šç‰ˆæœ¬çš„<code>Tag</code>ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½ä½¿ç”¨<code>latest</code>ï¼ˆç¨³å®šï¼‰</p>
</li>
<li>
<p>åŠŸèƒ½æ»¡è¶³çš„æƒ…å†µä¸‹ä½¿ç”¨ä½“ç§¯å°çš„é•œåƒï¼ˆè®©è‡ªå·±çš„é•œåƒå˜å¾—ç®€æ´ï¼‰</p>
</li>
</ul>
</li>
</ul>
<hr>
<h4 id="runå‘½ä»¤"><code>RUN</code>å‘½ä»¤</h4>
<ul>
<li>
<p>æ¥<code>shell</code>å‘½ä»¤</p>
</li>
<li>
<p>å‘</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">FROM</span><span class="s"> ubuntu:latest</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get update<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get install -y wget<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> wget https://github.com/ipinfo/cli/releases/download/ipinfo-2.0.1/ipinfo_2.0.1_linux_amd64.tar.gz<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> tar zxf ipinfo_2.0.1_linux_amd64.tar.gz<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> mv ipinfo_2.0.1_linux_amd64 /usr/bin/ipinfo<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> rm -rf ipinfo_2.0.1_linux_amd64.tar.gz<span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>ä¸å»ºè®®è¿™ä¹ˆå†™ï¼šæ¯ä¸ª<code>RUN</code>éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„â€œå±‚â€ï¼Œæ‰“åŒ…çš„ä½“ç§¯ä¼šå˜å¤§</p>
<ul>
<li><code>rm -rf</code>çš„å‘½ä»¤ä¹Ÿä¼šæ— æ•ˆï¼šä¸Šé¢çš„æ–‡ä»¶å·²ç»åµŒå…¥åˆ°ä¸Šä¸€å±‚é‡Œé¢äº†</li>
</ul>
</li>
<li>
<p>æ­£ç¡®å†™æ³•ï¼šæ”¹æˆ<code>&amp;&amp; \</code>çš„ç»„åˆ</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">FROM</span><span class="s"> ubuntu:latest</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    apt-get install -y wget <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    wget https://github.com/ipinfo/cli/releases/download/ipinfo-2.0.1/ipinfo_2.0.1_linux_amd64.tar.gz <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tar zxf ipinfo_2.0.1_linux_amd64.tar.gz <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    mv ipinfo_2.0.1_linux_amd64 /usr/bin/ipinfo <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    rm -rf ipinfo_2.0.1_linux_amd64.tar.gz<span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å˜æˆäº†åªæœ‰ä¸€å±‚ï¼Œä½“ç§¯ä¼šå˜å°</li>
</ul>
<hr>
<h4 id="æ–‡ä»¶æ“ä½œ">æ–‡ä»¶æ“ä½œ</h4>
<ul>
<li>
<p><code>COPY</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">COPY</span> index.js /app/index.js<span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å°†å½“å‰ç›®å½•ä¸‹çš„<code>index.js</code>æ–‡ä»¶æ‹·è´åˆ°é•œåƒä¸­çš„<code>/app/index.js</code>ï¼ˆé•œåƒä¸­æ²¡æœ‰å¯¹åº”æ–‡ä»¶ä¼šè‡ªåŠ¨åˆ›å»ºï¼‰</li>
</ul>
</li>
<li>
<p><code>ADD</code></p>
<ul>
<li>åŸºæœ¬æ•ˆæœå’Œ<code>COPY</code>ç›¸åŒï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨è§£å‹ç¼©</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">ADD</span> index.tar /app/<span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>è¿è¡Œåä¼šå‘ç°å®¹å™¨<code>/app/</code>æ–‡ä»¶å¤¹é‡Œé¢å°±æ˜¯<code>index.tar</code>é‡Œé¢è¢«å‹ç¼©æ–‡ä»¶çš„å†…å®¹</li>
</ul>
</li>
<li>
<p><code>WORKDIR</code></p>
<ul>
<li>åˆ‡æ¢ç›®å½•</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">FROM</span><span class="s"> ubuntu:20.04</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">WORKDIR</span><span class="s"> /app</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> hello.py hello.py<span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å’Œä¸Šé¢æ•ˆæœç›¸åŒï¼Œæœ€åæ–‡ä»¶éƒ½åœ¨<code>/app</code>è¿™ä¸ªç›®å½•ä¸‹</li>
<li>ç›¸å½“äº<code>cd</code></li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p>å˜é‡å£°æ˜ï¼ˆç±»ä¼¼å®å®šä¹‰ï¼Œä½¿å¾—ä»£ç æ›´ç®€ä»‹ï¼‰</p>
</li>
<li>
<p>ä¾‹å­</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">FROM</span><span class="s"> ubuntu:latest</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    apt-get install -y wget <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    wget https://github.com/ipinfo/cli/releases/download/ipinfo-2.0.1/ipinfo_2.0.1_linux_amd64.tar.gz <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tar zxf ipinfo_2.0.1_linux_amd64.tar.gz <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    mv ipinfo_2.0.1_linux_amd64 /usr/bin/ipinfo <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    rm -rf ipinfo_2.0.1_linux_amd64.tar.gz<span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="env"><code>ENV</code></h4>
<ul>
<li><code>ENV key=value</code>ï¼ˆä¸­é—´ä¸è¦åŠ ç©ºæ ¼ï¼Œæœ‰å‘ï¼‰</li>
<li>ä½¿ç”¨<code>value</code>ï¼š<code>${key}$</code></li>
<li>æ•ˆæœ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">FROM</span><span class="s"> ubuntu:latest</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">ENV</span> <span class="nv">VERSION</span><span class="o">=</span><span class="m">2</span>.0.1<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    apt-get install -y wget <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    wget https://github.com/ipinfo/cli/releases/download/ipinfo-<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>/ipinfo_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>_linux_amd64.tar.gz <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tar zxf ipinfo_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>_linux_amd64.tar.gz <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    mv ipinfo_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>_linux_amd64 /usr/bin/ipinfo <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    rm -rf ipinfo_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>_linux_amd64.tar.gz<span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="arg"><code>ARG</code></h4>
<ul>
<li>è¯­æ³•å’Œ<code>ENV</code>ä¸€æ ·
<ul>
<li>å’Œ<code>ENV</code>ä¸åŒçš„åœ°æ–¹
<ul>
<li><b><code>ENV</code>å£°æ˜çš„å˜é‡ä¼šå¸¦å…¥é•œåƒå†…éƒ¨</b>ï¼ˆæ¯”å¦‚<code>Linux</code>çš„<code>env</code>å‘½ä»¤ï¼Œæˆ–è€…ç›´æ¥<code>echo $key</code>ä¹Ÿèƒ½æ‰“å‡ºæ¥ï¼‰ï¼Œè€Œ<code>ARG</code>ä¸ä¼š</li>
<li><code>ARG</code>å¯ä»¥åŠ¨æ€æ·»åŠ </li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker image build -f Dockfile -t &lt;image&gt;:&lt;tag&gt; --build-arg <span class="nv">VERSION</span><span class="o">=</span>2.0.0 .
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h4 id="cmd"><code>CMD</code></h4>
<ul>
<li>
<p>ä¸‰ä¸ªåŸºæœ¬åŸåˆ™</p>
<ul>
<li>å®¹å™¨å¯åŠ¨æ—¶é»˜è®¤æ‰§è¡Œçš„å‘½ä»¤
<ul>
<li>å¦‚æœæ²¡æœ‰ï¼Œå¯¹åº”æ‹‰å–çš„å®˜æ–¹é•œåƒä¼šæœ‰é»˜è®¤çš„<code>CMD</code>ï¼Œæ¯”å¦‚<code>ubuntu</code>ä¼šè‡ªå¸¦<code>CMD[&quot;bash&quot;]</code></li>
</ul>
</li>
<li>å¦‚æœå¯åŠ¨å®¹å™¨æ‰€ç”¨çš„å‘½ä»¤æ˜¯<code>docker container run {commandline}</code>
<ul>
<li>æ¯”å¦‚<code>docker container run -it &lt;image name&gt; &lt;command&gt; =&gt; docker container run -it ipinfo-base ipinfo version</code>ï¼šå¯¹äºå®¹å™¨<code>ipinfo-base</code>å®¹å™¨çš„é»˜è®¤<code>CMD</code>å°±æ˜¯<code>ipinfo version</code></li>
</ul>
</li>
<li>ä¸€ä¸ª<code>Dockerfile</code>å®šä¹‰äº†å¤šä¸ª<code>CMD</code>å‘½ä»¤ï¼Œåªä¼šæ‰§è¡Œæœ€åä¸€ä¸ª</li>
</ul>
</li>
<li>
<p>ä¸¤ç§å†™æ³•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">CMD</span> <span class="p">[</span> <span class="s2">&#34;python3&#34;</span><span class="p">,</span><span class="s2">&#34;hello.py&#34;</span> <span class="p">]</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> python3 hello.py<span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>æ¸…é™¤<b>ä¸å†ä½¿ç”¨</b>çš„å®¹å™¨</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker system prune -f
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æ¸…é™¤<b>ä¸å†ä½¿ç”¨</b>çš„é•œåƒ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker image prune -a
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="entrypoint"><code>ENTRYPOINT</code></h4>
<ul>
<li>
<p>å’Œ<code>CMD</code>åŠŸèƒ½ç›¸ä¼¼</p>
</li>
<li>
<p>åŒºåˆ«</p>
<ul>
<li><code>CMD</code>ä¼šè¢«å‘½ä»¤è¡Œå¯åŠ¨æ¨¡å¼åé¢æ¥çš„å‘½ä»¤è¦†ç›–æ‰ï¼Œè€Œ<code>ENTRYPOINT</code>ä¸ä¼šï¼Œ<b>ä¸€å®šä¼šè¢«æ‰§è¡Œ</b></li>
<li><code>CMD</code>å’Œ<code>ENTRYPOINT</code>å¯ä»¥è”åˆä½¿ç”¨</li>
</ul>
</li>
<li>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">FROM</span><span class="s"> ubuntu:21.04</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">ENTRYPOINT</span> <span class="p">[</span><span class="s2">&#34;echo&#34;</span><span class="p">]</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[]</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å‘½ä»¤è¡Œ<code>docker container run -rm -it demo-both &quot;hello world&quot;</code>æ‰§è¡Œæ•ˆæœ<code>=&gt; hello world</code></li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>æ•°æ®æŒä¹…åŒ–ï¼š<code>VOLUME</code>
<ul>
<li>æ•°æ®åº“ï¼Œæ—¥å¿—ç­‰å¦‚ä½•å­˜åˆ°æœ¬åœ°ï¼Ÿ</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">FROM</span><span class="s"> ubuntu:latest</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">ARG</span> <span class="nv">VERSION</span><span class="o">=</span><span class="m">2</span>.0.1<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    apt-get install -y wget <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    wget https://github.com/ipinfo/cli/releases/download/ipinfo-<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>/ipinfo_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>_linux_amd64.tar.gz <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    tar zxf ipinfo_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>_linux_amd64.tar.gz <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    mv ipinfo_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>_linux_amd64 /usr/bin/ipinfo <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    rm -rf ipinfo_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>_linux_amd64.tar.gz<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">VOLUME</span> <span class="p">[</span> <span class="s2">&#34;/data&#34;</span> <span class="p">]</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>ä¿ç•™é•œåƒä¸‹é¢çš„<code>/data</code>ç›®å½•ï¼Œæ²¡æœ‰ä¼šè‡ªåŠ¨åˆ›å»º</p>
</li>
<li>
<p>ä¿å­˜åœ¨æœ¬åœ°çš„æŒä¹…åŒ–æ•°æ®ä½¿ç”¨<code>docker volume</code>ç³»åˆ—çš„å‘½ä»¤æŸ¥çœ‹</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker volume ls
</span></span><span class="line"><span class="cl"><span class="c1"># -----</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -----</span>
</span></span><span class="line"><span class="cl">docker volume inspect &lt;VOLUME NAME&gt;<span class="o">(</span>æ³¨æ„ä¸èƒ½ç®€å†™<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>Mountpoint</code>å°±æ˜¯æœ¬åœ°å­˜å‚¨çš„ä½ç½®</li>
</ul>
<hr>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker container run -d -v &lt;VOLUME NAME&gt;/&lt;VOLUME PATH IN DOCKERFILE&gt; &lt;container name&gt;
</span></span><span class="line"><span class="cl">docker volume inspect &lt;container name&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>è¿™ä¸ªæ—¶å€™<code>VOLUME NAME</code>å’Œ<code>Mountpoint</code>å°±æ˜¯ä½ è‡ªå·±åˆšæ‰æŒ‡å®šçš„åå­—äº†ï¼Œä¸ä¼šæ˜¯ä¸€ä¸²å¤§æ®µçš„åŠ å¯†ç äº†</li>
<li>è¿™ä¸ªæ—¢å¯ä»¥è®©å®¹å™¨çš„æ•°æ®ä¿å­˜çš„ä¸»æœºï¼Œåè¿‡æ¥ï¼Œå¦‚æœä¸»æœºå¯¹åº”çš„ç›®å½•ä¸‹é¢æœ‰æ–‡ä»¶ï¼Œå†æ¬¡è¿è¡Œæ–°çš„å®¹å™¨çš„æ—¶å€™ï¼Œè¯¥å®¹å™¨å¯ä»¥å¤ç”¨ä¸»æœºå¯¹åº”éƒ¨åˆ†çš„æ•°æ®</li>
</ul>
<hr>
<ul>
<li><code>Bind Mount</code>è‡ªå®šä¹‰
<ul>
<li><code>Windows</code>å®ç°æ•°æ®æŒä¹…åŒ–</li>
<li>ç”¨å®¹å™¨è¿è¡Œæœ¬æœºçš„ç¨‹åºï¼Œæœ¬æœºæ— éœ€å†éœ€è¦å®‰è£…ç¯å¢ƒ</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker container run -it -v <span class="si">${</span><span class="nv">pwd</span><span class="si">}</span>:/app node sh
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æœ¬æœºä¿®æ”¹æ•°æ®çš„æ—¶å€™ä¼šåŒæ­¥åˆ°å®¹å™¨ä¸­ï¼Œç›¸å½“äºå®Œå…¨ç»‘å®š</li>
</ul>
<hr>
<ul>
<li>ç½‘ç»œç«¯å£æ˜ å°„</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker container run -d -p 80:80 &lt;container name&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p><code>-p &lt;ä¸»æœºç«¯å£&gt;:&lt;å®¹å™¨ç«¯å£&gt;</code>ï¼šæ˜ å°„</p>
</li>
<li>
<p>æŸ¥çœ‹å®¹å™¨çš„ç«¯å£</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker container inspect --format <span class="s1">&#39;{{.Config.ExposedPorts}}&#39;</span> &lt;container id&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ä¸»è¦å…³æ³¨<code>Config.ExposedPorts</code>ä¸‹é¢çš„å†…å®¹</li>
</ul>
<h2 id="docker-compose"><code>Docker-compose</code></h2>
<ul>
<li>
<p>ç›¸å½“äº<code>shell</code>è„šæœ¬ï¼Œé›†æˆäº†å‘½ä»¤</p>
</li>
<li>
<p>ä¸¤ä¸ªéƒ¨åˆ†</p>
<ul>
<li>é…ç½®<code>yml</code>æ–‡ä»¶</li>
<li>è¿è¡Œæ–‡ä»¶çš„å‘½ä»¤</li>
</ul>
</li>
<li>
<p>æ£€æµ‹ç¯å¢ƒ</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker-compose --version
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="ymlæ–‡ä»¶çš„åŸºæœ¬è¯­æ³•"><code>yml</code>æ–‡ä»¶çš„åŸºæœ¬è¯­æ³•</h3>
<ul>
<li><code>docker-compose.yml</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;3.8&#34;</span><span class="w"> </span><span class="c"># docker-composeçš„ç‰ˆæœ¬å·</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># å®¹å™¨</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">servicename</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># æœåŠ¡åå­—ï¼Œè¿™ä¸ªåå­—ä¹Ÿæ˜¯å†…éƒ¨ bridgeç½‘ç»œå¯ä»¥ä½¿ç”¨çš„ DNS name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="c"># é•œåƒçš„åå­—</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="c"># å¯é€‰ï¼Œå¦‚æœè®¾ç½®ï¼Œåˆ™ä¼šè¦†ç›–é»˜è®¤é•œåƒé‡Œçš„ CMDå‘½ä»¤</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w"> </span><span class="c"># å¯é€‰ï¼Œç›¸å½“äº docker runé‡Œçš„ --env</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w"> </span><span class="c"># å¯é€‰ï¼Œç›¸å½“äºdocker runé‡Œçš„ -v</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">networks</span><span class="p">:</span><span class="w"> </span><span class="c"># å¯é€‰ï¼Œç›¸å½“äº docker runé‡Œçš„ --network</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w"> </span><span class="c"># å¯é€‰ï¼Œç›¸å½“äº docker runé‡Œçš„ -p</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">servicename2</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">volumes</span><span class="p">:</span><span class="w"> </span><span class="c"># å¯é€‰ï¼Œç›¸å½“äº docker volume create</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">networks</span><span class="p">:</span><span class="w"> </span><span class="c"># å¯é€‰ï¼Œç›¸å½“äº docker network create</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å®è·µ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># docker container run -d -p 80:80 wordpress</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;3.8&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">my-wordpress</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">Jungle</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">wordpress:latest</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="m">80</span><span class="p">:</span><span class="m">80</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p><code>version</code>ï¼šæœ‰å…³ä¿¡æ¯</p>
<ul>
<li><a href="https://docs.docker.com/compose/features-uses" target="_blank" rel="noopener noreffer">https://docs.docker.com/compose/features-uses</a></li>
<li><a href="https://docs.docker.com/compose/migrate" target="_blank" rel="noopener noreffer">https://docs.docker.com/compose/migrate</a></li>
</ul>
</li>
<li>
<p>æ‰§è¡Œ<code>compose</code>å‘½ä»¤ï¼ˆåœ¨åŒçº§ç›®å½•ï¼‰</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker compose up <span class="c1"># ä¸»åŠ¨ï¼Œå ç”¨å‘½ä»¤è¡Œ</span>
</span></span><span class="line"><span class="cl">docker compose up -d <span class="c1"># è¢«åŠ¨ï¼Œåå°å¼€å¯</span>
</span></span><span class="line"><span class="cl">docker compose stop <span class="c1"># åœæ­¢å¯¹åº”çš„å®¹å™¨</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>compose</code>é•œåƒçš„æ„å»ºå’Œæ‹‰å–</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># docker container run -d -p 80:80 wordpress</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;3.8&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">my-wordpress</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">Jungle</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">rust-oslab:latest</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="m">80</span><span class="p">:</span><span class="m">80</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>åªæ‹‰å–é•œåƒï¼Œä¸å¯åŠ¨å®¹å™¨ï¼Œä¸‹æ¬¡<code>docker compose up</code>çš„æ—¶å€™ä¼šå¾ˆå¿«</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker compose pull
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="ç½‘ç»œé…ç½®">ç½‘ç»œé…ç½®</h2>
<ul>
<li>
<p>ä¸»è¦ä¿¡æ¯åœ¨é…ç½®æ–‡ä»¶é‡Œé¢çš„<code>Networks</code>éƒ¨åˆ†</p>
</li>
<li>
<p>å†…ç½‘åœ°å€ï¼š<code>IPAddress</code></p>
</li>
<li>
<p>ç½‘å…³ï¼š<code>Gateway</code>ï¼šé€šå¸¸æ˜¯ä¸»æœºåœ°å€</p>
</li>
<li>
<p>ä½¿ç”¨å®¹å™¨é›†ç¾¤çš„æ—¶å€™è¦è¿›è¡Œç½‘ç»œé…ç½®</p>
<ul>
<li>
<p>æŸ¥çœ‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker network ls
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ä¸‰ç§æ¨¡å¼</p>
<ul>
<li><code>bridge</code>ï¼šæ¡¥æ¥æ¨¡å¼ï¼ˆç½‘æ¡¥ï¼‰ï¼Œä¸ºæ¯ä¸€ä¸ªå®¹å™¨åˆ†é…å’Œè®¾ç½®ä¸€ä¸ª<code>ip</code>åœ°å€ï¼Œå¹¶å°†å®¹å™¨è¿æ¥åˆ°<code>docker0</code>ä¸Šé¢ï¼ˆ<code>linux</code>ä¸‹ä½¿ç”¨<code>ip addr</code>æŸ¥çœ‹ï¼‰</li>
<li><code>host</code>ï¼šä½¿ç”¨ä¸»æœºçš„ç½‘ç»œåœ°å€ï¼Œå®¹å™¨è‡ªå·±æ²¡æœ‰<code>ip</code>å’Œç½‘å…³ï¼Œå…¨éƒ¨ä¾èµ–å®¿ä¸»</li>
<li><code>container</code>ï¼šä½¿ç”¨å…¶ä»–ç½‘ç»œé…ç½®å¥½äº†çš„å®¹å™¨çš„ç½‘ç»œ</li>
<li><code>null</code>ï¼šä¸å¯¹ç½‘ç»œè¿›è¡Œä»»ä½•é…ç½®ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -it --name bbox01 busybox
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<ul>
<li>åˆ›å»º<code>host</code>ç±»å‹çš„å®¹å™¨</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -it --name nginx1 --network host nginx
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>åˆ›å»º<code>null</code>ç±»å‹çš„å®¹å™¨</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -it --name bbox2 --network none busybox
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>container</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># å¯åŠ¨ä¸€ä¸ªæ–°çš„å®¹å™¨</span>
</span></span><span class="line"><span class="cl">docker run -it --name bbox01 busybox
</span></span><span class="line"><span class="cl"><span class="c1"># container æ¨¡å¼</span>
</span></span><span class="line"><span class="cl">docker run -it --name bbox02 --network container:bbox1 busybox
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å¦‚æœ<code>container</code>å¯¹åº”çš„å®¹å™¨å…³é—­ï¼Œ<b>æˆ–è€…å…³é—­ä¹‹åå¼€å¯</b>ï¼Œ<code>container</code>çš„å®¹å™¨çš„ç½‘éƒ½ä¼šæ–­å¼€</li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info"><div class="post-info-tag"><span><a href="/tags/docker/">docker</a>
                </span></div><div class="post-info-line"><div class="post-info-mod">
                <span>æ›´æ–°äº 2023-09-14</span>
            </div><div class="post-info-mod"></div>
        </div><div class="post-info-share">
            <span><a href="javascript:void(0);" title="åˆ†äº«åˆ° Twitter" data-sharer="twitter" data-url="https://Jungle430.github.io/posts/docker/learning_docker/" data-title="Learning docker" data-hashtags="docker"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Facebook" data-sharer="facebook" data-url="https://Jungle430.github.io/posts/docker/learning_docker/" data-hashtag="docker"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Linkedin" data-sharer="linkedin" data-url="https://Jungle430.github.io/posts/docker/learning_docker/"><i class="fab fa-linkedin fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° WhatsApp" data-sharer="whatsapp" data-url="https://Jungle430.github.io/posts/docker/learning_docker/" data-title="Learning docker" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Line" data-sharer="line" data-url="https://Jungle430.github.io/posts/docker/learning_docker/" data-title="Learning docker"><i class="fab fa-line fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° å¾®åš" data-sharer="weibo" data-url="https://Jungle430.github.io/posts/docker/learning_docker/" data-title="Learning docker"><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Myspace" data-sharer="myspace" data-url="https://Jungle430.github.io/posts/docker/learning_docker/" data-title="Learning docker" data-description=""><i data-svg-src="/lib/simple-icons/icons/myspace.min.svg"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Blogger" data-sharer="blogger" data-url="https://Jungle430.github.io/posts/docker/learning_docker/" data-title="Learning docker" data-description=""><i class="fab fa-blogger fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° ç™¾åº¦" data-sharer="baidu" data-url="https://Jungle430.github.io/posts/docker/learning_docker/" data-title="Learning docker"><i data-svg-src="/lib/simple-icons/icons/baidu.min.svg"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Evernote" data-sharer="evernote" data-url="https://Jungle430.github.io/posts/docker/learning_docker/" data-title="Learning docker"><i class="fab fa-evernote fa-fw"></i></a></span>
        </div></div><div class="post-nav"><a href="/posts/go/pdqsort/" class="prev" rel="prev" title="Go 1.19 æ’åºç®—æ³•"><i class="fas fa-angle-left fa-fw"></i>Previous Post</a>
            <a href="/posts/cmu-15-445-database-systems/lru_and_lru-k/" class="next" rel="next" title="LRU and LRU-K">Next Post<i class="fas fa-angle-right fa-fw"></i></a></div></div>
</div></article></div>
            </main>
            <footer class="footer"><div class="footer-container"><div class="footer-line">ç”± <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.105.0">Hugo</a> å¼ºåŠ›é©±åŠ¨ | ä¸»é¢˜ - <a href="https://github.com/khusika/FeelIt" target="_blank" rel="noopener noreffer" title="FeelIt 1.0.1"><i class="fas fa-hand-holding-heart fa-fw"></i> FeelIt</a>
        </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2022 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://github.com/Jungle430">Jungle</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
</div>
<script>
if ('serviceWorker' in navigator) {
    navigator.serviceWorker
        .register('/sw.min.js?version=0.0.1', { scope: '/' })
        .then(() => {
            console.info('Jungle\u0027s Blog\u00A0Service Worker Registered');
        }, err => console.error('Jungle\u0027s Blog\u00A0Service Worker registration failed: ', err));

    navigator.serviceWorker
        .ready
        .then(() => {
            console.info('Jungle\u0027s Blog\u00A0Service Worker Ready');
        });
}
</script>
</footer>
        </div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-chevron-up fa-fw"></i>
            </a></div><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><script src="https://polyfill.io/v3/polyfill.min.js?features=Array.prototype.fill%2CArray.prototype.find%2CArray.from%2CIntersectionObserver%2CMath.sign%2CObject.assign%2CPromise%2CObject.entries%2Chtml5shiv%2CObject.values%2Cfetch%2CElement.prototype.after"></script><script src="/lib/lazysizes/lazysizes.min.js"></script><script src="/lib/clipboard/clipboard.min.js"></script><script src="/lib/sharer/sharer.min.js"></script><script src="/lib/katex/katex.min.js"></script><script src="/lib/katex/auto-render.min.js"></script><script src="/lib/katex/copy-tex.min.js"></script><script src="/lib/katex/mhchem.min.js"></script><script>window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":100},"comment":{},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false}};</script><script src="/js/theme.min.js"></script></body></html>
