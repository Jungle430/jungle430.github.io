<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>æ‰€æœ‰æ–‡ç«  - Jungle&#39;s Blog</title>
        <link>https://Jungle430.github.io/posts/</link>
        <description>æ‰€æœ‰æ–‡ç«  | Jungle&#39;s Blog</description>
        <generator>Hugo -- gohugo.io</generator><language>zh-CN</language><managingEditor>1239946358@qq.com (Jungle)</managingEditor>
            <webMaster>1239946358@qq.com (Jungle)</webMaster><lastBuildDate>Wed, 22 Feb 2023 15:23:14 &#43;0800</lastBuildDate><atom:link href="https://Jungle430.github.io/posts/" rel="self" type="application/rss+xml" /><item>
    <title>CMU 15-445 Lecture #01: Course Overview &amp; Relational Model</title>
    <link>https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter1/</link>
    <pubDate>Wed, 22 Feb 2023 15:23:14 &#43;0800</pubDate><author>1239946358@qq.com (Jungle)</author><guid>https://Jungle430.github.io/posts/cmu-15-445-database-systems/chapter1/</guid>
    <description><![CDATA[<h1 id="cmu-15-445-database-systems">CMU 15-445 Database Systems</h1>
<h2 id="lecture-01-course-overview--relational-model">Lecture #01: Course Overview &amp; Relational Model</h2>
<h3 id="outline">Outline</h3>
<ul>
<li>Course Logistics</li>
<li>Relational Model</li>
<li>Relational Algebra</li>
</ul>
<h3 id="course-overiew">Course overiew</h3>
<ul>
<li>This course is about the design/implementation of database management systems (<code>DBMSs</code>)</li>
<li>This is <strong>not</strong> a course ($\rightarrow Key\ point\ is\ the\ theory\ and\ the\ concept$) about how to use a DBMS to build applications or how to administer a DBMS.â†’ See <a href="http://www.heinz.cmu.edu/academic-resources/course-results/course-details/index.aspx?cid=273" target="_blank" rel="noopener noreffer">CMU 95-703</a> (Heinz College)</li>
</ul>
<h3 id="projects">PROJECTS</h3>
<ul>
<li>
<p>All projects will use the CMU DB Group <a href="https://github.com/cmu-db/bustub" target="_blank" rel="noopener noreffer">BusTub</a> academic DBMS.</p>
<ul>
<li>â†’ Each project builds on the previous one.</li>
<li>â†’ We will not teach you how to write/debug C++17</li>
</ul>
</li>
<li>
<p><strong>complete <a href="https://15445.courses.cs.cmu.edu/fall2022/project0/" target="_blank" rel="noopener noreffer">Project #0</a> ! ! !</strong></p>
</li>
</ul>
<h3 id="database">Database</h3>
<ul>
<li>
<p><strong>Organized collection of inter-related data that models some aspect of the real-world</strong></p>
</li>
<li>
<p><strong>Databases are the core component of most computer applications</strong></p>
</li>
</ul>
<h4 id="example">Example</h4>
<p>Create a database that models a digital music store to keep track of artists and albums</p>
<ul>
<li>Things we need for our store
<ul>
<li>Information about <code>Artists</code></li>
<li>What <code>Albums</code> those Artists released</li>
</ul>
</li>
</ul>
<h5 id="flat-file-strawman">FLAT FILE STRAWMAN</h5>
<ul>
<li>
<p>Store our database as <strong>comma-separated value (CSV)</strong> files that we manage ourselves in our application code</p>
<ul>
<li>
<p>Use a separate file per entity</p>
</li>
<li>
<p>The application must parse the files each time they want to read/update records</p>
</li>
</ul>
</li>
<li>
<p>Create a database that models a digital music store</p>
</li>
</ul>
<p>Artist(name, year, country)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="s2">&#34;Wu-Tang Clan&#34;</span><span class="err">,</span><span class="mi">1992</span><span class="err">,</span><span class="s2">&#34;USA&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s2">&#34;Notorious BIG&#34;</span><span class="err">,</span><span class="mi">1992</span><span class="err">,</span><span class="s2">&#34;USA&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s2">&#34;GZA&#34;</span><span class="err">,</span><span class="mi">1990</span><span class="err">,</span><span class="s2">&#34;USA&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Album(name, artist, year)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="s2">&#34;Enter the Wu-Tang&#34;</span><span class="err">,</span><span class="s2">&#34;Wu-Tang Clan&#34;</span><span class="err">,</span><span class="mi">1993</span>
</span></span><span class="line"><span class="cl"><span class="s2">&#34;St.Ides Mix Tape&#34;</span><span class="err">,</span><span class="s2">&#34;Wu-Tang Clan&#34;</span><span class="err">,</span><span class="mi">1994</span>
</span></span><span class="line"><span class="cl"><span class="s2">&#34;Liquid Swords&#34;</span><span class="err">,</span><span class="s2">&#34;GZA&#34;</span><span class="err">,</span><span class="mi">1990</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="our-code">Our Code</h5>
<ul>
<li>Example: Get the year that GZA went solo $\rightarrow$ Artist</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">	<span class="n">record</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="n">record</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&#34;GZA&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">		<span class="nb">print</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="problem-about-flat-files-rightarrow-data-integrity">Problem about FLAT FILES $\rightarrow$ DATA-INTEGRITY</h4>
<ul>
<li>
<p>How do we ensure that the artist is the same for each album entry?</p>
</li>
<li>
<p>What if somebody overwrites the album year with an invalid string?</p>
</li>
<li>
<p>What if there are multiple artists on an album?</p>
</li>
<li>
<p>What happens if we delete an artist that has albums?</p>
</li>
</ul>
<h4 id="problem-about-flat-files-rightarrow-implementation">Problem about FLAT FILES $\rightarrow$ IMPLEMENTATION</h4>
<ul>
<li>
<p>How do you find a particular record?</p>
</li>
<li>
<p>What if we now want to create a new application that uses the same database?</p>
</li>
<li>
<p>What if two threads try to write to the same file at the same time?</p>
</li>
</ul>
<h4 id="problem-about-flat-files-rightarrow-durability">Problem about FLAT FILES $\rightarrow$ DURABILITY</h4>
<ul>
<li>
<p>What if the machine crashes while our program is updating a record?</p>
</li>
<li>
<p>What if we want to replicate the database on multiple machines for high availability?</p>
</li>
</ul>
<h3 id="database-management-system">DATABASE MANAGEMENT SYSTEM</h3>
<ul>
<li>
<p>A <u>database management system</u> (<strong>DBMS</strong>) is software that allows applications to <strong>store and analyze information in a database</strong></p>
</li>
<li>
<p>A general-purpose DBMS supports the <u>definition, creation, querying, update, and administration of databases</u> in accordance with some <u>data model</u></p>
</li>
</ul>
<h4 id="early-dbmss">EARLY DBMSs</h4>
<blockquote>
<p>Early database applications were difficult to build and maintain on available DBMSs in the 1960s</p>
<blockquote>
<p>Examples: IDS, IMS, CODASYL</p>
<p>Computers were expensive, humans were cheapğŸ˜‚</p>
</blockquote>
</blockquote>
<ul>
<li><u>Tight coupling</u> between <strong>logical</strong> and <strong>physical</strong> layers</li>
<li>Programmers had to (roughly) know what queries the application would execute before they could deploy the databaseğŸ˜Ÿ</li>
</ul>
<blockquote>
<p><strong>Ted Codd</strong> was a <u>mathematician</u> working at IBM Research in the late 1960s</p>
<p>He saw IBM&rsquo;s developers spending their time <strong>rewriting database programs</strong> every time <u>the databaseâ€™s schema or layout changed</u>ğŸ˜¨</p>
<p>Devised the <strong>relational model</strong> in 1969</p>
</blockquote>
<h3 id="relational-model">RELATIONAL MODEL</h3>
<ul>
<li>
<p>The relational model defines a database abstraction based on relations to avoid maintenance overhead</p>
</li>
<li>
<p>Key tenets</p>
<ul>
<li>Store database in simple data structures (relations)</li>
<li>Physical storage left up to the DBMS implementation</li>
<li>Access data through high-level language, DBMS figures out best execution strategy</li>
</ul>
</li>
<li>
<p><strong>Structure:</strong> The definition of the database&rsquo;s relations and their contents</p>
</li>
<li>
<p><strong>Integrity:</strong> Ensure the database&rsquo;s contents satisfy constraints</p>
</li>
<li>
<p><strong>Manipulation:</strong> Programming interface for accessing and modifying a database&rsquo;s contents</p>
</li>
</ul>
<hr>
<ul>
<li>A <u>relation</u> is an unordered set that contain the relationship of attributes that represent entities</li>
<li>A <u>tuple</u> is a set of attribute values (also known as its <u>domain</u>) in the relation
<ul>
<li>Values are (normally) atomic/scalar</li>
<li>The special value <strong>NULL</strong> is a member of every domain (if allowed)</li>
</ul>
</li>
</ul>
<p>Artist(name, year, country)</p>
<table>
<thead>
<tr>
<th>name</th>
<th>year</th>
<th>country</th>
</tr>
</thead>
<tbody>
<tr>
<td>Wu-Tang Clan</td>
<td>1992</td>
<td>USA</td>
</tr>
<tr>
<td>Notorious BIG</td>
<td>1992</td>
<td>USA</td>
</tr>
<tr>
<td>GZA</td>
<td>1990</td>
<td>USA</td>
</tr>
</tbody>
</table>
<p>$$
n-ary\ Relation=Table\ with\ n\ columns\newline
$$</p>
<h4 id="relational-model-primary-keys">RELATIONAL MODEL: PRIMARY KEYS</h4>
<ul>
<li>A relation&rsquo;s <u>primary key</u> <strong>uniquely</strong> identifies a single tuple</li>
<li>Some <code>DBMSs</code> automatically create an internal primary key if a table does not define one</li>
<li>Auto-generation of unique integer primary keys
<ul>
<li>â†’ <strong>SEQUENCE</strong> (SQL:2003)</li>
<li>â†’ <strong>AUTO_INCREMENT</strong> (MySQL)</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>year</th>
<th>country</th>
</tr>
</thead>
<tbody>
<tr>
<td>123</td>
<td>Wu-Tang Clan</td>
<td>1992</td>
<td>USA</td>
</tr>
<tr>
<td>456</td>
<td>Notorious BIG</td>
<td>1992</td>
<td>USA</td>
</tr>
<tr>
<td>789</td>
<td>GZA</td>
<td>1990</td>
<td>USA</td>
</tr>
</tbody>
</table>
<h4 id="relational-model-foreign-keys">RELATIONAL MODEL: FOREIGN KEYS</h4>
<ul>
<li>A <u>foreign key</u> specifies that an attribute <strong>from one relation</strong> has to <strong>map to a tuple in another relation</strong></li>
</ul>
<a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter1-1.png" title="/img/CMU 15-445 Database Systems/chapter1-1.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter1-1.png">
        
    </a>
<h3 id="data-models">DATA MODELS</h3>
<ul>
<li>
<p>A <u>data model</u> is a collection of concepts for describing the data in a database</p>
</li>
<li>
<p>A <u>schema</u> is a description of a particular collection of data, <u>using a given data model</u></p>
</li>
</ul>
<hr>
<ul>
<li>
<p>Example</p>
<ul>
<li>
<p><strong>Relational</strong> $\leftarrow This\ Course\newline$</p>
</li>
<li>
<p>Key/Value</p>
</li>
<li>
<p>Graph</p>
</li>
<li>
<p>Document / Object</p>
</li>
<li>
<p>Wide-Column / Column-family</p>
</li>
<li>
<p>Array / Matrix / Vectors</p>
</li>
<li>
<p>Hierarchical</p>
</li>
<li>
<p>Network</p>
</li>
<li>
<p>Multi-Value</p>
</li>
</ul>
</li>
</ul>
<h3 id="data-manipulation-languages-dml">DATA MANIPULATION LANGUAGES (DML)</h3>
<ul>
<li>
<p>Methods to store and retrieve information from a database</p>
</li>
<li>
<p><strong>Procedural:</strong></p>
<ul>
<li>â†’ The query specifies the (high-level) strategy to find the desired result based on sets / bags $\leftarrow Relational\ Algebra\newline$</li>
</ul>
</li>
<li>
<p><strong>Non-Procedural (Declarative):</strong></p>
<ul>
<li>â†’ The query specifies only what data is wanted and not how to find it. $\leftarrow Relational\ Calculus\newline$</li>
</ul>
</li>
</ul>
<h3 id="relational-algebra">RELATIONAL ALGEBRA</h3>
<ul>
<li>
<p>Fundamental operations to retrieve and manipulate tuples in a relation</p>
<ul>
<li>â†’ Based on set algebra</li>
</ul>
</li>
<li>
<p>Each operator takes one or more relations as its inputs and outputs a new relation</p>
<ul>
<li>â†’ We can &ldquo;chain&rdquo; operators together to create more complex operations</li>
</ul>
</li>
</ul>
<p>$$
\begin{align}
&amp;\sigma\Longrightarrow Select\newline
&amp;\prod\Longrightarrow Projection\newline
&amp;\cup\Longrightarrow Union\newline
&amp;\cap\Longrightarrow Intersection\newline
&amp;-\Longrightarrow Difference\newline
&amp;\times\Longrightarrow Product\newline
&amp;\bowtie\Longrightarrow Join\newline
\end{align}
$$</p>
<h4 id="select">SELECT</h4>
<ul>
<li>
<p>Choose a subset of the tuples from a relation that satisfies a selection predicate</p>
<ul>
<li>
<p>Predicate acts as a filter to retain only tuples that fulfill its qualifying requirement</p>
</li>
<li>
<p>Can combine multiple predicates using conjunctions / disjunctions</p>
</li>
</ul>
</li>
</ul>
<p>$$
Syntax:\sigma_{predicate}(R)
$$</p>
<a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter1-2.png" title="/img/CMU 15-445 Database Systems/chapter1-2.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter1-2.png">
        
    </a>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">WHERE</span><span class="w"> </span><span class="n">a_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;a2&#39;</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">b_id</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">102</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="projection">PROJECTION</h4>
<ul>
<li>
<p>Generate a relation with tuples that contains only the specified attributes</p>
<ul>
<li>
<p>Can rearrange attributesâ€™ ordering</p>
</li>
<li>
<p>Can manipulate the values</p>
</li>
</ul>
</li>
</ul>
<p>$$
Syntax:\prod_{A_1, A_2, &hellip;A_n}(R)
$$</p>
<a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter1-3.png" title="/img/CMU 15-445 Database Systems/chapter1-3.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter1-3.png">
        
    </a>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">b_id</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="n">a_id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">a_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;a2&#39;</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="union">UNION</h4>
<ul>
<li>Generate a relation that contains all tuples that <strong>appear in either only one or both input relations</strong></li>
</ul>
<p>$$
Syntax:(R\cup S)
$$</p>
<a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter1-4.png" title="/img/CMU 15-445 Database Systems/chapter1-4.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter1-4.png">
        
    </a>
<a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter1-5.png" title="/img/CMU 15-445 Database Systems/chapter1-5.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter1-5.png">
        
    </a>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="p">)</span><span class="w"> </span><span class="k">UNION</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">S</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="intersection">INTERSECTION</h4>
<ul>
<li>Generate a relation that contains only the tuples that <strong>appear in both of the input relations</strong></li>
</ul>
<p>$$
Syntax:(R\cap S)
$$</p>
<a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter1-6.png" title="/img/CMU 15-445 Database Systems/chapter1-6.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter1-6.png">
        
    </a>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="p">)</span><span class="w"> </span><span class="k">INTERSECT</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">S</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="difference">DIFFERENCE</h4>
<ul>
<li>Generate a relation that contains only the tuples that appear in the first and not the second of the input relations</li>
</ul>
<p>$$
Syntax:(R-S)
$$</p>
<a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter1-7.png" title="/img/CMU 15-445 Database Systems/chapter1-7.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter1-7.png">
        
    </a>
<a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter1-8.png" title="/img/CMU 15-445 Database Systems/chapter1-8.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter1-8.png">
        
    </a>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="p">)</span><span class="w"> </span><span class="k">EXCEPT</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">S</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="product">PRODUCT</h4>
<ul>
<li>Generate a relation that contains all possible combinations of tuples from the input relations(<code>combination</code>)</li>
</ul>
<p>$$
Syntax:(R\times S)
$$</p>
<a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter1-9.png" title="/img/CMU 15-445 Database Systems/chapter1-9.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter1-9.png">
        
    </a>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="k">CROSS</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">S</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="p">,</span><span class="w"> </span><span class="n">S</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="join-">JOIN !</h4>
<ul>
<li>Generate a relation that contains all tuples that are a combination of two tuples (one from each input relation) with a common value(s) for one or more attributes</li>
</ul>
<p>$$
Syntax:(R\bowtie S)
$$</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="k">NATURAL</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">S</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>R</li>
</ul>
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
</tr>
</thead>
<tbody>
<tr>
<td>a</td>
<td>1</td>
</tr>
<tr>
<td>b</td>
<td>2</td>
</tr>
</tbody>
</table>
<ul>
<li>S</li>
</ul>
<table>
<thead>
<tr>
<th>B</th>
<th>C</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>x</td>
</tr>
<tr>
<td>1</td>
<td>y</td>
</tr>
<tr>
<td>3</td>
<td>z</td>
</tr>
</tbody>
</table>
<ul>
<li>$R\bowtie S$</li>
</ul>
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>C</th>
</tr>
</thead>
<tbody>
<tr>
<td>a</td>
<td>1</td>
<td>x</td>
</tr>
<tr>
<td>a</td>
<td>1</td>
<td>y</td>
</tr>
</tbody>
</table>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="k">USING</span><span class="w"> </span><span class="p">(</span><span class="n">a_id</span><span class="p">,</span><span class="w"> </span><span class="n">b_id</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter1-10.png" title="/img/CMU 15-445 Database Systems/chapter1-10.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter1-10.png">
        
    </a>
<h4 id="extra-operators">EXTRA OPERATORS</h4>
<ul>
<li>
<p>Rename($\rho$)</p>
</li>
<li>
<p>Assignment($R \leftarrow S$)</p>
</li>
<li>
<p>Duplicate Elimination($\delta$)</p>
</li>
<li>
<p>Aggregation($\gamma$)</p>
</li>
<li>
<p>Sorting($\tau$)</p>
</li>
<li>
<p>Division($R\div S$)</p>
</li>
</ul>
<h4 id="observation">OBSERVATION</h4>
<blockquote>
<p>Relational algebra is a procedural language because it defines the high level-steps of how to compute a query. For example, $\sigma_{b_id=102}(R\bowtie S)$ is saying to first do the join of R and S and then do the select,whereas $(R \bowtie (\sigma_{b_id=102}(S)))$ will do the select on S first, and then do the join. These two statements will actually produce the same answer, but if there is only 1 tuple in S with b_id=102 out of a billion tuples, then$(R \bowtie (\sigma_{b_id=102}(S)))$ will be significantly faster than $\sigma_{b_id=102}(R\bowtie S)\newline$ğŸ˜‚</p>
</blockquote>
<blockquote>
<p>A better approach is to say the result you want (state $\rightarrow$<u>retrieve the joined tuples from R and S where b_id equals 102</u>), and let the DBMS decide the steps it wants to take to compute the query. SQL will do exactly this,and it is the de facto standard for writing queries on relational model databasesğŸ®</p>
</blockquote>
<h4 id="queries">QUERIES</h4>
<ul>
<li>
<p>The relational model is independent of any query language implementation.</p>
</li>
<li>
<p><strong>SQL</strong> is the <em>de facto</em> standard (many dialects)</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">	<span class="n">record</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="n">record</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&#34;GZA&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">		<span class="nb">print</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="k">year</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">artists</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">WHERE</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;GZA&#39;</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="document-data-model">DOCUMENT DATA MODEL</h3>
<ul>
<li>Embed data hierarchy into a single objectâŒ</li>
</ul>
<a class="lightgallery" href="/img/CMU%2015-445%20Database%20Systems/chapter1-11.png" title="/img/CMU 15-445 Database Systems/chapter1-11.png" data-thumbnail="/img/CMU 15-445 Database Systems/chapter1-11.png">
        
    </a>
<div class="mermaid" id="id-1"></div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Artist</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">year</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Album</span> <span class="n">albums</span><span class="o">[];</span>
</span></span><span class="line"><span class="cl"><span class="o">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Album</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">year</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>$$
\Downarrow
$$</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;GZA&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;year&#34;</span><span class="p">:</span> <span class="mi">1990</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;albums&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Liquid Swords&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;year&#34;</span><span class="p">:</span> <span class="mi">1995</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Beneath the Surface&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;year&#34;</span><span class="p">:</span> <span class="mi">1999</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="conclusion">CONCLUSION</h3>
<ul>
<li>
<p>Databases are ubiquitous</p>
</li>
<li>
<p>Relational algebra defines the primitives for processing queries on a relational database.</p>
</li>
<li>
<p>We will see relational algebra again when we talk about query optimization + execution</p>
</li>
</ul>
]]></description>
</item>
<item>
    <title>Computer Organization and Architecture Parallel Process &amp; Multicore Computers</title>
    <link>https://Jungle430.github.io/posts/computer-organization-and-architecture/computer-organization-and-architecture-parallel-process-multicore-computers/</link>
    <pubDate>Wed, 01 Feb 2023 01:31:38 &#43;0800</pubDate><author>1239946358@qq.com (Jungle)</author><guid>https://Jungle430.github.io/posts/computer-organization-and-architecture/computer-organization-and-architecture-parallel-process-multicore-computers/</guid>
    <description><![CDATA[<h1 id="computer-organization-and-architecture">Computer Organization and Architecture</h1>
<h2 id="parallel-process--multicore-computers">Parallel Process &amp; Multicore Computers</h2>
<h3 id="outline">Outline</h3>
<ul>
<li>
<p>Parallel Processing</p>
<ul>
<li>Multiple Processor Organizations</li>
<li>Symmetric Multiprocessors</li>
<li>Clusters</li>
<li>Nonuniform Memory Access</li>
<li>Vector Computation</li>
</ul>
</li>
<li>
<p>Multicore Computers</p>
</li>
</ul>
<h3 id="multiple-processor-organizations">Multiple Processor Organizations</h3>
<h4 id="types-of-multiple-processor">Types of multiple processor</h4>
<ul>
<li>
<p>Single instruction, single data stream â€“ <code>SISD</code></p>
</li>
<li>
<p>Single instruction, multiple data stream â€“ <code>SIMD</code></p>
</li>
<li>
<p>Multiple instruction, single data stream â€“ <code>MISD</code></p>
</li>
<li>
<p>Multiple instruction, multiple data stream - <code>MIMD</code></p>
</li>
</ul>
<h4 id="sisd-organizations">SISD Organizations</h4>
<div class="mermaid" id="id-1"></div>
<ul>
<li>
<p>SISDçš„ç»“æ„ä¸­åŒ…å«1ä¸ªCUæ§åˆ¶å•å…ƒï¼Œ1ä¸ªPUå¤„ç†å•å…ƒï¼Œä»¥åŠ1ä¸ªMUå­˜å‚¨å•å…ƒ</p>
</li>
<li>
<p>CUå‘PUå‘é€æŒ‡ä»¤æµï¼ŒMUå‘PUå‘é€æ•°æ®æµ</p>
</li>
<li>
<p>PUæ ¹æ®CUå‘é€çš„æŒ‡ä»¤æµï¼Œå¯¹æ¥è‡ªMUçš„æ•°æ®æµè¿›è¡Œæ“ä½œï¼Œå¹¶äº§ç”Ÿç»“æœã€‚</p>
</li>
<li>
<p>SISDå¹¶æ²¡æœ‰å¹¶è¡Œçš„èƒ½åŠ›ï¼ŒPUæŒ‰ç…§CUæä¾›çš„æŒ‡ä»¤æµï¼Œè¿›è¡Œç›¸åº”çš„æ“ä½œ</p>
</li>
</ul>
<div class="mermaid" id="id-2"></div>
<ul>
<li>
<p>SIMDï¼Œå•æŒ‡ä»¤å¤šæ•°æ®æµï¼Œç»“æ„ä¸­åŒ…å«1ä¸ªæ§åˆ¶å•å…ƒï¼Œå¤šä¸ªå¤„ç†å•å…ƒã€‚æ¯ä¸ªå¤„ç†å•å…ƒæœ‰è‡ªå·±çš„å­˜å‚¨å™¨</p>
</li>
<li>
<p>æ§åˆ¶å•å…ƒå°†æŒ‡ä»¤æµå‘é€ç»™å¤šä¸ªå¤„ç†å•å…ƒè¿›è¡ŒåŒæ­¥å¤„ç†ï¼ŒåŒæ­¥å¤„ç†é‡‡ç”¨çš„æ˜¯é”æ­¥æ–¹å¼</p>
</li>
<li>
<p>ä¸åŒçš„å¤„ç†å™¨åœ¨ä¸åŒçš„æ•°æ®é›†ä¸Šæ‰§è¡Œç›¸åŒçš„æŒ‡ä»¤ï¼Œäº§ç”Ÿä¸åŒçš„å¤„ç†ç»“æœ</p>
</li>
<li>
<p>å®è´¨æ˜¯å¯¹ä¸åŒçš„æ•°æ®é›†è¿›è¡Œç›¸åŒçš„å¤„ç†ï¼Œé€šè¿‡å¹¶è¡Œå¾—åˆ°ä¸€ç»„ç»“æœï¼Œå¹¶è¡Œå¤„ç†æé«˜æ•ˆç‡</p>
</li>
<li>
<p>çŸ¢é‡å’Œé˜µåˆ—å¤„ç†å™¨å±äºSIMDç±»å‹</p>
</li>
</ul>
<h4 id="misd">MISD</h4>
<ul>
<li>
<p>Sequence of data</p>
</li>
<li>
<p>Transmitted to set of processors</p>
</li>
<li>
<p>Each processor executes different instruction sequence</p>
</li>
<li>
<p>Never been implemented</p>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter17-1.png" title="/img/Computer Organization and Architecture/chapter17-1.png" data-thumbnail="/img/Computer Organization and Architecture/chapter17-1.png" data-sub-html="<h2>MIMD Organizations</h2>">
        
    </a><figcaption class="image-caption"><code>MIMD Organizations</code></figcaption>
    </figure>
<ul>
<li>
<p>MIMDï¼Œå¤šæŒ‡ä»¤å¤šæ•°æ®æµæ¶æ„ï¼Œå¤šä¸ªæ§åˆ¶å•å…ƒCUï¼Œå¤šä¸ªå¤„ç†å•å…ƒPUã€‚å­˜å‚¨æ–¹é¢ï¼Œæœ‰ä¸¤ç§ç»“æ„</p>
<ul>
<li>
<p>å…±äº«å­˜å‚¨å™¨ï¼šæ‰€æœ‰çš„PUå…±äº«ä¸€ä¸ªå­˜å‚¨å™¨ï¼Œæ•°æ®éƒ½å­˜å‚¨åœ¨å…±äº«å­˜å‚¨å™¨ä¸­</p>
</li>
<li>
<p>åˆ†å¸ƒå¼å­˜å‚¨ï¼šæ¯ä¸ªPUéƒ½æœ‰è‡ªå·±çš„LMï¼Œè¿™äº›æœºå™¨é€šè¿‡äº’è”ç½‘è¿æ¥åœ¨ä¸€èµ·</p>
</li>
</ul>
</li>
<li>
<p>ä¸€ç»„å¤„ç†å™¨ï¼Œèƒ½å¤ŸåŒæ—¶æ‰§è¡Œä¸åŒçš„æŒ‡ä»¤åºåˆ—ã€‚æ¯ä¸ªå¤„ç†å™¨éƒ½æœ‰è‡ªå·±çš„æ•°æ®é›†ã€‚</p>
</li>
<li>
<p>å¯¹ç§°å¤šå¤„ç†SMPï¼Œé›†ç¾¤ï¼Œéå‡åŒ€å­˜å‚¨å™¨è®¿é—®NUMAç­‰ï¼Œéƒ½å±äºMIMDæ¶æ„</p>
</li>
</ul>
<h3 id="symmetric-multiprocessors">Symmetric Multiprocessors</h3>
<h4 id="smp">SMP</h4>
<ul>
<li>
<p>Tightly Coupled</p>
</li>
<li>
<p>Processors share memory and I/O</p>
<ul>
<li>
<p>Share single memory or pool</p>
</li>
<li>
<p>Shared bus to access memory</p>
</li>
<li>
<p>Public area set in shared storage stores status information to achieve communication between processors</p>
</li>
<li>
<p>Memory access time to given area of memory is approximately the same for each processor</p>
</li>
</ul>
</li>
</ul>
<h4 id="characteristic-of-smp">Characteristic of SMP</h4>
<ul>
<li>
<p>Two or more processors with similar function</p>
<ul>
<li>
<p>All processors share memory and I/O</p>
</li>
<li>
<p>All processors share access to I/O</p>
</li>
<li>
<p>Perform the same function</p>
</li>
</ul>
</li>
<li>
<p>Controlled by a centralized operating system</p>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter17-2.png" title="/img/Computer Organization and Architecture/chapter17-2.png" data-thumbnail="/img/Computer Organization and Architecture/chapter17-2.png" data-sub-html="<h2>Symmetric Multiprocessor Organization</h2>">
        
    </a><figcaption class="image-caption"><code>Symmetric Multiprocessor Organization</code></figcaption>
    </figure>
<ul>
<li>
<p>æ¯ä¸ªå¤„ç†å™¨æœ‰è‡ªå·±çš„$L1\ cache$ï¼Œä¹Ÿå¯èƒ½ä¼šé…ç½®å„è‡ªçš„$L2\ cache\newline$</p>
</li>
<li>
<p>å¤„ç†å™¨éƒ½æŒ‚åœ¨å…±äº«çš„ç³»ç»Ÿæ€»çº¿ä¸Šï¼Œå…±äº«å¯¹ä¸»å­˜å‚¨å™¨çš„è®¿é—®</p>
</li>
<li>
<p>I/Oç³»ç»Ÿä¹ŸæŒ‚åœ¨ç³»ç»Ÿæ€»çº¿ä¸Šï¼Œå„ä¸ªå¤„ç†å™¨å¯¹I/Oç³»ç»Ÿè¿›è¡Œå…±äº«è®¿é—®</p>
</li>
</ul>
<h4 id="smp-advantages">SMP Advantages</h4>
<ul>
<li>
<p>High performance</p>
<ul>
<li>Greatly improved performance if some work can be done in parallel</li>
</ul>
</li>
<li>
<p>High availability</p>
<ul>
<li>
<p>All processors can perform the same functions</p>
</li>
<li>
<p>Failure of a single processor does not halt the system</p>
</li>
</ul>
</li>
<li>
<p>Incremental growth</p>
<ul>
<li>
<p>Flexible system expansion</p>
</li>
<li>
<p>User can enhance performance by adding additional processors</p>
</li>
</ul>
</li>
<li>
<p>Scaling</p>
<ul>
<li>
<p>Vendors can offer range of products based on number of processors</p>
</li>
<li>
<p>Different products have different prices and performance, which can give users more choices</p>
</li>
</ul>
</li>
</ul>
<h4 id="design-issues">Design issues</h4>
<ul>
<li>
<p>SMP system is managed by a unified operating system</p>
</li>
<li>
<p>Operating system is responsible for scheduling processes and resources</p>
</li>
<li>
<p>Operating system needs to complete</p>
<ul>
<li>
<p>Simultaneous concurrent processes</p>
</li>
<li>
<p>Scheduling</p>
</li>
<li>
<p>Synchronization</p>
</li>
<li>
<p>Memory management</p>
</li>
<li>
<p>Reliability and fault tolerance</p>
</li>
</ul>
</li>
<li>
<p>Simultaneous concurrent processes</p>
<ul>
<li>
<p>Allow multiple processors to execute the same piece of OS code at the same time</p>
</li>
<li>
<p>Manage OS tables and other structures to avoid deadlocks</p>
</li>
</ul>
</li>
<li>
<p>Scheduling</p>
<ul>
<li>Reasonably schedule the processor execution process</li>
</ul>
</li>
<li>
<p>Synchronization</p>
<ul>
<li>Provide synchronization mechanism to ensure mutual exclusion and order of memory and I/O access</li>
</ul>
</li>
<li>
<p>Memory management</p>
<ul>
<li>Solve concurrency and consistency problems</li>
<li>Ensure the performance and correctness under multiprocessors</li>
</ul>
</li>
<li>
<p>Reliability and fault tolerance</p>
<ul>
<li>For a processor failure, the operating system shall be able to reconstruct the system so that the system can be degraded for use</li>
</ul>
</li>
</ul>
<h3 id="clusters">Clusters</h3>
<ul>
<li>
<p>Loosely Coupled</p>
</li>
<li>
<p>Collection of independent uniprocessors or <code>SMPs</code></p>
</li>
<li>
<p>Interconnected to form a cluster</p>
</li>
<li>
<p>Communication via fixed path or network connections</p>
</li>
</ul>
<hr>
<ul>
<li>
<p>Composition of cluster</p>
<ul>
<li>
<p>A group of interconnected whole computers</p>
</li>
<li>
<p>Working together as unified resource</p>
</li>
<li>
<p>Illusion of being one machine</p>
</li>
<li>
<p>Each computer called a node</p>
</li>
</ul>
</li>
<li>
<p>Characteristics</p>
<ul>
<li>
<p>High performance</p>
</li>
<li>
<p>High availability</p>
</li>
<li>
<p>Alternative to SMP</p>
</li>
</ul>
</li>
<li>
<p>Server applications</p>
</li>
</ul>
<h4 id="cluster-benefits">Cluster Benefits</h4>
<ul>
<li>
<p>Absolute scalability</p>
<ul>
<li>
<p>Build hundreds of thousands of independent computers into a large cluster system, and the processing capacity may far exceed that of the largest independent computer</p>
</li>
<li>
<p>Each machine in the cluster can be a single processing system or a multiprocessor architecture</p>
</li>
</ul>
</li>
<li>
<p>Incremental scalability</p>
<ul>
<li>
<p>New nodes can be added to the cluster system step by step to improve processing capacity and gradually expand</p>
</li>
<li>
<p>Very flexible capacity expansion</p>
</li>
</ul>
</li>
<li>
<p>High availability</p>
<ul>
<li>
<p>Each node is an independent computer</p>
</li>
<li>
<p>The failure of one or more nodes will not affect the use of the cluster system</p>
</li>
<li>
<p>Node fault diagnosis and fault tolerance are automatically completed by the system</p>
</li>
</ul>
</li>
<li>
<p>Superior price/performance</p>
<ul>
<li>
<p>Combine mature commercial computers into a cluster</p>
</li>
<li>
<p>The system performance is far greater than that of a single large server</p>
</li>
<li>
<p>High cost performance</p>
</li>
</ul>
</li>
</ul>
<h4 id="blade-servers">Blade Servers</h4>
<ul>
<li>
<p><strong>Common implementation of cluster</strong></p>
</li>
<li>
<p>Server houses multiple server modules (blades) in single chassis</p>
<ul>
<li>
<p>Save space</p>
</li>
<li>
<p>Improve system management</p>
</li>
<li>
<p>Chassis provides power supply</p>
</li>
<li>
<p>Each blade has processor, memory, disk</p>
</li>
</ul>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter17-3.png" title="/img/Computer Organization and Architecture/chapter17-3.png" data-thumbnail="/img/Computer Organization and Architecture/chapter17-3.png" data-sub-html="<h2>Blade Servers</h2>">
        
    </a><figcaption class="image-caption"><code>Blade Servers</code></figcaption>
    </figure>
<h4 id="cluster-v-smp">Cluster v. SMP</h4>
<ul>
<li>
<p>Both provide multiprocessor support to high demand applications</p>
</li>
<li>
<p>Both available commercially</p>
</li>
<li>
<p>SMP for longer</p>
</li>
</ul>
<hr>
<ul>
<li>
<p><code>SMP</code></p>
<ul>
<li>
<p>Easier to manage and control</p>
</li>
<li>
<p>Closer to single processor systems</p>
</li>
<li>
<p>Scheduling is important</p>
</li>
<li>
<p>Less physical space</p>
</li>
<li>
<p>Lower power consumption</p>
</li>
</ul>
</li>
<li>
<p>Clustering</p>
<ul>
<li>
<p>Superior incremental &amp; absolute scalability</p>
</li>
<li>
<p>Superior availability</p>
<ul>
<li>Redundancy</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="nonuniform-memory-access">Nonuniform Memory Access</h3>
<h4 id="numa">NUMA</h4>
<ul>
<li>
<p>Tightly Coupled</p>
</li>
<li>
<p>Nonuniform memory access</p>
<ul>
<li>Access times to different regions of memory may differ</li>
</ul>
</li>
<li>
<p>Main object</p>
<ul>
<li>
<p>Overcoming the limitation on the number of processors in SMP</p>
</li>
<li>
<p>It solves the problem caused by the independent memory used by each node in the cluster system</p>
</li>
</ul>
</li>
<li>
<p>Alternative to SMP &amp; clustering</p>
</li>
</ul>
<hr>
<ul>
<li>
<p>Uniform memory access</p>
<ul>
<li>
<p>All processors have access to all parts of memory</p>
</li>
<li>
<p>Using load &amp; store</p>
</li>
<li>
<p>Access time to all regions of memory is the same</p>
</li>
<li>
<p>Access time to memory for different processors same</p>
</li>
<li>
<p>As used by SMP</p>
</li>
</ul>
</li>
</ul>
<h4 id="nonuniform-memory-access-1">Nonuniform Memory Access</h4>
<ul>
<li>
<p>All processors have access to all parts of memory</p>
</li>
<li>
<p>Using load &amp; store</p>
</li>
<li>
<p>Access time of processor differs depending on region of memory</p>
</li>
<li>
<p>Different processors access different regions of memory at different speeds</p>
</li>
</ul>
<hr>
<ul>
<li>
<p>Cache coherent NUMA(<code>CC-NUMA</code>)</p>
<ul>
<li>
<p>Cache coherence is maintained among the caches of the various processors</p>
</li>
<li>
<p>For a system without cache consistency maintenance, it is similar to a cluster system</p>
</li>
<li>
<p><code>CC-NUMA</code> is discussed here</p>
</li>
<li>
<p>Significantly different from SMP and clusters</p>
</li>
</ul>
</li>
</ul>
<h4 id="motivation">Motivation</h4>
<ul>
<li>
<p>SMP has practical limit to number of processors</p>
<ul>
<li>Bus traffic limits to between 16 and 64 processors</li>
</ul>
</li>
<li>
<p>In clusterï¼Œeach node has own memory</p>
<ul>
<li>Apps do not see large global memory</li>
<li>Coherence maintained by software not hardware</li>
</ul>
</li>
<li>
<p>NUMA retains SMP flavour while giving large scale multiprocessing</p>
<ul>
<li>e.g. Silicon Graphics Origin NUMA 1024 MIPS R10000 processors</li>
</ul>
</li>
<li>
<p>Objective</p>
<ul>
<li>
<p>maintain transparent system wide memory while permitting multiprocessor nodes</p>
</li>
<li>
<p>each with own bus or internal interconnection system</p>
</li>
</ul>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter17-4.png" title="/img/Computer Organization and Architecture/chapter17-4.png" data-thumbnail="/img/Computer Organization and Architecture/chapter17-4.png" data-sub-html="<h2>CC-NUMA Organization</h2>">
        
    </a><figcaption class="image-caption"><code>CC-NUMA Organization</code></figcaption>
    </figure>
<ul>
<li>
<p>NUMAç³»ç»Ÿç”±å¤šä¸ªç»“ç‚¹ç»„æˆã€‚æ¯ä¸ªèŠ‚ç‚¹åŒ…å«æœ‰è‹¥å¹²ä¸ªå¤„ç†å™¨ï¼Œæ¯ä¸ªå¤„ç†å™¨æœ‰è‡ªå·±çš„L1 cacheå’ŒL2 cacheï¼Œæœ‰è‡ªå·±çš„å†…éƒ¨æ€»çº¿ï¼Œå¹¶ä¸”æœ‰è‡ªå·±çš„ä¸»å­˜å’ŒI/O</p>
</li>
<li>
<p>å¤„ç†å™¨è®¿é—®å­˜å‚¨å™¨çš„æ—¶å€™ï¼Œé¦–å…ˆçœ‹æ˜¯å¦åœ¨cacheä¸­ï¼Œå¦‚æœä¸åœ¨ï¼Œcacheä¼šå»è®¿é—®æœ¬åœ°å­˜å‚¨å™¨ã€‚å¦‚æœåœ¨çš„è¯ï¼Œå°±é€šè¿‡å†…éƒ¨æ€»çº¿å–è¿‡æ¥ã€‚å¦‚æœä¸åœ¨æœ¬åœ°å­˜å‚¨å™¨ä¸­ï¼Œcacheä¼šå‘å‡ºä¸€ä¸ªè¯·æ±‚ï¼Œé€šè¿‡äº’è”ç½‘ç»œä»è¿œç«¯å–è¿‡æ¥ï¼Œæ”¾åˆ°æ€»çº¿ä¸Šï¼Œå‘å‡ºè¯·æ±‚çš„cacheä»æ€»çº¿ä¸Šè¯»å–ã€‚è¿™äº›åŠ¨ä½œéƒ½æ˜¯è‡ªåŠ¨çš„ï¼Œå¯¹å¤„ç†å™¨å’Œcacheéƒ½æ˜¯é€æ˜çš„ã€‚</p>
</li>
</ul>
<h3 id="vector-computation">Vector Computation</h3>
<ul>
<li>
<p>Maths problems involving physical processes present different difficulties for computation</p>
<ul>
<li>
<p>Aerodynamics, seismology, meteorology</p>
</li>
<li>
<p>Continuous field simulation</p>
</li>
</ul>
</li>
<li>
<p>Requirement</p>
<ul>
<li>
<p>High precision</p>
</li>
<li>
<p>Repeated floating point calculations on large arrays of numbers</p>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p>Solution 1: supercomputer</p>
<ul>
<li>
<p>Hundreds of millions of float</p>
</li>
<li>
<p>Optimized for Vector Computation</p>
</li>
<li>
<p>$10-15 million</p>
</li>
<li>
<p>Limited market</p>
</li>
<li>
<p>Research, government agencies, meteorology</p>
</li>
</ul>
</li>
<li>
<p>Solution 2:  Array processor</p>
<ul>
<li>
<p>Alternative to supercomputer</p>
</li>
<li>
<p>Configured as peripherals to mainframe &amp; mini</p>
</li>
<li>
<p>Just run vector portion of problems</p>
</li>
</ul>
</li>
</ul>
<h3 id="multicore-computers">Multicore Computers</h3>
<h4 id="what-is-multicore-computers">What is Multicore Computers?</h4>
<ul>
<li>
<p>Also known as single chip multiprocessor</p>
</li>
<li>
<p>Two or more processors are integrated on a single chip, and each processor is called a core</p>
</li>
<li>
<p>Each core consists of all components of an independent processor, including register set, ALU, pipeline hardware, control unit, and L1 data and instruction cache</p>
</li>
<li>
<p>Some multicore processors also include L2 cache and L3 cache on the chip</p>
</li>
</ul>
<h3 id="hardware-performance-issues">Hardware Performance Issues</h3>
<ul>
<li>
<p>Microprocessors have seen an exponential increase in performance</p>
<ul>
<li>
<p>Improved organization</p>
</li>
<li>
<p>Increased clock frequency</p>
</li>
</ul>
</li>
<li>
<p>Increase in Parallelism</p>
<ul>
<li>
<p>Pipelining</p>
</li>
<li>
<p>Superscalar</p>
</li>
<li>
<p>Simultaneous multithreading</p>
</li>
</ul>
</li>
</ul>
<h4 id="simultaneous-multithreading">Simultaneous multithreading</h4>
<ul>
<li>
<p>åŒæ­¥å¤šçº¿ç¨‹èƒ½å¤Ÿä»å¤šä¸ªçº¿ç¨‹ä¸­å–å‡ºæŒ‡ä»¤æ¥è¿è¡Œï¼Œå®ƒèƒ½å¤ŸåŒæ—¶æ‰§è¡Œä¸åŒçº¿ç¨‹çš„æŒ‡ä»¤</p>
</li>
<li>
<p>åŒæ­¥å¤šçº¿ç¨‹æ¶æ„ä¸­ï¼Œé…ç½®äº†å¤šä¸ªPCå’Œå¤šä¸ªå¯„å­˜å™¨ç»„ï¼Œåº•å±‚å…±äº«æŒ‡ä»¤cacheå’Œæ•°æ®cacheã€‚è¿™æ ·å¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«æµæ°´çº¿èµ„æº</p>
</li>
<li>
<p>é€šè¿‡åŒæ­¥å¤šçº¿ç¨‹æŠ€æœ¯ï¼Œç³»ç»Ÿèƒ½å¤ŸåŠ¨æ€è°ƒæ•´ç³»ç»Ÿç¯å¢ƒï¼Œå¦‚æœ‰å¯èƒ½åŒæ—¶æ‰§è¡Œä¸åŒçº¿ç¨‹çš„æŒ‡ä»¤ã€‚å½“ä¸€ä¸ªçº¿ç¨‹é‡åˆ°é•¿å»¶è¿Ÿäº‹ä»¶æ—¶ï¼Œå…è®¸å¦ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨æ‰€æœ‰çš„å¤„ç†å•å…ƒ</p>
</li>
</ul>
<h4 id="hardware-performance-issues-1">Hardware Performance Issues</h4>
<ul>
<li>
<p>Processor performance continues to improve</p>
<ul>
<li>
<p>Adjustment of chip architecture</p>
</li>
<li>
<p>Improvement of main frequency</p>
</li>
</ul>
</li>
<li>
<p>Diminishing returns</p>
<ul>
<li>
<p>More complexity requires more logic</p>
</li>
<li>
<p>Need more chip area for coordinating and signal transfer logic</p>
</li>
<li>
<p>Harder to design, make and debug</p>
</li>
<li>
<p>Hardware performance reaches the bottleneck, which is very difficult to improve</p>
</li>
</ul>
</li>
</ul>
<h4 id="power-consumption">Power consumption</h4>
<ul>
<li>
<p>Power requirements grow exponentially with chip density and clock frequency</p>
</li>
<li>
<p>Increased power consumption causes CPU cooling problems</p>
</li>
<li>
<p>It is increasingly difficult to improve performance by improving chip integration</p>
</li>
</ul>
<hr>
<ul>
<li>
<p>One solution is use more chip area for cache</p>
<ul>
<li>
<p>Storage transistors require low power consumption</p>
</li>
<li>
<p>Cache is close to CPU and fast</p>
</li>
<li>
<p>By 2015ï¼Œ100 billion transistors on 300mm2 ï¼ŒCache of 100MB ï¼Œ1 billion transistors for logic</p>
</li>
</ul>
</li>
<li>
<p>Large capacity cache provides basic resources for multi-core processors</p>
</li>
</ul>
<h4 id="pollacks-rule">Pollackâ€™s rule</h4>
<ul>
<li>
<p>Pollackâ€™s rule</p>
<ul>
<li>
<p>Performance is roughly proportional to square root of increase in complexity</p>
</li>
<li>
<p>Double complexity gives 40% more performance</p>
</li>
</ul>
</li>
<li>
<p>So,integrating multiple processor cores on one chip becomes a better solution</p>
<ul>
<li>
<p>Multicore makes performance close to linear improvement</p>
</li>
<li>
<p>Unlikely that one core can use all cache effectively</p>
</li>
</ul>
</li>
</ul>
<h3 id="software-performance-issues">Software Performance Issues</h3>
<ul>
<li>
<p>Performance benefits dependent on effective exploitation of parallel resources</p>
<ul>
<li>
<p>Amdahlâ€™s Law</p>
</li>
<li>
<p>Even small amounts of serial code impact performance</p>
</li>
<li>
<p>10% inherently serial on 8 processor system gives only 4.7 times performance</p>
</li>
</ul>
</li>
<li>
<p>Other factors affecting performance: communication, distribution of work and cache coherence overheads</p>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter17-5.png" title="/img/Computer Organization and Architecture/chapter17-5.png" data-thumbnail="/img/Computer Organization and Architecture/chapter17-5.png" data-sub-html="<h2>Performance Effect of Multiple Cores</h2>">
        
    </a><figcaption class="image-caption"><code>Performance Effect of Multiple Cores</code></figcaption>
    </figure>
<ul>
<li>
<p>å›¾ï¼ˆaï¼‰ç»™å‡ºäº†ä¸²è¡Œä»£ç æ¯”ä¾‹å¯¹åŠ é€Ÿæ¯”çš„å½±å“ã€‚å¦‚æœæ²¡æœ‰ä¸²è¡Œä»£ç ï¼Œç†è®ºä¸ŠåŠ é€Ÿæ¯”å’Œæ€§èƒ½çš„æå‡æˆæ­£æ¯”ã€‚ä½†æ˜¯ï¼Œç”±äºä¸²è¡Œå¤„ç†çš„é—®é¢˜ï¼Œå¯¼è‡´åŠ é€Ÿæ¯”æ¯”ç†è®ºå€¼å°äº†å¾ˆå¤šã€‚</p>
</li>
<li>
<p>å›¾ï¼ˆbï¼‰æŒ‡å‡ºç®¡ç†å¼€é”€å¯¹åŠ é€Ÿæ¯”çš„å½±å“ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨5ä¸ªå¤„ç†å™¨çš„æ—¶å€™ï¼ŒåŠ é€Ÿæ¯”æœ€å¤§ï¼Œéšç€æ ¸æ•°çš„å¢åŠ ï¼Œç®¡ç†å¼€é”€ä¼šå¯¼è‡´æ€§èƒ½æ”¶ç›Šé€’å‡</p>
</li>
</ul>
<h4 id="effective-applications">Effective Applications</h4>
<ul>
<li>
<p>Some applications effectively exploit multicore processors</p>
<ul>
<li>
<p>Database</p>
</li>
<li>
<p>Servers handling independent transactions</p>
</li>
<li>
<p>Multi-threaded native applicationsï¼Œsuch as Lotus Domino, Siebel CRM</p>
</li>
<li>
<p>Multi-process applications, such as Oracle, SAP, PeopleSoft</p>
</li>
</ul>
</li>
<li>
<p>Java applications</p>
<ul>
<li>
<p><code>JVM</code> is multi-thread with scheduling and memory management</p>
</li>
<li>
<p>Sunâ€™s Java Application Server, BEAâ€™s Weblogic, IBM Websphere, Tomcat</p>
</li>
</ul>
</li>
<li>
<p>Multi-instance applications</p>
<ul>
<li>One application running multiple times</li>
</ul>
</li>
<li>
<p>Game Software</p>
</li>
</ul>
<h3 id="multicore-organization">Multicore Organization</h3>
<ul>
<li>
<p>Number of core processors on chip</p>
</li>
<li>
<p>Number of levels of cache on chip</p>
</li>
<li>
<p>Amount of shared cache</p>
</li>
<li>
<p>Next slide examples of each organization</p>
<ul>
<li>
<p>(a) ARM11 MPCore</p>
</li>
<li>
<p>(b) AMD Opteron</p>
</li>
<li>
<p>(c) Intel Core Duo</p>
</li>
<li>
<p>(d) Intel Core i7</p>
</li>
</ul>
</li>
</ul>
<h4 id="individual-core-architecture">Individual Core Architecture</h4>
<ul>
<li>
<p>Intel Core Duo uses superscalar cores</p>
</li>
<li>
<p>Intel Core i7 uses simultaneous multi-threading (SMT)</p>
<ul>
<li>Scales up number of threads supported</li>
<li>4 SMT cores, each supporting 4 threads appears as 16 core</li>
</ul>
</li>
</ul>
<h3 id="intel-x86-multicore-organization">Intel x86 Multicore Organization</h3>
<p>Example: Core Duo and Core i7</p>
<h3 id="arm11-mpcore">ARM11 MPCore</h3>
<ul>
<li>
<p>Up to 4 processors each with own L1 instruction and data cache</p>
</li>
<li>
<p>Distributed interrupt controller</p>
</li>
<li>
<p>Timer per CPU</p>
</li>
<li>
<p>Watchdog</p>
<ul>
<li>Warning alerts for software failures</li>
<li>Counts down from predetermined values</li>
<li>Issues warning at zero</li>
</ul>
</li>
<li>
<p>CPU interface</p>
<ul>
<li>Interrupt acknowledgement, masking and completion acknowledgement</li>
</ul>
</li>
<li>
<p>CPU</p>
<ul>
<li>Single ARM11 called MP11</li>
</ul>
</li>
<li>
<p>Vector floating-point unit</p>
<ul>
<li>FP co-processor</li>
</ul>
</li>
<li>
<p>L1 cache</p>
</li>
<li>
<p>Snoop control unit</p>
<ul>
<li>Maintain L1 cache coherency</li>
</ul>
</li>
</ul>
<h4 id="summary-of-parallel">Summary of parallel</h4>
<ul>
<li>
<p>Internal of CPU</p>
<ul>
<li>
<p>Pipeline</p>
</li>
<li>
<p>Superscalar</p>
</li>
<li>
<p>simultaneous multi-threading(SMT)</p>
</li>
</ul>
</li>
<li>
<p>On chip</p>
<ul>
<li>Multicore</li>
</ul>
</li>
<li>
<p>Internal of machine</p>
<ul>
<li>
<p>SMP</p>
</li>
<li>
<p>NUMA</p>
</li>
<li>
<p>Array processor</p>
</li>
</ul>
</li>
<li>
<p>Multi-machine</p>
<ul>
<li>Cluster</li>
</ul>
</li>
</ul>
]]></description>
</item>
<item>
    <title>Computer Organization and Architecture Control Unit Operation &amp; Microprogrammed Control</title>
    <link>https://Jungle430.github.io/posts/computer-organization-and-architecture/computer-organization-and-architecture-control-unit-operation-microprogrammed-control/</link>
    <pubDate>Tue, 31 Jan 2023 15:20:52 &#43;0800</pubDate><author>1239946358@qq.com (Jungle)</author><guid>https://Jungle430.github.io/posts/computer-organization-and-architecture/computer-organization-and-architecture-control-unit-operation-microprogrammed-control/</guid>
    <description><![CDATA[<h1 id="computer-organization-and-architecture">Computer Organization and Architecture</h1>
<h2 id="control-unit-operation--microprogrammed-control">Control Unit Operation &amp; Microprogrammed Control</h2>
<h3 id="outline">Outline</h3>
<ul>
<li>
<p>Control Unit Operation</p>
<ul>
<li>
<p>Micro-Operations</p>
</li>
<li>
<p>Control of the Processor</p>
</li>
<li>
<p>Hardwired Implementation</p>
</li>
</ul>
</li>
<li>
<p>Microprogrammed Control</p>
<ul>
<li>Basic Concepts</li>
<li>Microinstruction Sequencing</li>
<li>Microinstruction Execution</li>
</ul>
</li>
</ul>
<h3 id="control-unit-operation">Control Unit Operation</h3>
<h4 id="the-function-of-a-processor">The function of a processor</h4>
<ul>
<li>
<p>Instruction Fetch and Execute</p>
<ul>
<li>Execute program</li>
</ul>
</li>
<li>
<p>Interrupts</p>
<ul>
<li>Handling performance differences between CPU and other components</li>
</ul>
</li>
<li>
<p>I/O Function</p>
<ul>
<li>Inter-working with peripherals</li>
</ul>
</li>
</ul>
<h4 id="composition-of-instructions">Composition of instructions</h4>
<ul>
<li>
<p>Instructions include opcodes and operands</p>
</li>
<li>
<p>Opcodes</p>
<ul>
<li>Determines what type of operation the instruction does</li>
</ul>
</li>
<li>
<p>Operands</p>
<ul>
<li>
<p>Determine the object of instruction operation</p>
</li>
<li>
<p>Operands may be in registers, memory, I/O, or immediate</p>
</li>
<li>
<p>Finding operands through addressing mode</p>
</li>
</ul>
</li>
</ul>
<h4 id="micro-operations">Micro-operations</h4>
<ul>
<li>
<p>A computer executes a program to complete user specified functions</p>
<ul>
<li>
<p>Program contains many instructions</p>
</li>
<li>
<p>Instruction execution includes several cycles, such as fetch cycle, execution cycle, indirect cycle, etc</p>
</li>
</ul>
</li>
<li>
<p><strong>Each cycle has a number of steps</strong></p>
<ul>
<li>
<p><strong>Called micro-operations</strong></p>
</li>
<li>
<p><strong>Each step does very little</strong></p>
</li>
<li>
<p><strong>Atomic operation of CPU</strong></p>
</li>
</ul>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter15-1.png" title="/img/Computer Organization and Architecture/chapter15-1.png" data-thumbnail="/img/Computer Organization and Architecture/chapter15-1.png" data-sub-html="<h2>Constituent of program</h2>">
        
    </a><figcaption class="image-caption"><code>Constituent of program</code></figcaption>
    </figure>
<ul>
<li>
<p><strong>ç¨‹åºçš„æ‰§è¡Œæ˜¯ç”±è‹¥å¹²ä¸ªæŒ‡ä»¤æ‰§è¡Œç»„æˆçš„</strong></p>
</li>
<li>
<p><strong>æ¯ä¸ªæŒ‡ä»¤çš„æ‰§è¡Œå°±æ˜¯ä¸€ä¸ªæŒ‡ä»¤å‘¨æœŸ</strong></p>
</li>
<li>
<p><strong>æŒ‡ä»¤å‘¨æœŸç”±è‹¥å¹²ä¸ªå­å‘¨æœŸç»„æˆï¼Œæ¯”å¦‚å–æŒ‡å‘¨æœŸã€æ‰§è¡Œå‘¨æœŸç­‰</strong></p>
</li>
<li>
<p><strong>æ¯ä¸ªå­å‘¨æœŸåŒ…å«è‹¥å¹²ä¸ªæ›´å°çš„æ“ä½œï¼Œè¿™äº›æ“ä½œç§°ä¸ºå¾®æ“ä½œ</strong></p>
</li>
</ul>
<h5 id="fetch">Fetch</h5>
<ul>
<li>
<p>Program Counter (PC)</p>
<ul>
<li>Holds address of next instruction to be fetched</li>
</ul>
</li>
<li>
<p>Memory Address Register (MAR)</p>
<ul>
<li>
<p>Connected to address bus</p>
</li>
<li>
<p>Specifies address for read or write op</p>
</li>
</ul>
</li>
<li>
<p>Memory Buffer Register (MBR)</p>
<ul>
<li>
<p>Connected to data bus</p>
</li>
<li>
<p>Holds data to write or last data read</p>
</li>
</ul>
</li>
<li>
<p>Instruction Register (IR)</p>
<ul>
<li>Holds last instruction fetched</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Step1</strong></p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter15-2.png" title="/img/Computer Organization and Architecture/chapter15-2.png" data-thumbnail="/img/Computer Organization and Architecture/chapter15-2.png">
        
    </a>
<ul>
<li>
<p><strong>ä¸‹ä¸€ä¸ªæŒ‡ä»¤çš„åœ°å€æ˜¯æ”¾åœ¨PCé‡Œ</strong></p>
</li>
<li>
<p><strong>MARæ˜¯ä¸åœ°å€æ€»çº¿è¿æ¥çš„å”¯ä¸€å¯„å­˜å™¨</strong></p>
</li>
<li>
<p><strong>å–æŒ‡çš„ç¬¬ä¸€æ­¥æ˜¯PCæŠŠä¸‹ä¸€ä¸ªæŒ‡ä»¤çš„åœ°å€ç»™MAR</strong></p>
</li>
<li>
<p><strong>ç»è¿‡ç¬¬ä¸€æ­¥ä¹‹åï¼ŒPCå¯„å­˜å™¨çš„å†…å®¹å¤åˆ¶åˆ°MARå¯„å­˜å™¨ä¸­</strong></p>
</li>
</ul>
<hr>
<p><strong>Step2</strong></p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter15-3.png" title="/img/Computer Organization and Architecture/chapter15-3.png" data-thumbnail="/img/Computer Organization and Architecture/chapter15-3.png">
        
    </a>
<ul>
<li>
<p>MARæ”¶åˆ°åœ°å€åï¼ŒæŠŠåœ°å€æ”¾åˆ°åœ°å€æ€»çº¿ä¸Š</p>
</li>
<li>
<p>æ§åˆ¶å•å…ƒå‘ä¸€ä¸ªè¯»å‘½ä»¤åˆ°æ§åˆ¶æ€»çº¿ä¸Š</p>
</li>
<li>
<p>å­˜å‚¨å™¨æ”¶åˆ°è¯»å‘½ä»¤åï¼Œæ ¹æ®åœ°å€è¯»å‡ºæŒ‡ä»¤å†…å®¹ï¼Œå¹¶æ”¾åˆ°æ•°æ®æ€»çº¿</p>
</li>
<li>
<p>æ•°æ®æ€»çº¿ä¸Šçš„æ•°æ®è¯»åˆ°MBR</p>
</li>
<li>
<p>PCä¸­è¿˜éœ€è¦é€’å¢ä¸€ä¸ªæŒ‡ä»¤é•¿åº¦ï¼Œä»¥å¾—åˆ°ä¸‹ä¸€ä¸ªæŒ‡ä»¤çš„åœ°å€</p>
</li>
</ul>
<hr>
<p><strong>Step3</strong></p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter15-4.png" title="/img/Computer Organization and Architecture/chapter15-4.png" data-thumbnail="/img/Computer Organization and Architecture/chapter15-4.png">
        
    </a>
<ul>
<li>
<p>MBRçš„å†…å®¹ä¼ é€ç»™IR</p>
</li>
<li>
<p>ä¼ é€å®Œæˆåï¼ŒMBRå°±å¯ä»¥é‡Šæ”¾ï¼Œç”¨äºä¸‹ä¸€æ­¥æ“ä½œ</p>
</li>
<li>
<p>IRä¸­ä¿å­˜çš„å°±æ˜¯ä¸‹ä¸€ä¸ªéœ€è¦æ‰§è¡Œçš„æŒ‡ä»¤</p>
</li>
<li>
<p>é€šè¿‡è¿™å‡ ä¸ªå¾®æ“ä½œï¼Œå®Œæˆäº†å–æŒ‡</p>
</li>
</ul>
<hr>
<p><strong>Fetch sequence</strong></p>
<ul>
<li>
<p>å–æŒ‡å‘¨æœŸå®é™…ä¸Šç”±ä¸‰æ­¥ã€å››ä¸ªå¾®æ“ä½œç»„æˆã€‚æ¯ä¸ªå¾®æ“ä½œéƒ½æ¶‰åŠåˆ°æ•°æ®åœ¨å¯„å­˜å™¨ä¹‹é—´çš„æµåŠ¨</p>
</li>
<li>
<p>å¦‚æœæ•°æ®çš„æµåŠ¨æ˜¯ç‹¬ç«‹çš„ï¼Œè¿™äº›æ“ä½œå¯ä»¥åœ¨åŒä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…å®Œæˆ</p>
</li>
<li>
<p>PCé€’å¢å¾®æ“ä½œï¼Œæ—¢å¯ä»¥åœ¨t2å®Œæˆï¼Œä¹Ÿå¯ä»¥åœ¨t3å®Œæˆ</p>
</li>
</ul>
<hr>
<p><strong>Rules for Micro-operations grouping</strong></p>
<ul>
<li>
<p>Proper sequence must be followed</p>
<ul>
<li>MAR &lt;- (PC) must precede MBR &lt;- (memory)</li>
</ul>
</li>
<li>
<p>Conflicts must be avoided</p>
<ul>
<li>
<p>Must not read &amp; write same register at same time</p>
</li>
<li>
<p>MBR &lt;- (memory) &amp; IR &lt;- (MBR) must not be in same cycle</p>
</li>
</ul>
</li>
<li>
<p>Also: PC &lt;- (PC) +1 involves addition</p>
<ul>
<li>
<p>Use ALU</p>
</li>
<li>
<p>May need additional micro-operations</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Indirect cycle</strong></p>
<ul>
<li>In indirect addressing, it is necessary to get the address of the operand from the memory first. This process is called indirect cycle</li>
</ul>
<hr>
<p><strong>Interrupt cycle</strong></p>
<ul>
<li>
<p>After instruction processing is completed, check whether there is an interrupt</p>
</li>
<li>
<p>Interrupt cycle needs to complete these operations</p>
<ul>
<li>
<p>The instruction address before the interrupt needs to be saved</p>
</li>
<li>
<p>Get the instruction address of the start of the interrupt handler to the PC</p>
</li>
</ul>
</li>
<li>
<p>After the PC gets the interrupt processing address, it enters the index retrieval cycle</p>
</li>
</ul>
<hr>
<p><strong>Execute cycle</strong></p>
<ul>
<li>
<p>Fetching, indirect and interruption cycle can be determined in advance</p>
<ul>
<li>Each cycle contains a fixed sequence of micro operations</li>
</ul>
</li>
<li>
<p>For execution cycle</p>
<ul>
<li>
<p>Different operation codes correspond to different operations</p>
</li>
<li>
<p>Each operation has a specific micro operation sequence</p>
</li>
</ul>
</li>
</ul>
<h4 id="flowchart-for-instruction-cycle">Flowchart for instruction cycle</h4>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter15-5.png" title="/img/Computer Organization and Architecture/chapter15-5.png" data-thumbnail="/img/Computer Organization and Architecture/chapter15-5.png">
        
    </a>
<ul>
<li>
<p>å–æŒ‡å‘¨æœŸåï¼Œçœ‹æ˜¯å¦æ˜¯é—´æ¥å¯»å€ã€‚å¦‚æœæ˜¯é—´æ¥å¯»å€ï¼Œè¿›å…¥01é—´æ¥å‘¨æœŸï¼Œå¦‚æœä¸æ˜¯ï¼Œè¿›å…¥æ‰§è¡Œå‘¨æœŸã€‚</p>
</li>
<li>
<p>é—´æ¥å‘¨æœŸåï¼Œè¯»å–åœ°å€ï¼Œç„¶åè¿›å…¥10æ‰§è¡Œå‘¨æœŸ</p>
</li>
<li>
<p>æ‰§è¡Œå‘¨æœŸï¼Œæ ¹æ®æ“ä½œç æ¥ç¡®å®šåšä»€ä¹ˆæ“ä½œã€‚ç„¶ååˆ¤æ–­æ˜¯å¦æœ‰ä¸­æ–­ã€‚å¦‚æœæœ‰ä¸­æ–­ï¼Œè¿›å…¥11ä¸­æ–­å‘¨æœŸã€‚å¦‚æœæ²¡æœ‰ï¼Œè¿›å…¥00å–æŒ‡å‘¨æœŸã€‚</p>
</li>
<li>
<p>ä¸­æ–­å‘¨æœŸï¼Œè®¾ç½®ä¸­æ–­ï¼Œç„¶åè¿›å…¥ä¸­æ–­å¤„ç†ç¨‹åºçš„å–æŒ‡å‘¨æœŸï¼Œç»§ç»­å–æŒ‡</p>
</li>
</ul>
<hr>
<ul>
<li>
<p>Control of the Processor</p>
<ul>
<li>
<p>Functional Requirements</p>
</li>
<li>
<p>Control Signals</p>
</li>
<li>
<p>A Control Signals Example</p>
</li>
<li>
<p>Internal Processor Organization</p>
</li>
</ul>
</li>
</ul>
<h4 id="functional-requirement">Functional requirement</h4>
<ul>
<li>
<p>Micro-operations are the most basic function of the processor</p>
</li>
<li>
<p>Three elements of the controller include</p>
<ul>
<li>
<p>Basic elements of processor</p>
</li>
<li>
<p>Micro-operations that processor performs</p>
</li>
<li>
<p>How to control</p>
</li>
<li>
<p>ALU</p>
</li>
<li>
<p>Registers</p>
</li>
<li>
<p>Internal data paths</p>
</li>
<li>
<p>External data paths</p>
</li>
<li>
<p>Control Unit</p>
</li>
</ul>
</li>
</ul>
<h4 id="types-of-micro-operation">Types of micro-operation</h4>
<ul>
<li>
<p>Micro-operations can be divided into the following four categories</p>
<ul>
<li>
<p>Transfer data between registers</p>
</li>
<li>
<p>Transfer data from register to external</p>
</li>
<li>
<p>Transfer data from external to register</p>
</li>
<li>
<p>Perform arithmetic or logical ops</p>
</li>
</ul>
</li>
</ul>
<h4 id="functions-of-control-unit">Functions of control unit</h4>
<ul>
<li>
<p>Operation object and operation type have been determined</p>
</li>
<li>
<p>Function of the controller is to determine how to do it</p>
<ul>
<li>
<p>Sequencing</p>
</li>
<li>
<p>Execution</p>
</li>
<li>
<p>This is done using Control Signals</p>
</li>
</ul>
</li>
</ul>
<h4 id="model-of-control-unit">Model of control unit</h4>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter15-6.png" title="/img/Computer Organization and Architecture/chapter15-6.png" data-thumbnail="/img/Computer Organization and Architecture/chapter15-6.png">
        
    </a>
<ul>
<li>
<p>æ§åˆ¶å™¨çš„è¾“å…¥åŒ…æ‹¬ï¼šæ—¶é’Ÿä¿¡å·ï¼Œå„ç§æ ‡å¿—ï¼ŒæŒ‡ä»¤å¯„å­˜å™¨ä¸­çš„æŒ‡ä»¤ï¼Œæ¥è‡ªæ§åˆ¶æ€»çº¿çš„æ§åˆ¶ä¿¡å·(ä¸­æ–­)</p>
</li>
<li>
<p>æ§åˆ¶å™¨çš„è¾“å‡ºåŒ…æ‹¬ï¼šCPUå†…éƒ¨çš„æ§åˆ¶ä¿¡å·ï¼Œåˆ°æ§åˆ¶æ€»çº¿çš„æ§åˆ¶ä¿¡å·</p>
</li>
<li>
<p><strong>æ§åˆ¶å™¨å†…éƒ¨å°±æ˜¯å¦‚ä½•æ ¹æ®è¾“å…¥ï¼Œæ¥ç”Ÿæˆæ§åˆ¶ä¿¡å·</strong></p>
</li>
</ul>
<hr>
<p><strong>Control signals</strong></p>
<ul>
<li>
<p>Clock</p>
<ul>
<li>Provide clock signal for timing of controller</li>
<li>One micro-instruction (or set of parallel micro-instructions) per clock cycle</li>
</ul>
</li>
<li>
<p>Instruction register</p>
<ul>
<li>
<p>Op-code for current instruction</p>
</li>
<li>
<p>Addressing mode</p>
</li>
<li>
<p>Determines which micro-instructions are performed</p>
</li>
</ul>
</li>
<li>
<p>Flags</p>
<ul>
<li>
<p>State of CPU</p>
</li>
<li>
<p>Results of previous operations</p>
</li>
</ul>
</li>
<li>
<p>Control signal from control bus</p>
<ul>
<li>
<p>Interrupts</p>
</li>
<li>
<p>Acknowledgements</p>
</li>
</ul>
</li>
<li>
<p>output</p>
<ul>
<li>
<p>Within CPU</p>
<ul>
<li>
<p>Cause data movement</p>
</li>
<li>
<p>Activate specific functions</p>
</li>
</ul>
</li>
<li>
<p>Via control bus</p>
<ul>
<li>
<p>To memoryï¼Œcontrol read or write</p>
</li>
<li>
<p>To I/O modules</p>
</li>
</ul>
</li>
<li>
<p><strong>It generates three types of output control signals</strong></p>
<ul>
<li>
<p>Data paths: the signals control the internal flow of data</p>
</li>
<li>
<p>ALU: the signals control the operation of the ALU</p>
</li>
<li>
<p>System bus: the control unit sends these signals to the control lines of the system bus</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="internal-organization">Internal organization</h4>
<ul>
<li>
<p>CPU adopts single bus structure</p>
<ul>
<li>
<p>All components, including ALU and registers, are connected to the bus</p>
</li>
<li>
<p>A gate is set between each component and the bus to control the data transmission between the component and the bus</p>
</li>
</ul>
</li>
<li>
<p>Data transfer to and from external systems bus is controlled by the control signal</p>
</li>
<li>
<p>Temporary registers needed for proper operation of ALU</p>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter15-7.png" title="/img/Computer Organization and Architecture/chapter15-7.png" data-thumbnail="/img/Computer Organization and Architecture/chapter15-7.png" data-sub-html="<h2>Internal processor organization</h2>">
        
    </a><figcaption class="image-caption"><code>Internal processor organization</code></figcaption>
    </figure>
<ul>
<li>
<p>å„ä¸ªå¯„å­˜å™¨éƒ½é“¾æ¥åˆ°å†…éƒ¨æ€»çº¿ä¸Šã€‚å¯„å­˜å™¨å’Œå†…éƒ¨æ€»çº¿ä¹‹é—´æœ‰ä¸ªé€»è¾‘é—¨ï¼Œç”¨äºå¯„å­˜å™¨å’Œå†…éƒ¨æ€»çº¿çš„è¿æ¥æ§åˆ¶</p>
</li>
<li>
<p>ALUæ²¡æœ‰å†…éƒ¨å­˜å‚¨éƒ¨ä»¶ã€‚å¦‚æœALUçš„æ“ä½œæ¶‰åŠ2ä¸ªæ“ä½œæ•°çš„è¯ï¼Œä¸€ä¸ªç”±å†…éƒ¨æ€»çº¿å¾—åˆ°ï¼Œå¦ä¸€ä¸ªå¿…é¡»é€šè¿‡å…¶ä»–çš„æ•°æ®æºæ¥å¾—åˆ°ï¼Œä¸èƒ½éƒ½åœ¨å†…éƒ¨æ€»çº¿ä¸Šã€‚éœ€è¦å¢åŠ ä¸€ä¸ªYå¯„å­˜å™¨ï¼Œç”¨äºä¸´æ—¶ä¿å­˜æºæ“ä½œæ•°</p>
</li>
<li>
<p>ALUè¿˜éœ€è¦æœ‰ä¸€ä¸ªå¯„å­˜å™¨ï¼Œæ¥ä¸´æ—¶ä¿å­˜è¾“å‡ºç»“æœã€‚è¿™ä¸ªç»“æœä¸èƒ½æ€»çº¿ä¸Šï¼Œå› ä¸ºå¦‚æœæ”¾æ€»çº¿ä¸Šçš„è¯ï¼Œå®ƒåˆä¼šå½“ä½œALUçš„è¾“å…¥</p>
</li>
</ul>
<h4 id="implementation-of-control-unit">Implementation of control unit</h4>
<ul>
<li>
<p>The control unit implementation can be done by two methods</p>
<ul>
<li>
<p>Hardwired implementation</p>
</li>
<li>
<p>Microprogrammed implementation</p>
</li>
</ul>
</li>
<li>
<p>Hardwired implementation: the control unit is a combinational circuit</p>
<ul>
<li>The input signals are transferred into a set of output control signals</li>
</ul>
</li>
<li>
<p>æ—¶é’Ÿå‘ç”Ÿå™¨ï¼šäº§ç”Ÿæ—¶é’Ÿä¿¡å·ï¼Œå¹¶æä¾›è®¡æ•°å™¨</p>
</li>
<li>
<p>è¯‘ç å™¨ï¼šæ ¹æ®æŒ‡ä»¤å¯„å­˜å™¨ä¸­çš„æŒ‡ä»¤æ“ä½œç ï¼Œç”Ÿæˆæ“ä½œç å¯¹åº”çš„å”¯ä¸€è¾“å‡ºï¼Œæä¾›ç»™è¾“å‡ºæ§åˆ¶å•å…ƒ</p>
</li>
<li>
<p>æ ‡å¿—ï¼šä¸ºæ§åˆ¶å•å…ƒæä¾›ç›¸å…³çš„æ ‡å¿—ä¿¡å·</p>
</li>
<li>
<p>æ§åˆ¶å•å…ƒï¼šæ˜¯æ§åˆ¶å™¨çš„æ ¸å¿ƒï¼Œè´Ÿè´£äº§ç”Ÿæ§åˆ¶ä¿¡å·</p>
</li>
</ul>
<h4 id="control-matrix">Control matrix</h4>
<ul>
<li>
<p>Programmable arrays may also be numerous</p>
</li>
<li>
<p>Large control matrices are implemented hierarchically for speed</p>
</li>
</ul>
<h4 id="problems-with-hard-wired">Problems With Hard Wired</h4>
<ul>
<li>
<p>Complex micro-operation logic</p>
</li>
<li>
<p>Difficult to design and test</p>
</li>
<li>
<p>Inflexible design</p>
</li>
<li>
<p>Difficult to add new instructions</p>
</li>
</ul>
<h4 id="summary">Summary</h4>
<ul>
<li>
<p>The instructions are divided into a sequence of stages</p>
</li>
<li>
<p>Fetch, indirect, execute, interrupt</p>
</li>
<li>
<p>Each stage is further divided into a sequence of microoperations</p>
<ul>
<li>T1, T2, T3, â€¦</li>
</ul>
</li>
<li>
<p>Each micro-operation occupies one clock unit</p>
</li>
<li>
<p>The function of the control unit is to produce a sequence of timed control signals to control the data paths and ALU operations</p>
</li>
<li>
<p>The control unit is a combinational circuit that transfers inputs to a group of control signals</p>
<ul>
<li>
<p>Inputs: flags, instruction registers, clock, control signals from system bus</p>
</li>
<li>
<p>Outputs: control signals to system bus and within CPU</p>
</li>
</ul>
</li>
</ul>
<h3 id="microprogrammed-control">Microprogrammed Control</h3>
<h4 id="basic-concepts">Basic Concepts</h4>
<ul>
<li>
<p>Control unit can be implemented by a more flexible technique called microprogrammed control unit</p>
<ul>
<li>
<p>The logic of the control unit is specified by a microprogram</p>
</li>
<li>
<p>Each line in microprogram describes a group of micro-operations in one timeï¼Œcalled microinstruction</p>
</li>
<li>
<p>Construct a control word corresponding to this microinstruction</p>
</li>
<li>
<p>The control word determines the opening or closing of all doors</p>
</li>
</ul>
</li>
<li>
<p>å¾®æŒ‡ä»¤ä¸­åŒ…æ‹¬CPUå†…æ§åˆ¶ä¿¡å·ã€ç³»ç»Ÿæ€»çº¿æ§åˆ¶ä¿¡å·ã€è·³è½¬æ¡ä»¶ã€å¾®æŒ‡ä»¤åœ°å€</p>
</li>
<li>
<p>æ‰§è¡Œè¿™æ¡å¾®æŒ‡ä»¤çš„æ•ˆæœæ˜¯ï¼Œæ‰“å¼€CPUå†…å¤–æ‰€æœ‰ä¸º1çš„æ§åˆ¶çº¿ï¼Œå…³é—­æ‰€æœ‰ä¸º0çš„æ§åˆ¶çº¿</p>
</li>
<li>
<p>å¦‚æœæ¡ä»¶æ¡ä»¶ä¸ºå‡ï¼Œè‡ªåŠ¨æ‰§è¡Œä¸‹ä¸€ä¸ªé¡ºåºçš„å¾®æŒ‡ä»¤</p>
</li>
<li>
<p>å¦‚æœè·³è½¬æ¡ä»¶ä¸ºçœŸï¼Œåˆ™æ‰§è¡Œâ€œå¾®æŒ‡ä»¤åœ°å€â€ä¸­å¯¹åº”çš„å¾®æŒ‡ä»¤</p>
</li>
</ul>
<p><strong>Micro-instruction Types</strong></p>
<ul>
<li>
<p><strong>horizontal microinstruction</strong></p>
<ul>
<li>
<p>æ°´å¹³å¾®æŒ‡ä»¤åŒ…æ‹¬å››ä¸ªéƒ¨åˆ†</p>
<ul>
<li>å†…éƒ¨æ§åˆ¶ä¿¡å·ï¼šCPUå†…çš„æ¯ä¸€ä¸ªæ§åˆ¶çº¿éƒ½æœ‰ç›¸åº”çš„1ä½</li>
<li>æ€»çº¿æ§åˆ¶ä¿¡å·ï¼šæ¯ä¸€ä¸ªç³»ç»Ÿæ§åˆ¶æ€»çº¿éƒ½æœ‰ç›¸åº”çš„1ä½</li>
<li>æ¡ä»¶å­—æ®µï¼šæŒ‡ç¤ºè½¬ç§»å‘ç”Ÿæ¡ä»¶çš„å­—æ®µ</li>
<li>å¾®æŒ‡ä»¤åœ°å€ï¼šè½¬ç§»çš„ç›®æ ‡æŒ‡ä»¤åœ°å€</li>
</ul>
</li>
<li>
<p>æ‰“å¼€ä½å€¼ä¸º1çš„æ§åˆ¶çº¿ï¼Œå…³é—­æ‰€æœ‰ä½å€¼ä¸º0çš„æ§åˆ¶çº¿ã€‚æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªå¾®æ“ä½œ</p>
</li>
<li>
<p>å¦‚æœè·³è½¬æ¡ä»¶ä¸ºå‡ï¼Œé¡ºåºæ‰§è¡Œä¸‹ä¸€ä¸ªæŒ‡ä»¤ã€‚å¦‚æœè·³è½¬æ¡ä»¶ä¸ºçœŸï¼Œæ‰§è¡Œâ€œå¾®æŒ‡ä»¤åœ°å€â€ æŒ‡å‘çš„å¾®æŒ‡ä»¤</p>
</li>
<li>
<p><strong>Characteristic</strong></p>
<ul>
<li>
<p>Each control line inside the CPU and bus needs to have a separate control bit</p>
<ul>
<li>The width of the control word is very large</li>
</ul>
</li>
<li>
<p>Each line is a separate control bit</p>
<ul>
<li>Each control line can be controlled independently</li>
<li>More kinds of micro operations that can be supported</li>
</ul>
</li>
</ul>
</li>
<li>
<p>The control lines are controlled by one bit of the control word independently</p>
<ul>
<li>The coding of control signal is not compact</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>vertical microinstruction</strong></p>
<ul>
<li>
<p>å‚ç›´å¾®æŒ‡ä»¤ä¹ŸåŒ…æ‹¬æ¡ä»¶å’Œè·³è½¬å¾®æŒ‡ä»¤åœ°å€ï¼Œè·Ÿæ°´å¹³å¾®æŒ‡ä»¤ç±»ä¼¼</p>
</li>
<li>
<p>åœ¨æ§åˆ¶æ–¹é¢ï¼Œå’Œæ°´å¹³å¾®æŒ‡ä»¤çš„æ¯ä¸€ä½å¯¹åº”ä¸€ä¸ªæ§åˆ¶çº¿ä¸åŒï¼Œå‚ç›´å¾®æŒ‡ä»¤åˆåšäº†ä¸€æ¬¡ç¼–ç </p>
</li>
<li>
<p>è§£å†³æ°´å¹³å¾®æŒ‡ä»¤çš„æ§åˆ¶å­—å¤ªé•¿çš„é—®é¢˜</p>
</li>
<li>
<p>ç¼–ç åï¼Œç”±ä¸€ä¸ªè§£ç å™¨å†ç¿»è¯‘æˆæ§åˆ¶çº¿çš„æ§åˆ¶ä¿¡å·</p>
</li>
<li>
<p><strong>Characteristic</strong></p>
<ul>
<li>
<p>Width is narrow</p>
<ul>
<li>
<p>n control signals encoded into $\log_2 n$ bits($n \rightarrow 2^n$)</p>
</li>
<li>
<p>Limited number of micro operations supported</p>
</li>
</ul>
</li>
<li>
<p>Additional steps required</p>
<ul>
<li>External memory word decode is needed</li>
<li>Identify the exact control line being manipulated</li>
<li>Send control signal</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="micro-program-word-length">Micro-program Word Length</h4>
<ul>
<li>
<p><strong>Word length is an important factor in microprogram</strong></p>
</li>
<li>
<p><strong>Word length is determined by three factors</strong>\</p>
<ul>
<li>
<p><strong>Maximum number of simultaneous micro-operations supported</strong></p>
</li>
<li>
<p><strong>The way control information is represented or encoded</strong></p>
</li>
<li>
<p><strong>The way in which the next micro-instruction address is specified</strong></p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Compromise</strong></p>
<ul>
<li>
<p>Divide control signals into disjoint groups</p>
</li>
<li>
<p>Implement each group as separate field in memory word</p>
</li>
<li>
<p>Supports reasonable levels of parallelism without too much complexity</p>
</li>
</ul>
<h4 id="the-control-memory">The control memory</h4>
<ul>
<li>
<p>The control words are put into a special memory block called control memory, with each word having a unique address</p>
</li>
<li>
<p>The microinstructions are organized as different routines</p>
<ul>
<li>
<p>The microinstructions in each routine are executed sequentially</p>
</li>
<li>
<p>Each routine ends with a branch instruction points to the next routine</p>
</li>
</ul>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter15-8.png" title="/img/Computer Organization and Architecture/chapter15-8.png" data-thumbnail="/img/Computer Organization and Architecture/chapter15-8.png" data-sub-html="<h2>Control memory</h2>">
        
    </a><figcaption class="image-caption"><code>Control memory</code></figcaption>
    </figure>
<ul>
<li>
<p>å­˜å‚¨æ§åˆ¶å™¨ä¸­å­˜å‚¨äº†å–æŒ‡ä¾‹ç¨‹ã€é—´æ¥ä¾‹ç¨‹ã€ä¸­æ–­ä¾‹ç¨‹ã€æ‰§è¡Œä¾‹ç¨‹ç­‰ï¼Œè¿™äº›ä¾‹ç¨‹è§„å®šäº†åœ¨æ¯ä¸ªå‘¨æœŸå†…éœ€è¦æ‰§è¡Œçš„å¾®æ“ä½œåºåˆ—</p>
</li>
<li>
<p>ä¾‹ç¨‹ä¸­è¿˜è§„å®šäº†åœ¨æ‰§è¡Œç»“æŸåè½¬ç§»åˆ°ä¸‹é¢å“ªä¸€ä¸ªä¾‹ç¨‹ï¼Œä¹Ÿå°±æ˜¯æŒ‡å®šäº†å‘¨æœŸçš„æ‰§è¡Œé¡ºåº</p>
</li>
<li>
<p>ä¾‹å¦‚ï¼Œå–æŒ‡å‘¨æœŸåï¼Œå¯èƒ½ä¼šåˆ°é—´æ¥å‘¨æœŸï¼Œä¹Ÿå¯èƒ½åˆ°æ‰§è¡Œå‘¨æœŸï¼Œéœ€è¦æ ¹æ®å–æŒ‡å‘¨æœŸæ¥ç¡®å®š</p>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter15-9.png" title="/img/Computer Organization and Architecture/chapter15-9.png" data-thumbnail="/img/Computer Organization and Architecture/chapter15-9.png" data-sub-html="<h2>Control Unit Microarchitecture</h2>">
        
    </a><figcaption class="image-caption"><code>Control Unit Microarchitecture</code></figcaption>
    </figure>
<ul>
<li>
<p><strong>Sequencing logic</strong></p>
</li>
<li>
<p><strong>Control address register</strong></p>
</li>
<li>
<p><strong>Control memory</strong></p>
</li>
<li>
<p><strong>Control buffer register</strong></p>
</li>
<li>
<p>æ§åˆ¶å­˜å‚¨å™¨ï¼šå­˜å‚¨å¾®æŒ‡ä»¤</p>
</li>
<li>
<p>æ§åˆ¶åœ°å€å¯„å­˜å™¨ï¼šåŒ…å«ä¸‹ä¸€ä¸ªå°†è¦è¢«è¯»å–çš„å¾®æŒ‡ä»¤åœ°å€ã€‚ç±»ä¼¼äºPC</p>
</li>
<li>
<p>æ§åˆ¶ç¼“å†²å¯„å­˜å™¨ï¼šå¾®æŒ‡ä»¤ç”±æ§åˆ¶å­˜å‚¨å™¨è¯»å–ä¹‹åï¼Œæ”¾åˆ°æ§åˆ¶ç¼“å†²å¯„å­˜å™¨ä¸­ã€‚æ§åˆ¶ç¼“å†²å¯„å­˜å™¨çš„å·¦åŠéƒ¨åˆ†ç›´æ¥å’Œæ§åˆ¶çº¿è¿æ¥ï¼Œè¯»å–å¾®æŒ‡ä»¤ç›´æ¥ç”Ÿæˆæ§åˆ¶ä¿¡å·ï¼Œæ§åˆ¶é—¨çš„å¼€æˆ–å…³</p>
</li>
<li>
<p>å®šåºé€»è¾‘ï¼šè´Ÿè´£ä¸ºæ§åˆ¶åœ°å€å¯„å­˜å™¨æä¾›åœ°å€ï¼Œå¹¶å‘å‡ºè¯»å‘½ä»¤</p>
</li>
</ul>
<h4 id="control-unit-function">Control Unit Function</h4>
<ul>
<li>
<p>Sequence logic unit issues read command</p>
<ul>
<li>
<p>Word specified in control address register is read into control buffer register</p>
</li>
<li>
<p>Control buffer register contents generates control signals and next address information</p>
</li>
</ul>
</li>
<li>
<p>Sequence logic loads new address into control address register based on next address information from control buffer register and ALU flags</p>
</li>
</ul>
<h4 id="next-address-decision">Next Address Decision</h4>
<ul>
<li>
<p>Sequencing logic needs to determine the next microinstruction</p>
<ul>
<li>At the end of each microinstruction, the next microinstruction address is loaded into the control address register</li>
</ul>
</li>
<li>
<p>Depending on ALU flags and control buffer register</p>
<ul>
<li>
<p>Next microinstruction in sequence</p>
</li>
<li>
<p>Jump to a new routine based on jump instructions</p>
</li>
<li>
<p>Jump to a machine instruction routine</p>
</li>
</ul>
</li>
</ul>
<h4 id="next-address">Next Address</h4>
<ul>
<li>
<p>Next microinstruction in sequence</p>
<ul>
<li>Add 1 to control address register</li>
</ul>
</li>
<li>
<p>Jump to new routine based on jump microinstruction</p>
<ul>
<li>Load address field of control buffer register into control address register</li>
</ul>
</li>
<li>
<p>Jump to machine instruction routine</p>
<ul>
<li>Load control address register based on opcode in IR</li>
</ul>
</li>
</ul>
<hr>
<ol>
<li>
<p>æŒ‡ä»¤è¯‘ç å™¨æ˜¯å°†æŒ‡ä»¤å¯„å­˜å™¨ä¸­çš„æ“ä½œç ç¿»è¯‘æˆæ§åˆ¶å¯„å­˜å™¨åœ°å€</p>
</li>
<li>
<p>æ§åˆ¶åœ°å€å¯„å­˜å™¨åˆ°æ§åˆ¶å­˜å‚¨å™¨ä¸­æ‰¾åˆ°æ§åˆ¶å­—ï¼Œå¹¶æ”¾åˆ°æ§åˆ¶ç¼“å†²å¯„å­˜å™¨ä¸­</p>
</li>
<li>
<p><strong>æ§åˆ¶ç¼“å†²å¯„å­˜å™¨è¿›è¡Œæ§åˆ¶æ“ä½œã€‚å¦‚æœæ˜¯å‚ç›´å¾®æŒ‡ä»¤ï¼Œåˆ™éœ€è¦è¯‘ç å™¨è¿›è¡Œè¯‘ç åç”Ÿæˆæ§åˆ¶ä¿¡å·</strong></p>
</li>
<li>
<p>æ§åˆ¶ä¿¡å·è¯‘ç å™¨ç”¨äºå‚ç›´å¾®æŒ‡ä»¤ï¼Œå°†æ§åˆ¶å­—ç¿»è¯‘æˆæ§åˆ¶çº¿çš„æ§åˆ¶ä¿¡å·ï¼Œå‘é€åˆ°CPUå†…éƒ¨å’Œç³»ç»Ÿæ€»çº¿</p>
</li>
<li>
<p>å¯¹äºå‚ç›´å¾®æŒ‡ä»¤ï¼Œæœ‰ä¸€ä¸ªé™„åŠ é€»è¾‘å’Œæ—¶é—´å»¶è¿Ÿ</p>
</li>
<li>
<p>ä¸‹ä¸€ä¸ªå¾®æŒ‡ä»¤åœ°å€ç»™å®šåºé€»è¾‘ï¼Œä»¥ç¡®å®šæ‰§è¡Œå“ªä¸€ä¸ªå¾®æŒ‡ä»¤</p>
</li>
</ol>
<h4 id="simple-summary">Simple summary</h4>
<ul>
<li>
<p>All the control unit does is generate a set of control signals</p>
<ul>
<li>
<p>Control the opening and closing of each gate</p>
</li>
<li>
<p>Use one control bit to represent the control signal of a door</p>
</li>
<li>
<p>Control bits of all gates constitute control words</p>
</li>
</ul>
</li>
<li>
<p>Have a control word for each group of micro-operations in one time</p>
</li>
<li>
<p>The next microinstruction can be specified in the microinstruction and executed conditionally</p>
</li>
</ul>
<hr>
<ul>
<li>
<p>For machine code instruction</p>
<ul>
<li>
<p>It is generally divided into multiple cycles, such as fetch cycle, execution cycle, etc</p>
</li>
<li>
<p>Multiple microoperations need to be completed</p>
</li>
<li>
<p>Each microoperation corresponds to one control word</p>
</li>
<li>
<p>A group of control words realizes the control function of a machine code</p>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p>Todayâ€™s large microprocessor</p>
<ul>
<li>
<p>Many instructions and associated register-level hardware</p>
</li>
<li>
<p>Many control points to be manipulated</p>
</li>
</ul>
</li>
<li>
<p>This results in control memory that</p>
<ul>
<li>
<p>Contains a large number of wordsï¼Œco-responding to the number of instructions to be executed</p>
</li>
<li>
<p>Has a wide word widthï¼Œdue to the large number of control points to be manipulated</p>
</li>
</ul>
</li>
</ul>
<h4 id="advantages-and-disadvantages">Advantages and Disadvantages</h4>
<ul>
<li>
<p>Advantages</p>
<ul>
<li>
<p>Simplifies design of control unit</p>
</li>
<li>
<p>Cheaper</p>
</li>
<li>
<p>Less error-prone</p>
</li>
</ul>
</li>
<li>
<p>Disadvantages</p>
<ul>
<li>
<p>Additional processing required</p>
</li>
<li>
<p>Slower</p>
</li>
</ul>
</li>
</ul>
<h4 id="microinstruction-sequencing">Microinstruction Sequencing</h4>
<ul>
<li>
<p>Microinstruction controller has two basic tasks</p>
<ul>
<li>
<p>Microinstruction sequencingï¼š Get the next microinstruction from the control memory</p>
</li>
<li>
<p>Microinstruction execution : Through control word generates control signal for executing the micro instruction</p>
</li>
</ul>
</li>
<li>
<p>Must consider both together</p>
<ul>
<li>Affects instruction format and controller timing</li>
</ul>
</li>
</ul>
<h4 id="sequencing-techniques">Sequencing Techniques</h4>
<ul>
<li>
<p>Two problems must be considered</p>
<ul>
<li>
<p>Size of microinstructions</p>
</li>
<li>
<p>Address generation time</p>
</li>
</ul>
</li>
<li>
<p>Size of microinstructions</p>
<ul>
<li>The larger the microinstruction, the larger the control memory, and the more expensive</li>
<li>Size of microinstructions should be reduced</li>
</ul>
</li>
<li>
<p>Address generation time</p>
<ul>
<li>The requirement to execute microinstructions as quickly as possible</li>
</ul>
</li>
</ul>
<h5 id="address-generation-time">Address generation time</h5>
<ul>
<li>
<p>Determined by instruction register</p>
<ul>
<li>Once per cycle, after instruction is fetched</li>
</ul>
</li>
<li>
<p>Next sequential address</p>
<ul>
<li>Use in most cases</li>
</ul>
</li>
<li>
<p>Branch</p>
<ul>
<li>
<p>Both conditional and unconditional</p>
</li>
<li>
<p>Generally, there is a jump after 3-4 microinstructions</p>
</li>
<li>
<p>Very important</p>
</li>
</ul>
</li>
</ul>
<h5 id="sequencing-techniques-1">Sequencing Techniques</h5>
<ul>
<li>
<p>Based on current microinstruction, condition flags, contents of IR, generate control memory address of next microinstruction</p>
</li>
<li>
<p>The jump of microinstructions can be divided into three modes according to the address information format in the microinstructions</p>
<ul>
<li>
<p>Two address fields</p>
<ul>
<li>
<p>å¯¹äºåŒåœ°å€å­—æ®µæ¨¡å¼ï¼Œå¾®æŒ‡ä»¤ä¸­æä¾›äº†2ä¸ªåœ°å€å­—æ®µ</p>
</li>
<li>
<p>æ§åˆ¶ç¼“å†²å¯„å­˜å™¨è¯»å–å¾®æŒ‡ä»¤åï¼Œç¬¬ä¸€éƒ¨åˆ†äº§ç”Ÿæ§åˆ¶ä¿¡å·ï¼Œç¬¬äºŒéƒ¨åˆ†å’Œç¬¬ä¸‰éƒ¨åˆ†æ˜¯2ä¸ªåœ°å€ï¼Œè¿™2ä¸ªåœ°å€ï¼ŒåŠ ä¸ŠæŒ‡ä»¤å¯„å­˜å™¨çš„å†…å®¹ï¼Œè¿æ¥åˆ°ä¸€ä¸ªå¤šè·¯å™¨ä¸­ã€‚å¤šè·¯å™¨é€‰æ‹©ä¸€ä¸ªé€åˆ°æ§åˆ¶åœ°å€å¯„å­˜å™¨ä¸­</p>
</li>
<li>
<p>æ§åˆ¶åœ°å€å¯„å­˜å™¨é€šè¿‡è¯‘ç ï¼Œäº§ç”Ÿä¸‹ä¸€ä¸ªå¾®æŒ‡ä»¤çš„åœ°å€ã€‚åœ°å€é€‰æ‹©çš„è¾“å…¥æ˜¯ç”±è½¬ç§»é€»è¾‘æ¨¡å—æ¥å®Œæˆçš„ï¼Œå®ƒæ ¹æ®å¾®æŒ‡ä»¤ä¸­çš„æ§åˆ¶éƒ¨åˆ†ï¼Œä»¥åŠæ ‡å¿—ä½ï¼Œå‘å¤šè·¯å™¨æä¾›é€‰æ‹©ä¿¡å·</p>
</li>
<li>
<p>åŒåœ°å€å­—æ®µæ–¹å¼æ¯”è¾ƒç®€å•ï¼Œå¾®æŒ‡ä»¤ä¸­æœ‰2ä¸ªåœ°å€ï¼Œéœ€è¦æ›´å¤šçš„ä½</p>
</li>
</ul>
</li>
<li>
<p>Single address field</p>
<ul>
<li>
<p>å•åœ°å€å­—æ®µæ–¹å¼ä¸­ï¼Œå¾®æŒ‡ä»¤ä¸­åªæœ‰ä¸€ä¸ªåœ°å€ã€‚ä¸‹ä¸€ä¸ªåœ°å€çš„é€‰æ‹©æ–¹æ³•æ˜¯ï¼š</p>
<ul>
<li>
<p>åœ°å€å­—æ®µä¸­æŒ‡å®šçš„åœ°å€</p>
</li>
<li>
<p>æŒ‡ä»¤å¯„å­˜å™¨ä¸­çš„ä»£ç </p>
</li>
<li>
<p>ä¸‹ä¸€ä¸ªé¡ºåºåœ°å€</p>
</li>
</ul>
</li>
<li>
<p>ä¸‹ä¸€ä¸ªé¡ºåºåœ°å€æ˜¯ç”¨ä¸Šä¸€æ¬¡çš„æ§åˆ¶åœ°å€å¯„å­˜å™¨ä¸­çš„åœ°å€+1æ¥å¾—åˆ°çš„</p>
</li>
</ul>
</li>
<li>
<p>Variable format</p>
<ul>
<li>
<p>å¯å˜æ ¼å¼æä¾›ä¸¤ç§ä¸åŒæ ¼å¼çš„æŒ‡ä»¤ã€‚ç”¨1ä½æ¥æ ‡è¯†å½“å‰æ˜¯å“ªç§æ ¼å¼ã€‚</p>
</li>
<li>
<p>åœ¨ä¸€ç§æ ¼å¼ä¸­ï¼Œæ‰€æœ‰ä½éƒ½ç”¨äºäº§ç”Ÿæ§åˆ¶ä¿¡å·ã€‚æ‰€ä»¥ï¼Œä¸‹ä¸€ä¸ªå¾®æŒ‡ä»¤çš„åœ°å€ï¼Œæˆ–è€…æ˜¯ä¸‹ä¸€é¡ºåºåœ°å€ï¼Œæˆ–è€…æ˜¯ç”±æŒ‡ä»¤å¯„å­˜å™¨æ¥æŒ‡å®š</p>
</li>
<li>
<p>å¦ä¸€ç§æ ¼å¼ä¸­ï¼Œæœ‰ä¸€äº›ä½ç”¨äºå¯åŠ¨è½¬ç§»é€»è¾‘æ¨¡å—ï¼Œå…¶ä½™çš„ä½æ¥æä¾›åœ°å€ã€‚è¿™æ ·å°±å¯ä»¥è¿›è¡Œæ¡ä»¶æˆ–è€…æ— æ¡ä»¶è½¬ç§»</p>
</li>
<li>
<p>è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹æ˜¯è½¬ç§»å¾®æŒ‡ä»¤éœ€è¦èŠ±è´¹ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸ</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="microinstruction-execution">Microinstruction Execution</h4>
<ul>
<li>
<p>Microinstruction execution is a periodic basic even</p>
</li>
<li>
<p>Each cycle is made up of two events</p>
<ul>
<li>
<p>Fetch</p>
</li>
<li>
<p>Execute</p>
</li>
</ul>
</li>
<li>
<p>Fetch</p>
<ul>
<li>Get the microinstruction from the control memory according to the generated microinstruction address</li>
</ul>
</li>
<li>
<p>Execute</p>
<ul>
<li>Execute microinstructions and generate control signals</li>
</ul>
</li>
</ul>
<h4 id="execution-effect">Execution effect</h4>
<ul>
<li>
<p>Effect is to generate control signals</p>
</li>
<li>
<p>Internal</p>
<ul>
<li>
<p>Control signals inside the processor</p>
</li>
<li>
<p>Control the internal components of the processor</p>
</li>
</ul>
</li>
<li>
<p>External</p>
<ul>
<li>
<p>Control signals to external control bus or other interface</p>
</li>
<li>
<p>Control disk read-write, I/O read-write etc</p>
</li>
</ul>
</li>
<li>
<p>With the function to generate next address</p>
</li>
</ul>
<h4 id="summary-1">Summary</h4>
<ul>
<li>
<p>A microprogrammed control unit is a relatively simple logic circuit that is capable of</p>
<ul>
<li>
<p>Sequencing through microinstructions</p>
</li>
<li>
<p>Generating control signals to execute each microinstruction</p>
</li>
</ul>
</li>
</ul>
]]></description>
</item>
<item>
    <title>Computer Organization and Architecture Instruction Level Parallelism and Superscalar Processors</title>
    <link>https://Jungle430.github.io/posts/computer-organization-and-architecture/computer-organization-and-architecture-instruction-level-parallelism-and-superscalar-processors/</link>
    <pubDate>Mon, 30 Jan 2023 16:28:39 &#43;0800</pubDate><author>1239946358@qq.com (Jungle)</author><guid>https://Jungle430.github.io/posts/computer-organization-and-architecture/computer-organization-and-architecture-instruction-level-parallelism-and-superscalar-processors/</guid>
    <description><![CDATA[<h1 id="computer-organization-and-architecture">Computer Organization and Architecture</h1>
<h2 id="instruction-level-parallelism-and-superscalar-processors">Instruction Level Parallelism and Superscalar Processors</h2>
<h3 id="outline">Outline</h3>
<ul>
<li>
<p>Overview of Superscalar</p>
</li>
<li>
<p>Design Issues of Superscalar</p>
</li>
<li>
<p>Superscalar in Pentium</p>
</li>
<li>
<p>Superscalar in ARM CORTEX-A8</p>
</li>
</ul>
<h3 id="overview-of-superscalar">Overview of Superscalar</h3>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter14-1.png" title="/img/Computer Organization and Architecture/chapter14-1.png" data-thumbnail="/img/Computer Organization and Architecture/chapter14-1.png" data-sub-html="<h2>Ideal pipeline</h2>">
        
    </a><figcaption class="image-caption"><code>Ideal pipeline</code></figcaption>
    </figure>
<ul>
<li>
<p>ç†æƒ³çš„æŒ‡ä»¤æµæ°´çº¿çš„æ‰§è¡Œè¿‡ç¨‹</p>
</li>
<li>
<p>æŒ‡ä»¤æ‰§è¡Œåˆ†ä¸º6ä¸ªé˜¶æ®µï¼Œä¸”ä¸å…±äº«èµ„æº</p>
</li>
<li>
<p>æ¯ä¸ªæ—¶é—´å•ä½éƒ½ä¼šæœ‰1ä¸ªæŒ‡ä»¤å®Œæˆæ‰§è¡Œ</p>
</li>
<li>
<p>æŒ‡ä»¤æ•°é‡è¶³å¤Ÿå¤šæ—¶ï¼Œæ‰§è¡Œæ•ˆç‡ä¸ºåŸæ¥çš„6å€</p>
</li>
</ul>
<hr>
<p><strong>Actual pipeline</strong></p>
<ul>
<li>
<p>Not all instructions require the same steps</p>
<ul>
<li>Some pipeline stages are idle</li>
</ul>
</li>
<li>
<p>Running time of different pipeline stages is different</p>
<ul>
<li>running time of some pipeline stages is wasted</li>
</ul>
</li>
<li>
<p>Instructions are not independent of each other</p>
<ul>
<li>Poor operation of the pipeline</li>
</ul>
</li>
</ul>
<h4 id="problem-about-pipeline">Problem about pipeline</h4>
<ul>
<li>
<p>The pipeline pauses due to dependencies between instructions, which is called pipeline risk</p>
</li>
<li>
<p>There are three types of dependencies</p>
<ul>
<li>
<p>Data dependence</p>
</li>
<li>
<p>Control dependence</p>
</li>
<li>
<p>resource dependence</p>
</li>
</ul>
</li>
</ul>
<h4 id="question">Question</h4>
<ul>
<li>
<p>Is instruction pipelining truly parallel?</p>
<ul>
<li>
<p>Yes: There are indeed multiple instructions in the pipeline being processed at the same time</p>
</li>
<li>
<p>No: multiple instructions do not enter the pipeline at the same time</p>
</li>
</ul>
</li>
<li>
<p>How to further improve the execution efficiency of instructions?</p>
<ul>
<li>
<p>Optimize pipeline: super pipeline</p>
</li>
<li>
<p>True instruction level parallelism: superscalar pipelining</p>
</li>
</ul>
</li>
</ul>
<h4 id="superpipeline">Superpipeline</h4>
<ul>
<li>
<p>In an ordinary pipeline, each clock cycle can complete processing of one pipeline stage</p>
</li>
<li>
<p>Many pipeline stages need less than half a clock cycle</p>
</li>
<li>
<p>Superpipeline</p>
<ul>
<li>
<p>Double internal clock rate is adopted for instruction scheduling</p>
</li>
<li>
<p>Double internal clock speed gets two tasks per external clock cycle</p>
</li>
</ul>
</li>
<li>
<p>Get twice the instruction throughput</p>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter14-2.png" title="/img/Computer Organization and Architecture/chapter14-2.png" data-thumbnail="/img/Computer Organization and Architecture/chapter14-2.png">
        
    </a>
<ul>
<li>
<p>å››é˜¶æ®µæµæ°´çº¿ï¼ŒæŒ‡ä»¤åˆ’åˆ†ä¸º4ä¸ªé˜¶æ®µ</p>
</li>
<li>
<p>æ™®é€šæµæ°´çº¿ä¸­ï¼Œæ¯ä¸ªé˜¶æ®µéœ€è¦1ä¸ªæ—¶é’Ÿå‘¨æœŸæ¥å®Œæˆã€‚æœ€é«˜èƒ½è¾¾åˆ°4å€çš„æŒ‡ä»¤æ‰§è¡Œæ•ˆç‡ï¼Œæ¯ä¸ªæ—¶é’Ÿå‘¨æœŸå¯ä»¥è¾“å‡º1ä¸ªæŒ‡ä»¤çš„æ‰§è¡Œç»“æœ</p>
</li>
<li>
<p>è¶…çº§æµæ°´çº¿ã€‚é€šè¿‡é‡‡ç”¨åŒå€å†…éƒ¨æ—¶é’Ÿçš„æ–¹å¼ï¼Œæ¯0.5ä¸ªå¤–éƒ¨æ—¶é’Ÿå‘¨æœŸï¼Œå°±èƒ½å®Œæˆ1ä¸ªæŒ‡ä»¤é˜¶æ®µçš„æ‰§è¡Œã€‚æœ€é«˜èƒ½è¾¾åˆ°8å€çš„æ‰§è¡Œæ•ˆç‡</p>
</li>
</ul>
<h5 id="limit-of-superpipeline">Limit of Superpipeline</h5>
<ul>
<li>
<p>The effect is similar to that of increasing the main frequency</p>
</li>
<li>
<p><strong>It is still not really instruction level parallelism</strong></p>
</li>
<li>
<p>The overall performance is limited by the clock cycle and the length of time the instruction phase executes</p>
<ul>
<li>Long execution phases affect overall performance</li>
</ul>
</li>
<li>
<p><strong>Another technology-superscalar</strong></p>
</li>
</ul>
<h4 id="vector-and-scalar">Vector and Scalar</h4>
<ul>
<li>
<p>Scalar</p>
<ul>
<li>
<p>Also called â€œvector freeâ€. Some physical quantities have only numerical value, but no direction. Some of them are positive or negative</p>
</li>
<li>
<p>A single number used to represent a single attribute of a thing</p>
</li>
<li>
<p>For example: temperature, length</p>
</li>
</ul>
</li>
<li>
<p>Vector</p>
<ul>
<li>
<p>Originally refers to a quantity with size and direction</p>
</li>
<li>
<p>A group of orderly arranged numbers used to demarcate the quantitative characteristics of things</p>
</li>
<li>
<p>For example: the position of a point in the plane coordinate system$ (x, y) $</p>
</li>
</ul>
</li>
</ul>
<h5 id="scalar-instruction">Scalar instruction</h5>
<ul>
<li>
<p>The instructions that do not have vector processing functions and only operate on a single quantity, namely a scalar quantity, are called scalar instructions</p>
</li>
<li>
<p>Most instructions are scalar</p>
</li>
</ul>
<h5 id="vector-instruction">Vector instruction</h5>
<ul>
<li>
<p>The basic operating object is a vector, that is, a group of numbers arranged in order</p>
</li>
<li>
<p>The instruction determines the address of the vector operand and directly or implicitly specifies vector parameters such as increment, vector length, etc</p>
</li>
<li>
<p>The vector instruction specifies that the processor processes vector according to the same operation, which can effectively improve the operation speed</p>
</li>
<li>
<p>Some mainframes are equipped with vector operation instruction systems with complete functions</p>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter14-3.png" title="/img/Computer Organization and Architecture/chapter14-3.png" data-thumbnail="/img/Computer Organization and Architecture/chapter14-3.png" data-sub-html="<h2>Superscalar</h2>">
        
    </a><figcaption class="image-caption"><code>Superscalar</code></figcaption>
    </figure>
<ul>
<li>
<p>è¶…æ ‡é‡é‡‡ç”¨äº†2ä¸ªç‹¬ç«‹çš„æµæ°´çº¿</p>
</li>
<li>
<p>æ¯ä¸ªæµæ°´çº¿éƒ½å¯ä»¥å†è¿›è¡ŒæŒ‡ä»¤çš„å¹¶è¡Œè¿è¡Œ</p>
</li>
<li>
<p>èƒ½å¤Ÿå¹¶è¡Œæ‰§è¡Œæ¯ä¸ªé˜¶æ®µçš„2ä¸ªæŒ‡ä»¤</p>
</li>
<li>
<p>åœ¨ç¨³å®šè¿è¡Œçš„çŠ¶æ€ä¸‹ï¼Œå¯ä»¥è¾¾åˆ°8å€çš„æ‰§è¡Œæ•ˆç‡</p>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter14-4.png" title="/img/Computer Organization and Architecture/chapter14-4.png" data-thumbnail="/img/Computer Organization and Architecture/chapter14-4.png" data-sub-html="<h2>Ceneral Superscalar organization</h2>">
        
    </a><figcaption class="image-caption"><code>Ceneral Superscalar organization</code></figcaption>
    </figure>
<ul>
<li>
<p>åŒ…å«äº†2ä¸ªæ•´æ•°è¿ç®—å•å…ƒï¼Œ2ä¸ªæµ®ç‚¹æ•°è¿ç®—å•å…ƒï¼Œä¸€ä¸ªå­˜å‚¨å•å…ƒ</p>
</li>
<li>
<p>æ•´æ•°è¿ç®—å•å…ƒä¸­ï¼Œå…è®¸æœ‰2ä¸ªæŒ‡ä»¤å¹¶è¡Œæ‰§è¡Œï¼Œæµ®ç‚¹æ•°è¿ç®—å•å…ƒä¹Ÿå…è®¸2ä¸ªæµ®ç‚¹æŒ‡ä»¤åŒæ—¶è¿è¡Œã€‚ä¸æ­¤åŒæ—¶ï¼Œ1ä¸ªå­˜å‚¨å™¨æ“ä½œä¹Ÿå¯ä»¥å¹¶è¡Œæ¥æ‰§è¡Œ</p>
</li>
<li>
<p>è¿™ä¸ªç»“æ„ä¸­ï¼ŒåŒæ—¶å…è®¸5ä¸ªæŒ‡ä»¤å¹¶è¡Œæ‰§è¡Œ</p>
</li>
</ul>
<h4 id="key-problem-of-superscalar">Key problem of superscalar</h4>
<ul>
<li>
<p>Superscalar implementations raise a number of complex design issues related to the instruction pipeline</p>
<ul>
<li>
<p>First, the relevance of the pipeline itself still exists</p>
</li>
<li>
<p>Multiple pipelines bring more complex correlation problems</p>
</li>
</ul>
</li>
<li>
<p>The compiler is required to have more complex optimization techniques to achieve greater instruction level parallelism</p>
</li>
</ul>
<h5 id="application-of-superscalar">Application of superscalar</h5>
<ul>
<li>
<p><strong>Superscalar technology itself is proposed and developed with the development of RISC technology</strong></p>
</li>
<li>
<p>RISC processors also tend to use superscalar technology</p>
</li>
<li>
<p><strong>Although RISC machine lends itself readily to superscalar techniques, the superscalar approach can be used on either a RISC or CISC architecture</strong></p>
</li>
<li>
<p><strong>Superscalar approach has now become the standard method for implementing high-performance microprocessors</strong></p>
</li>
</ul>
<h4 id="factors-limiting-parallelism">Factors limiting parallelism</h4>
<ul>
<li>
<p>Instruction level parallelism</p>
<ul>
<li>The degree to which program instructions can be executed in parallel</li>
</ul>
</li>
<li>
<p>Compiler capabilities</p>
<ul>
<li>The compiler can maximize instruction level parallelism of programs</li>
</ul>
</li>
<li>
<p>Hardware techniques</p>
<ul>
<li>Hardware capability supports parallel operation of instructions</li>
</ul>
</li>
</ul>
<h4 id="limitations">Limitations</h4>
<ul>
<li>
<p>The most important reason for limiting instruction level parallelism is the correlation between instructions in the program</p>
</li>
<li>
<p>The dependencies between instructions include</p>
<ul>
<li>
<p>True data dependency</p>
</li>
<li>
<p>Output dependency</p>
</li>
<li>
<p>Anti-dependency</p>
</li>
<li>
<p>Procedural dependency</p>
</li>
<li>
<p>Resource conflicts</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>True Data Dependency</strong></p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter14-5.png" title="/img/Computer Organization and Architecture/chapter14-5.png" data-thumbnail="/img/Computer Organization and Architecture/chapter14-5.png">
        
    </a>
<ul>
<li>
<p>I0å’Œi1èƒ½å¤ŸåŒæ—¶è¿›è¡Œå–æŒ‡å’Œè§£ç </p>
</li>
<li>
<p><strong>ä½†æ˜¯ç”±äºi1å–çš„æ“ä½œæ•°æ˜¯i0çš„ç»“æœï¼Œæ‰€ä»¥å¿…é¡»è¦ç­‰åˆ°i0æ‰§è¡Œå®Œä¹‹åï¼Œi1æ‰èƒ½è¿›è¡Œå–æŒ‡</strong></p>
</li>
<li>
<p>ç¬¬äºŒæ¡æŒ‡ä»¤å­˜åœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸçš„å»¶è¿Ÿ</p>
</li>
<li>
<p><strong>å…ˆå†™åè¯»ï¼Œä¹Ÿç§°ä¸ºâ€œå†™åè¯»ç›¸å…³æ€§â€</strong></p>
</li>
<li>
<p><strong>è¿™ç§ç›¸å…³æ€§å’ŒæŒ‡ä»¤çš„æ‰§è¡Œé¡ºåºä¸¥æ ¼ç›¸å…³ï¼Œæ˜¯çœŸå®çš„ç›¸å…³æ€§</strong></p>
</li>
</ul>
<hr>
<p><strong>Procedural dependency</strong></p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter14-6.png" title="/img/Computer Organization and Architecture/chapter14-6.png" data-thumbnail="/img/Computer Organization and Architecture/chapter14-6.png">
        
    </a>
<ul>
<li>
<p>åˆ†æ”¯å‰å’Œåˆ†æ”¯åçš„æŒ‡ä»¤ä¸èƒ½å¹¶è¡Œæ‰§è¡Œ</p>
</li>
<li>
<p>å¦‚æœæŒ‡ä»¤éå®šé•¿ï¼Œåˆ™å¿…é¡»å¯¹æŒ‡ä»¤è¿›è¡Œè§£ç ï¼Œæ‰èƒ½ç¡®å®šå–å¤šé•¿çš„æŒ‡ä»¤</p>
</li>
<li>
<p><strong>å¦‚æœä½¿ç”¨çš„æ˜¯å˜é•¿æŒ‡ä»¤ï¼Œåœ¨å–åç»­æŒ‡ä»¤ä¹‹å‰ï¼Œå‰ä¸€ä¸ªæŒ‡ä»¤å¿…é¡»è¦éƒ¨åˆ†è¯‘ç ï¼Œå¦åˆ™ä¸‹ä¸€ä¸ªæŒ‡ä»¤ä¸çŸ¥é“ä»å†…å­˜çš„å“ªä¸ªä½ç½®å»å–ï¼Œè¿™é˜»æ­¢äº†åŒæ—¶å–æŒ‡çš„æ“ä½œ</strong></p>
</li>
<li>
<p>è¶…æ ‡é‡æ›´é€‚åˆRISCæ¶æ„çš„ç†ç”±ä¹‹ä¸€ï¼Œå› ä¸ºRISCçš„æŒ‡ä»¤éƒ½æ˜¯å®šé•¿çš„ï¼Œä¸ä¼šæœ‰è¿™ç§ç›¸å…³æ€§</p>
</li>
</ul>
<hr>
<p><strong>Resource conflict</strong></p>
<ul>
<li>
<p>èµ„æºå†²çªï¼Œä¹Ÿç§°ä¸ºèµ„æºç›¸å…³æ€§</p>
</li>
<li>
<p>æŒ‡ä»¤i0å’Œi1åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œéƒ½éœ€è¦ç”¨åˆ°åŒä¸€ä¸ªåŠŸèƒ½å•å…ƒï¼Œæ‰€ä»¥ä»–ä»¬ä¸èƒ½å¹¶è¡Œæ‰§è¡Œï¼Œåªèƒ½ä¸²è¡Œå¤„ç†ã€‚è¿™é‡Œæµªè´¹äº†ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸ</p>
</li>
<li>
<p>èµ„æºå†²çªå’Œæ•°æ®ç›¸å…³æ€§çš„è¡¨ç°å·®ä¸å¤šï¼Œä½†æ˜¯èµ„æºå†²çªå¯ä»¥é€šè¿‡å¤åˆ¶èµ„æºæ¥è§£å†³ï¼Œä¾‹å¦‚åœ¨å‰é¢è®²åˆ°çš„å¢åŠ å¹²è¡£æœº</p>
</li>
</ul>
<h3 id="design-issues-of-superscalar">Design Issues of Superscalar</h3>
<h4 id="parallelism">Parallelism</h4>
<ul>
<li>
<p><strong>Factors limiting parallelism</strong></p>
<ul>
<li>
<p><strong>Instruction level parallelism</strong></p>
</li>
<li>
<p><strong>Compiler capabilities</strong></p>
</li>
<li>
<p><strong>Hardware techniques</strong></p>
</li>
</ul>
</li>
<li>
<p>Instruction level parallelism</p>
<ul>
<li>
<p>Instructions have the characteristics of parallel execution</p>
</li>
<li>
<p>Instructions in a sequence are independent</p>
</li>
<li>
<p>Execution can be overlapped</p>
</li>
<li>
<p>Governed by data and procedural dependency</p>
</li>
</ul>
</li>
</ul>
<h5 id="machine-parallelism">Machine Parallelism</h5>
<ul>
<li>
<p>Machine Parallelism</p>
<ul>
<li>
<p>Ability to take advantage of instruction level parallelism</p>
</li>
<li>
<p>Governed by number of parallel pipelines</p>
</li>
<li>
<p>The ability to find independent instructions and obtain instruction level parallelism</p>
</li>
</ul>
</li>
<li>
<p>Instructions that can be executed in parallel</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Load R1 &lt;- R2(23)
</span></span><span class="line"><span class="cl">Add R3 &lt;- R3, &#34;1&#34;
</span></span><span class="line"><span class="cl">Add R4 &lt;- R4, R2
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Instructions that cannot be executed in parallel</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Add R3 &lt;- R3, &#34;1&#34;
</span></span><span class="line"><span class="cl">Add R4 &lt;- R3, R2
</span></span><span class="line"><span class="cl">Store[R4] &lt;- R0
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="instruction-issue">Instruction issue</h4>
<ul>
<li>
<p><strong>Instruction issueï¼š the process of starting instructions to be executed by the functional unit of the processor</strong></p>
<ul>
<li>Instruction issue occurs when instruction moves from the decode stage of the pipeline to the first execute stage of the pipeline</li>
</ul>
</li>
<li>
<p><strong>In order to improve the parallelism, it is necessary to use a reasonable issue order, instead of the original order</strong></p>
</li>
<li>
<p>In essence, instruction emission is a strategy to find instructions that can enter the pipeline and be executed</p>
</li>
</ul>
<h5 id="order-about-instruction-issue">Order about instruction issue</h5>
<ul>
<li>
<p>Three sequences are involved in the command sending process</p>
<ul>
<li>
<p>Order in which instructions are fetched</p>
</li>
<li>
<p>Order in which instructions are executed</p>
</li>
<li>
<p>Order in which instructions change registers and memory</p>
</li>
</ul>
</li>
<li>
<p>The one constraint on the processor is that the result must be correct</p>
</li>
<li>
<p>Instruction issue policy refers to the protocol used to start the execution of the command</p>
</li>
</ul>
<h5 id="instruction-issue-policy">Instruction issue policy</h5>
<ul>
<li>
<p><strong>The original instruction stream itself has dependencies</strong></p>
</li>
<li>
<p>To improve the parallelism of execution, the processor may change the order in which instructions are executed</p>
</li>
<li>
<p>The more sophisticated the processor, the less it is bound by a strict relationship between these orderings</p>
</li>
<li>
<p><strong>There are three issue policy</strong></p>
<ul>
<li>
<p><strong>In-order issue with in-order completion</strong></p>
</li>
<li>
<p><strong>In-order issue with out-of-order completion</strong></p>
</li>
<li>
<p><strong>Out-of order issue with out-of â€“order completion</strong></p>
</li>
</ul>
</li>
</ul>
<h6 id="in-order-issuein-order-completion">In-order issue/in-order completion</h6>
<ul>
<li>
<p>Issue instructions in the order they occur</p>
</li>
<li>
<p>Write the results in the same order to complete the execution of instructions</p>
</li>
<li>
<p><strong>Very inefficientï¼Œeven scalar pipeline will not use policy</strong></p>
</li>
<li>
<p>In Superscalar pipeline</p>
<ul>
<li>
<p>May fetch more than one instruction</p>
</li>
<li>
<p><strong>To ensure orderly completion, when the functional units conflict, or the execution of the functional units requires multiple cycles, instruction issue must wait</strong></p>
</li>
</ul>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter14-7.png" title="/img/Computer Organization and Architecture/chapter14-7.png" data-thumbnail="/img/Computer Organization and Architecture/chapter14-7.png">
        
    </a>
<ul>
<li>
<p><strong>è¶…æ ‡é‡å¤„ç†å™¨æœ‰2ä¸ªç‹¬ç«‹çš„æµæ°´çº¿ï¼Œèƒ½å¤ŸåŒæ—¶å–2ä¸ªæŒ‡ä»¤</strong></p>
</li>
<li>
<p><strong>æœ‰3ä¸ªæ‰§è¡Œå•å…ƒï¼Œä»¥åŠ2ä¸ªå†™å›çš„å•å…ƒ</strong></p>
</li>
<li>
<p>I1éœ€è¦2ä¸ªå‘¨æœŸå®Œæˆæ‰§è¡Œï¼›I3å’ŒI4éœ€è¦åŒæ—¶ä½¿ç”¨æŸä¸ªåŠŸèƒ½å•å…ƒï¼Œå¯¼è‡´å‡ºç°å†²çªï¼›I5ä¾èµ–äºI4çš„ç»“æœï¼›I5å’ŒI6éœ€è¦åŒæ—¶ä½¿ç”¨æŸä¸ªåŠŸèƒ½å•å…ƒï¼Œå¯¼è‡´å‡ºç°å†²çª</p>
</li>
<li>
<p>æˆå¯¹å–æŒ‡å¹¶é€åˆ°è¯‘ç å•å…ƒè¿›è¡Œè¯‘ç ã€‚I1éœ€è¦èŠ±è´¹2ä¸ªæ—¶é’Ÿå‘¨æœŸæ‰§è¡Œã€‚æ‰€ä»¥I3å’ŒI4éœ€è¦åœ¨ç¬¬å››ä¸ªå‘¨æœŸå¼€å§‹æ‰§è¡Œã€‚ç”±äºI3å’ŒI4èµ„æºå†²çªï¼Œæ‰€ä»¥I3å’ŒI4éœ€è¦é¡ºåºæ‰§è¡Œã€‚I5éœ€è¦ä¾èµ–I4çš„ç»“æœï¼Œå¹¶ä¸”I5å’ŒI6å­˜åœ¨èµ„æºå†²çªï¼Œæ‰€ä»¥I5å’ŒI6éœ€è¦ä¸²è¡Œæ‰§è¡Œ</p>
</li>
<li>
<p>8ä¸ªæŒ‡ä»¤ï¼Œæ€»å…±éœ€è¦8ä¸ªæ—¶é’Ÿå‘¨æœŸæ‰èƒ½å®Œæˆ</p>
</li>
<li>
<p>ç”±äºæŒ‡ä»¤æ‰§è¡Œçš„æ—¶é—´ä¸ä¸€æ ·ï¼Œæ‰€ä»¥å¦‚æœåŒæ—¶å‘å°„çš„æŒ‡ä»¤ç»™æ‰§è¡Œå•å…ƒï¼Œéœ€è¦ç­‰å…¨éƒ¨æ‰§è¡Œå®Œæˆä¹‹åï¼Œæ‰èƒ½è¿›è¡Œä¸‹ä¸€æ¬¡å‘å°„</p>
</li>
<li>
<p>å¦‚æœæŒ‡ä»¤é—´å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»ï¼Œéœ€è¦åœæ­¢è°ƒåº¦è¡Œä¸ºï¼Œç­‰å…·å¤‡æ¡ä»¶ä¹‹åï¼Œæ‰èƒ½è¿›è¡ŒæŒ‡ä»¤å‘å°„</p>
</li>
</ul>
<hr>
<h6 id="in-order-issueout-of-order-completion">In-order issue/out-of-order completion</h6>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter14-8.png" title="/img/Computer Organization and Architecture/chapter14-8.png" data-thumbnail="/img/Computer Organization and Architecture/chapter14-8.png">
        
    </a>
<ul>
<li>
<p>I1å’ŒI2åŒæ—¶å‘å°„åˆ°æ‰§è¡Œå•å…ƒï¼Œç”±äºI2åªéœ€è¦1ä¸ªå‘¨æœŸå®Œæˆï¼Œæ‰€ä»¥I2å¯ä»¥å…ˆå®Œæˆã€‚I3å¯ä»¥å’ŒI1åŒæ—¶æ‰§è¡Œï¼Œå¹¶è¿›å…¥å†™çš„é˜¶æ®µ</p>
</li>
<li>
<p>I4ç”±äºå’ŒI3èµ„æºå†²çªï¼Œæ‰€ä»¥éœ€è¦ç­‰I3å®Œæˆä¹‹åæ‰èƒ½æ‰§è¡Œã€‚I5ä¾èµ–äºI4çš„ç»“æœï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦ç­‰å¾…I4ï¼ŒåŒç†I6éœ€è¦ç­‰å¾…I5</p>
</li>
<li>
<p>æ•´ä½“ä¸Šéœ€è¦7ä¸ªå‘¨æœŸå®ŒæˆæŒ‡ä»¤çš„æ‰§è¡Œ</p>
</li>
</ul>
<hr>
<p><strong>Output (write-write) dependency</strong></p>
<ul>
<li>In the process of out of sequence completion, the execution order is different from the original order, which may lead to output dependency problems</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">R3 = R3 + R5 ;(l1)
</span></span><span class="line"><span class="cl">R4 = R3 + 1  ;(l2)
</span></span><span class="line"><span class="cl">R3 = R5 + 1  ;(l3)
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Analyze
<ul>
<li>I2 depends on result of I1 - data dependency</li>
<li>If I3 completes before I1, the result from I1 will be wrong - output (write-write) dependency</li>
</ul>
</li>
</ul>
<hr>
<p><strong>How?</strong></p>
<ul>
<li>
<p><strong>Adopt dynamic scheduling strategy</strong></p>
</li>
<li>
<p>Idea: Move the dependent instructions out of the way of independent ones (s.t. independent ones can execute)</p>
<ul>
<li>Rest areas for dependent instructions: Reservation stations</li>
</ul>
</li>
<li>
<p>Monitor the source â€œvaluesâ€ of each instruction in the resting area</p>
</li>
<li>
<p>When all source â€œvaluesâ€ of an instruction are available, â€œfireâ€ (i.e. dispatch) the instruction</p>
<ul>
<li>Instructions dispatched in <strong>data-flow orderï¼Œnot control-flow</strong></li>
</ul>
</li>
<li>
<p>Benefit</p>
<ul>
<li>
<p>Latency tolerance: Allows independent instructions to execute and complete in the presence of a long latency operation</p>
</li>
<li>
<p>Reasonably schedule instructions with dependencies</p>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p><strong>Problem about In-order issue</strong></p>
</li>
<li>
<p>When decoding instructions, if there are related points or conflicting points, the decoding needs to stop</p>
</li>
<li>
<p>In this way, subsequent instructions cannot be decoded</p>
</li>
<li>
<p>At this time, the processor cannot check whether any instruction is independent and can be executed on the pipeline</p>
</li>
</ul>
<hr>
<h6 id="out-of-order-issueout-of-order-completion">Out-of-order issue/out-of-order completion</h6>
<ul>
<li>
<p>Solution: decouple decode from execution</p>
</li>
<li>
<p>Decode</p>
<ul>
<li>
<p>Decode stage can continuously fetch and decode</p>
</li>
<li>
<p>Decoded instruction is put into the buffer</p>
</li>
<li>
<p>As long as the buffer is not full, fetching and decoding can continue</p>
</li>
</ul>
</li>
<li>
<p>Execution</p>
<ul>
<li>
<p>When the functional unit is available, transmit the executable instructions to execute</p>
</li>
<li>
<p>Since the instruction has been decoded, the processor can first identify whether the instruction can be executed</p>
</li>
</ul>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter14-9.png" title="/img/Computer Organization and Architecture/chapter14-9.png" data-thumbnail="/img/Computer Organization and Architecture/chapter14-9.png">
        
    </a>
<ul>
<li>ç¬¬ä¸€ä¸ªå‘¨æœŸï¼ŒI1å’ŒI2è¿›è¡Œè§£ç ï¼Œå®Œæˆè§£ç åè¿›å…¥å‘å°„ç¼“å†²åŒºã€‚æ‰§è¡Œå•å…ƒä¸ºç©ºï¼ŒI1å’ŒI2è¢«å‘å°„å‡ºå»æ‰§è¡Œ</li>
<li>ç¬¬äºŒä¸ªå‘¨æœŸï¼ŒI3å’ŒI4è¿›è¡Œè§£ç ï¼Œå®Œæˆè§£ç åè¿›å…¥å‘å°„ç¼“å†²åŒºã€‚ç”±äºI3å’ŒI4å…±ç”¨æ‰§è¡Œå•å…ƒï¼ŒI3å‘å°„å‡ºå»è¿›è¡Œæ‰§è¡Œ</li>
<li>ç¬¬ä¸‰ä¸ªå‘¨æœŸï¼ŒI5å’ŒI6è¿›è¡Œè§£ç ï¼Œå®Œæˆè§£ç åè¿›å…¥å‘å°„ç¼“å†²åŒºã€‚æ­¤æ—¶ï¼ŒI3æ‰§è¡Œå®Œäº†ï¼Œæ‰€ä»¥I4å¯ä»¥å‘å°„äº†ã€‚åŒæ—¶ç”±äºI5å’ŒI4æœ‰æ•°æ®ç›¸å…³æ€§ï¼Œæ‰€ä»¥I5ä¸èƒ½å‘å°„ï¼Œäºæ˜¯æŠŠI6å‘å°„å‡ºå»æ‰§è¡Œ</li>
<li>ç¬¬å››ä¸ªå‘¨æœŸï¼Œæ²¡æœ‰æŒ‡ä»¤éœ€è¦è§£ç </li>
<li>ç¬¬äº”ä¸ªå‘¨æœŸï¼Œæ²¡æœ‰æŒ‡ä»¤éœ€è¦è§£ç ã€‚æ­¤æ—¶å‘å°„ç¼“å†²åŒºåªæœ‰I5ã€‚I6æ‰§è¡Œå®Œæˆï¼Œå¯ä»¥å‘å°„I5æŒ‡ä»¤ã€‚I5åœ¨ç¬¬äº”ä¸ªæ—¶é’Ÿå‘¨æœŸå®Œæˆæ‰§è¡Œï¼Œå¹¶åœ¨ç¬¬å…­ä¸ªæ—¶é’Ÿå‘¨æœŸå®Œæˆå†™å…¥æ“ä½œ</li>
<li>æ•´ä¸ªè¿‡ç¨‹éœ€è¦6ä¸ªæ—¶é’Ÿå‘¨æœŸã€‚æ¯”ä¹‹å‰çš„åˆç¼©çŸ­äº†1ä¸ªå‘¨æœŸ</li>
</ul>
<h6 id="anti-dependencywrite-after-read">Anti-dependency(Write-after-read)</h6>
<ul>
<li>
<p>Out-of-order issue/out-of-order completion also need to comply with restrictions</p>
</li>
<li>
<p>Anti correlation occurs</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">R3 = R3 + R5 ;l1
</span></span><span class="line"><span class="cl">R4 = R3 + 1  ;l2
</span></span><span class="line"><span class="cl">R3 = R5 + 1  ;l3
</span></span><span class="line"><span class="cl">R7 = R3 + R4 ;l4
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Analyze
<ul>
<li>I3 can not complete before I2 starts as I2 needs a value in R3 and I3 changes R3</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Dependency Analyzing</strong></p>
<ul>
<li>
<p>True data dependency reflects the real dependency between data</p>
</li>
<li>
<p>In essence, anti dependency and output dependency are caused by register conflict</p>
<ul>
<li>Register contents may not reflect the correct ordering from the program</li>
</ul>
</li>
<li>
<p>Instruction issue stops, pipeline stall</p>
<ul>
<li>Processor pauses for one cycle</li>
</ul>
</li>
<li>
<p>This situation is more serious when register optimization technology is used</p>
<ul>
<li>
<p>Register optimization technology maximizes the use of registers to improve performance</p>
</li>
<li>
<p>Register conflicts will be more significant</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Register renaming</strong></p>
<ul>
<li>
<p>Registers are dynamically allocated by hardware</p>
</li>
<li>
<p>When an instruction with a register as the destination operand is executed, a new register is allocated</p>
</li>
<li>
<p><strong>The instruction that accesses the original register after this instruction must be modified to the newly allocated register to maintain consistency</strong></p>
</li>
<li>
<p>Avoid dependencies caused by register conflicts</p>
</li>
</ul>
<hr>
<ul>
<li><strong>Original</strong></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">R3 = R3 + R5 ;I1
</span></span><span class="line"><span class="cl">R4 = R3 + 1  ;I2
</span></span><span class="line"><span class="cl">R3 = R5 + 1  ;I3
</span></span><span class="line"><span class="cl">R7 = R3 + R4 ;I4
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>I1å’ŒI2å­˜åœ¨çœŸå®æ•°æ®ç›¸å…³æ€§</p>
</li>
<li>
<p>I3å’ŒI4å­˜åœ¨çœŸå®æ•°æ®ç›¸å…³æ€§</p>
</li>
<li>
<p>I3å’ŒI2å­˜åœ¨åç›¸å…³æ€§ï¼Œè¯»åå†™</p>
</li>
<li>
<p>I3å’ŒI1å­˜åœ¨è¾“å‡ºç›¸å…³æ€§ï¼Œå†™åå†™</p>
</li>
<li>
<p><strong>Register renaming</strong></p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">R3b = R3a + R5a ;l1
</span></span><span class="line"><span class="cl">R4b = R3b + 1   ;l2
</span></span><span class="line"><span class="cl">R3c = R5a + 1   ;l3
</span></span><span class="line"><span class="cl">R7 = R3c + R4b  ;l4
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>é‡‡ç”¨å¯„å­˜å™¨é‡å‘½åçš„è§„åˆ™ï¼ŒI1çš„R3ä¿®æ”¹æˆR3bï¼ŒI3ä¸­çš„R3ï¼Œä¿®æ”¹æˆR3cã€‚</p>
</li>
<li>
<p><strong>I3å’ŒI2ä¹‹é—´çš„åç›¸å…³æ€§æ²¡æœ‰äº†ï¼ŒI3å’ŒI1ä¹‹é—´çš„è¾“å‡ºç›¸å…³æ€§ä¹Ÿæ²¡æœ‰äº†ï¼ŒI3å¯ä»¥ç«‹å³å‘å°„</strong></p>
</li>
<li>
<p><strong>çœŸå®æ•°æ®ç›¸å…³æ€§æ— æ³•é€šè¿‡å¯„å­˜å™¨é‡å‘½åæ¥è§£å†³</strong></p>
</li>
</ul>
<h4 id="analysis-of-three-technologies---">Analysis of three technologies ! ! !</h4>
<ul>
<li>
<p><strong>Techniques for improving performance in superscalar processors</strong></p>
<ul>
<li>
<p><strong>Duplication of Resources</strong></p>
</li>
<li>
<p><strong>Out of order issue</strong></p>
</li>
<li>
<p><strong>Renaming</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Resources are the foundation</strong></p>
<ul>
<li>Sufficient resources to execute multiple pipelines</li>
</ul>
</li>
<li>
<p><strong>Out of order issue is the method</strong></p>
<ul>
<li>Provide executable instructions through disordered transmissionRenaming is a guarantee</li>
</ul>
</li>
<li>
<p><strong>Renaming is a guarantee</strong></p>
<ul>
<li>Rename mechanism reduces the correlation between instructions</li>
</ul>
</li>
</ul>
<h4 id="about-instruction-window">About instruction window</h4>
<ul>
<li>
<p>Out of order issue: register window is used to cache instructions after decoding</p>
</li>
<li>
<p>Through the register window, the processor can identify independent instructions that can be placed in the execution segment</p>
</li>
<li>
<p><strong>If the instruction window is very small, the probability of successful recognition is very low</strong></p>
</li>
<li>
<p><strong>The instruction window needs to be large enough to find independent instructions and use the hardware more effectively</strong></p>
</li>
<li>
<p><strong>Need instruction window large enough (more than 8)</strong></p>
</li>
</ul>
<hr>
<p><strong>Effect of technology</strong></p>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter14-10.png" title="/img/Computer Organization and Architecture/chapter14-10.png" data-thumbnail="/img/Computer Organization and Architecture/chapter14-10.png" data-sub-html="<h2>Without Procedural Dependencies</h2>">
        
    </a><figcaption class="image-caption"><code>Without Procedural Dependencies</code></figcaption>
    </figure>
<ul>
<li>
<p>Baseï¼šä¸å¤åˆ¶ä»»ä½•åŠŸèƒ½å•å…ƒ</p>
</li>
<li>
<p>+Id/stï¼šå¢åŠ äº†è£…å…¥/å­˜å‚¨å•å…ƒ</p>
</li>
<li>
<p>+aluï¼šå¢åŠ äº†ALUå•å…ƒ</p>
</li>
<li>
<p>+bothï¼šå¢åŠ äº†ALUå’ŒId/st</p>
</li>
<li>
<p>ä¸è€ƒè™‘è¿‡ç¨‹ç›¸å…³æ€§</p>
</li>
<li>
<p>æ²¡æœ‰é‡‡ç”¨å¯„å­˜å™¨é‡å‘½åï¼Œå¢åŠ ç¡¬ä»¶æ‰§è¡Œæ•ˆæœå¹¶ä¸æ˜æ˜¾ã€‚è€Œé‡‡ç”¨å¯„å­˜å™¨é‡å‘½ååï¼Œå¢åŠ äº†ALUä¼šæ˜æ˜¾æé«˜åŠ é€Ÿæ¯”</p>
</li>
<li>
<p>ä»å‘å°„çª—å£çš„è§’åº¦æ¥çœ‹ï¼Œçª—å£æ•°é‡ä»8ä¸ªå¢åŠ åˆ°16ä¸ªï¼Œæ•ˆæœå°±å¾ˆæ˜æ˜¾ã€‚ä½†ä»16ä¸ªåˆ°32ä¸ªï¼Œæ•ˆæœç¨å·®ä¸€äº›</p>
</li>
<li>
<p><strong>èµ„æºå¤åˆ¶ã€ä¹±åºå‘å°„ã€å¯„å­˜å™¨é‡å‘½åä¸‰è€…ç›¸äº’å½±å“</strong></p>
</li>
</ul>
<h4 id="consideration-of-control-dependence">Consideration of control dependence</h4>
<ul>
<li>
<p>Also called branch hazard</p>
</li>
<li>
<p>When branching instructions, it is not possible to determine which instruction to execute after the branch</p>
</li>
<li>
<p>In the pipeline, after prefetching the wrong instruction, it is necessary to discard and re fetch the instruction, which causes the pipeline to fail to run with full load</p>
</li>
</ul>
<p><strong>Methods</strong></p>
<ul>
<li>
<p>Processing method of control dependence</p>
<ul>
<li>
<p>Multiple Streams</p>
</li>
<li>
<p>Prefetch Branch Target</p>
</li>
<li>
<p>Loop buffer</p>
</li>
<li>
<p>Branch prediction</p>
</li>
<li>
<p>Delayed branching</p>
</li>
</ul>
</li>
<li>
<p>Goal: Keep the pipeline running full</p>
</li>
</ul>
<p><strong>About delayed branch</strong></p>
<ul>
<li>
<p>Delayed branching is often used in RIS</p>
</li>
<li>
<p>Calculate result of branch before unusable instructions pre-fetched</p>
<ul>
<li>
<p>Instructions that are not affected by branches are immediately followed by branch</p>
</li>
<li>
<p>Keeps pipeline full while fetching new instruction stream</p>
</li>
</ul>
</li>
<li>
<p>Not as good for superscalar</p>
<ul>
<li>Multiple instructions need to execute in delay slot</li>
<li>Instruction dependence problems</li>
<li>Often use branch prediction</li>
</ul>
</li>
</ul>
<p><strong>Superscalar execution</strong></p>
<ul>
<li>
<p>é™æ€ç¨‹åºé€šè¿‡å–æŒ‡å’Œåˆ†æ”¯é¢„æµ‹ï¼Œå½¢æˆåŠ¨æ€çš„æŒ‡ä»¤æµ</p>
</li>
<li>
<p>æŒ‡ä»¤æµç»è¿‡å¤„ç†å™¨çš„ç›¸å…³æ€§æ£€æŸ¥ï¼Œä¼šå»æ‰ä¸å¿…è¦çš„ç›¸å…³æ€§ï¼Œæ¯”å¦‚åç›¸å…³å’Œè¾“å‡ºç›¸å…³ã€‚ç„¶åå°†æŒ‡ä»¤æ”¾åˆ°æ‰§è¡Œçª—å£ä¸­ï¼Œç­‰å¾…æ‰§è¡Œ</p>
</li>
<li>
<p>åœ¨æ‰§è¡Œçª—å£ä¸­çš„æŒ‡ä»¤ï¼Œæ ¹æ®çœŸå®æ•°æ®ç›¸å…³æ€§æ¥æ’åºã€‚å¤„ç†å™¨æ ¹æ®çœŸå®æ•°æ®ç›¸å…³æ€§å’Œèµ„æºå¯ç”¨æ€§ï¼Œæ¥å‘å°„æŒ‡ä»¤åˆ°æ‰§è¡Œå•å…ƒè¿›è¡Œæ‰§è¡Œ</p>
</li>
<li>
<p>æœ€åçš„æ‰§è¡Œç»“æœéœ€è¦æœ‰ä¸€ä¸ªæäº¤çš„æ­¥éª¤ã€‚å› ä¸ºæŒ‡ä»¤ä¸æ˜¯æŒ‰ç…§åŸæœ‰çš„é¡ºåºæ¥æ‰§è¡Œçš„ï¼ŒåŒæ—¶åˆ†æ”¯é¢„æµ‹å’Œæ¨æµ‹æ‰§è¡Œä½¿å¾—æœ‰äº›æ‰§è¡Œçš„ç»“æœéœ€è¦ä¸¢å¼ƒ</p>
</li>
</ul>
<hr>
<ul>
<li>
<p>Simultaneously fetch multiple instructions</p>
<ul>
<li>
<p>Multiple fetching and decoding</p>
</li>
<li>
<p>Branch prediction logic</p>
</li>
</ul>
</li>
<li>
<p>Logic to determine true dependencies involving register values</p>
<ul>
<li>Determine instruction position of true correlation</li>
</ul>
</li>
<li>
<p>Dealing with unnecessary dependencies</p>
<ul>
<li>Anti-dependency and output dependency</li>
</ul>
</li>
<li>
<p>Mechanisms to initiate multiple instructions in parallel</p>
<ul>
<li>
<p>Instruction window</p>
</li>
<li>
<p>Out of order issue logic</p>
</li>
</ul>
</li>
<li>
<p>Resources for parallel execution of multiple instructions</p>
<ul>
<li>The system has sufficient resources</li>
</ul>
</li>
<li>
<p>Mechanisms for committing process state in correct order</p>
<ul>
<li>Submit results according to the order of instructions</li>
</ul>
</li>
</ul>
<h4 id="summary">Summary</h4>
<ul>
<li>
<p><strong>Resources are the foundation</strong></p>
<ul>
<li><strong>Machine parallelism</strong></li>
</ul>
</li>
<li>
<p><strong>Out of order issue is the method</strong></p>
<ul>
<li><strong>Instruction level parallelism</strong></li>
</ul>
</li>
<li>
<p><strong>Renaming is a guarantee</strong></p>
<ul>
<li><strong>Methods of improving instruction level parallelism</strong></li>
</ul>
</li>
<li>
<p>Through superscalar pipeline, multiple pipelines can run at the same time to achieve truly parallel operation at the instruction level</p>
</li>
</ul>
]]></description>
</item>
<item>
    <title>Computer Organization and Architecture Reduced Instruction Set Computers</title>
    <link>https://Jungle430.github.io/posts/computer-organization-and-architecture/computer-organization-and-architecture-reduced-instruction-set-computers/</link>
    <pubDate>Sun, 29 Jan 2023 16:34:59 &#43;0800</pubDate><author>1239946358@qq.com (Jungle)</author><guid>https://Jungle430.github.io/posts/computer-organization-and-architecture/computer-organization-and-architecture-reduced-instruction-set-computers/</guid>
    <description><![CDATA[<h1 id="computer-organization-and-architecture">Computer Organization and Architecture</h1>
<h2 id="reduced-instruction-set-computers">Reduced Instruction Set Computers</h2>
<h3 id="outline">Outline</h3>
<ul>
<li>
<p>Register and instruction architecture</p>
</li>
<li>
<p>Reduced Instruction Set Architecture</p>
</li>
<li>
<p>The Use of a Large Register File</p>
</li>
<li>
<p>Compiler-Based Register Optimization</p>
</li>
<li>
<p><code>RISC</code> Pipelining</p>
</li>
<li>
<p><code>RISC</code> Versus <code>CISC</code> Controversy</p>
</li>
</ul>
<h3 id="register-and-instruction-architecture">Register and instruction architecture</h3>
<p><strong>Major advanced in computers</strong></p>
<ul>
<li>
<p><strong>The family concept</strong></p>
<ul>
<li>
<p>IBM System/360 1964ï¼ŒDEC PDP-8</p>
</li>
<li>
<p><strong>Separates architecture from implementation</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Microprogrammed control unit</strong></p>
<ul>
<li>
<p>Idea by Wilkes 1951,Produced by IBM S/360 1964</p>
</li>
<li>
<p><strong>Easier controller design and implementation</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Cache</strong></p>
<ul>
<li>
<p>IBM S/360 model 85 1969</p>
</li>
<li>
<p><strong>Greatly improves the performance of computer</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Microprocessors</strong></p>
<ul>
<li>
<p>Intel 4004 1971</p>
</li>
<li>
<p><strong>Reduced the size of the computer</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Pipelining</strong></p>
<ul>
<li>
<p><strong>Introducing parallelism into instruction execution</strong></p>
</li>
<li>
<p><strong>Greatly improves instruction throughput</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Multiple processors</strong></p>
<ul>
<li>
<p><strong>Multiple processors combine to form a new architecture</strong></p>
</li>
<li>
<p><strong>Further improve the processing capacity of the computer</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>RISC</strong></p>
<ul>
<li>
<p>Major challenges to traditional CPU</p>
</li>
<li>
<p>It has been widely used</p>
</li>
<li>
<p>Learn from RISC and be widely used in different fields</p>
</li>
</ul>
</li>
<li>
<p>Solid State RAM</p>
<ul>
<li>Access speed is much faster than mechanical hard disk</li>
<li>Greatly improves the computerâ€™s I/O performance</li>
</ul>
</li>
</ul>
<h4 id="register-and-isas">Register and ISAs</h4>
<ul>
<li>
<p>Accumulators</p>
<ul>
<li>
<p>Early stored-program computers had <strong>one</strong> register</p>
</li>
<li>
<p>Very inconvenient to use</p>
</li>
<li>
<p>Requires a memory-based operand-addressing mode in instruction</p>
</li>
</ul>
</li>
</ul>
<p>Example</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ADD 200
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p><strong>Add the accumulator to the word in memory at address 200</strong></p>
</li>
<li>
<p>Place the sum back in the accumulator</p>
</li>
</ul>
<hr>
<ul>
<li>
<p>Next step, more registersâ€¦</p>
<ul>
<li>
<p>Dedicated registers</p>
<ul>
<li>
<p>separate accumulators for multiply or divide instructions</p>
</li>
<li>
<p>op-of-stack pointer</p>
</li>
</ul>
</li>
<li>
<p>Extended Accumulator</p>
<ul>
<li>Increase bits of register</li>
<li>Increase the number of registers</li>
</ul>
</li>
</ul>
</li>
<li>
<p>More flexible</p>
</li>
</ul>
<hr>
<ul>
<li>
<p>Next step, more registersâ€¦</p>
<ul>
<li>General-purpose registers
<ul>
<li>Registers can be used for any purpose E.g. MIPS, ARM, x86</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Instruction architecture</p>
<ul>
<li>
<p><em>Register-memory</em> architectures</p>
<ul>
<li><strong>One operand may be in memory</strong> (i.e. 80386 processors)</li>
</ul>
</li>
<li>
<p><em>Register-register</em> architectures (load-store)</p>
<ul>
<li><strong>All operands must be in registers</strong> E.g. MIPS, ARM</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="comparison-of-processors">Comparison of processors</h4>
<ul>
<li>
<p>æŒ‡ä»¤æ•°é‡ã€é•¿åº¦ã€å¯»å€æ–¹å¼ç­‰æ–¹é¢ï¼ŒCISCæ˜æ˜¾é«˜äºRISC</p>
</li>
<li>
<p>RISCå’Œè¶…æ ‡é‡çš„é€šç”¨å¯„å­˜å™¨æ•°é‡æ¯”CISCè¦å¤š</p>
</li>
<li>
<p>RISCå’Œè¶…æ ‡é‡ä¸€èˆ¬é‡‡ç”¨ç¡¬å¸ƒçº¿æ§åˆ¶ï¼Œæ‰€ä»¥æ²¡æœ‰é…ç½®æ§åˆ¶å­˜å‚¨å™¨</p>
</li>
</ul>
<h3 id="reduced-instruction-set-architecture">Reduced Instruction Set Architecture</h3>
<h4 id="cisc">CISC</h4>
<ul>
<li>
<p><strong>CISC&ndash;Complex Instruction Set Computer</strong></p>
</li>
<li>
<p>With the development of computer technology, an instruction set design concept is proposed</p>
</li>
</ul>
<hr>
<ul>
<li>
<p>The gap between high-level programming languages and instruction sets is growing</p>
<ul>
<li>
<p><strong>Need more complex compilers to translate high-level languages</strong></p>
</li>
<li>
<p><strong>A high-level language statement requires multiple instructions to completeï¼Œlow execution efficiency</strong></p>
</li>
</ul>
</li>
<li>
<p>CISC proposed by instruction set designer</p>
<ul>
<li>
<p><strong>Provides more types of instructions, and even uses a single instruction to implement complex high-level language statements</strong></p>
</li>
<li>
<p><strong>Provide more addressing modes to meet the needs of high-level languages for various addressing</strong></p>
</li>
</ul>
</li>
</ul>
<h5 id="characteristics-of-cisc">Characteristics of CISC</h5>
<ul>
<li>
<p>There are many kinds of instruction opcodes</p>
<ul>
<li>The opcode of X86 is 1-2 bytes</li>
</ul>
</li>
<li>
<p>Variable instruction length</p>
<ul>
<li>The instruction length of X86 is 1-16 bytes</li>
</ul>
</li>
<li>
<p>Various addressing modes</p>
<ul>
<li><strong>X86 has 9 addressing modes</strong>, such as base address proportional index band offset</li>
</ul>
</li>
</ul>
<h5 id="ideal-effect-of-cisc">Ideal effect of CISC</h5>
<ul>
<li>
<p><strong>Compilers are easy to write</strong></p>
<ul>
<li>
<p>The instruction set provides many types of instructions</p>
</li>
<li>
<p>The compiler can use the most appropriate instructions to translate statements in high-level languages. Less instructions after compilation and less space</p>
</li>
<li>
<p>The instruction set provides rich addressing modes</p>
</li>
<li>
<p>Meet the requirements of high-level language for flexible addressing mode</p>
</li>
</ul>
</li>
<li>
<p>Improve the execution efficiency of high-level language statements</p>
<ul>
<li>
<p>It used to require multiple instructions to complete statements in a high-level language, but now it can be completed with one instruction, and some high-level language statements can be implemented at the hardware level</p>
</li>
<li>
<p>Instruction level addressing mode to help implement complex instructions</p>
</li>
</ul>
</li>
</ul>
<h5 id="instruction-execution-characteristics">Instruction execution characteristics</h5>
<ul>
<li>
<p>Operations performed</p>
<ul>
<li>Functions that can be completed by CPU and interaction with memory</li>
</ul>
</li>
<li>
<p>Operands used</p>
<ul>
<li>Type and frequency of operandsï¼Œwhich determine the organization and addressing mode of the storage system</li>
</ul>
</li>
<li>
<p>Execution sequencing</p>
<ul>
<li>Control function and pipeline organization</li>
</ul>
</li>
</ul>
<h6 id="operations">Operations</h6>
<ul>
<li>
<p>It is best to optimize the most used and time-consuming statements</p>
</li>
<li>
<p>Assignments</p>
<ul>
<li>Movement of data</li>
</ul>
</li>
<li>
<p>Condition(Loop and IF)</p>
<ul>
<li>Sequence control</li>
</ul>
</li>
<li>
<p>Procedure call-return</p>
<ul>
<li>Very time consuming</li>
</ul>
</li>
<li>
<p><strong>è¿‡ç¨‹è°ƒç”¨å’Œè¿”å›æ˜¯å…¸å‹çš„é«˜çº§è¯­è¨€ç¨‹åºä¸­æœ€è€—æ—¶çš„æ“ä½œ</strong></p>
</li>
<li>
<p><strong>å¾ªç¯è¯­å¥ã€æ¡ä»¶è¯­å¥å’Œå¹…å€¼è¯­å¥ä¹Ÿå å¾ˆå¤§çš„æ¯”é‡</strong></p>
</li>
</ul>
<hr>
<ul>
<li>Operands
<ul>
<li>
<p>ä¸»è¦æ˜¯å±€éƒ¨æ ‡é‡å˜é‡</p>
</li>
<li>
<p>ä¼˜åŒ–æ–¹å‘åº”é›†ä¸­äºæœ¬åœ°å˜é‡çš„å­˜å‚¨å’Œè®¿é—®</p>
</li>
</ul>
</li>
</ul>
<h5 id="procedure-calls">Procedure calls</h5>
<ul>
<li>
<p><strong>Very time consuming</strong></p>
<ul>
<li>
<p>Depends on number of parameters passed</p>
</li>
<li>
<p>Depends on level of nesting</p>
</li>
</ul>
</li>
<li>
<p>Characteristics</p>
<ul>
<li>
<p>Number of parameter is mostly less than 6</p>
</li>
<li>
<p>Most variables are local</p>
</li>
<li>
<p>Most programs do not do a lot of calls followed by lots of returns</p>
</li>
</ul>
</li>
<li>
<p>It further explains that operand access is highly localized</p>
</li>
</ul>
<h5 id="summary">Summary</h5>
<ul>
<li>
<p>Assignment statement</p>
<ul>
<li>
<p>high proportion, valuable to improve efficiency</p>
</li>
<li>
<p>Need to access cache or storage</p>
</li>
<li>
<p>Use register access to reduce memory access and improve efficiency</p>
</li>
</ul>
</li>
<li>
<p>Condition and procedure calls</p>
<ul>
<li>
<p>time consuming, high proportion, valuable to improve efficiency</p>
</li>
<li>
<p>Influence the execution of the pipeline</p>
</li>
<li>
<p>Design a better pipeline to reduce the impact of transfer statements on the water line</p>
</li>
</ul>
</li>
</ul>
<p><strong>å•çº¯ä¾é æä¾›æ¥è¿‘äºé«˜çº§è¯­è¨€çš„æŒ‡ä»¤å¹¶ä¸ä¸€å®šèƒ½æé«˜å…¸å‹è¯­å¥çš„æ‰§è¡Œæ•ˆç‡</strong></p>
<hr>
<ul>
<li>
<p><strong>Ideal 1 of CISC: Compilers are easy to write</strong></p>
</li>
<li>
<p>Implementation method: complex instruction</p>
</li>
<li>
<p>Compiler simplification?</p>
<ul>
<li>
<p>Because of strict requirements of instruction designï¼Œcompiler needs high-level language strictly meet the instruction</p>
</li>
<li>
<p>The compiler needs to optimize machine instructions to reduce the length of generated machine code and meet the requirements of pipeline operation. This is also difficult to achieve for complex instructions Optimization more difficult</p>
</li>
</ul>
</li>
<li>
<p><strong>Ideal 2 of CISC: smaller programs</strong></p>
</li>
<li>
<p>Implementation method: mores instruction</p>
</li>
<li>
<p>Smaller programs?</p>
<ul>
<li>
<p>Program looks using less memory</p>
</li>
<li>
<p>Memory is now cheap</p>
</li>
<li>
<p>May not occupy less bits, just look shorter in symbolic form</p>
</li>
<li>
<p>More instructions require longer op-codes</p>
</li>
<li>
<p>CISC has no fewer machine instructions than RISC</p>
</li>
</ul>
</li>
<li>
<p><strong>Ideal 3 of CISC: high efficiency</strong></p>
</li>
<li>
<p>Implementation method: more instructions and more addressing mode</p>
</li>
<li>
<p>Faster programs?</p>
<ul>
<li>
<p>Compiler bias towards use of simpler instructions</p>
</li>
<li>
<p>CISC need more complex control unit</p>
</li>
<li>
<p>Microprogram control store larger</p>
</li>
<li>
<p>Simple instructions take longer to execute</p>
</li>
</ul>
</li>
</ul>
<h5 id="conclusion">Conclusion</h5>
<ul>
<li>
<p>The goal CISC hopes to achieve is actually contradictory to the way CISC realizes it</p>
</li>
<li>
<p>Target: improve operational efficiency by optimizing the most frequently used and time-consuming functions</p>
</li>
<li>
<p>Following methods may be better choices</p>
<ul>
<li>
<p>More registers to reduce memory access</p>
</li>
<li>
<p>Careful design of pipeline to improve the efficiency of the pipeline</p>
</li>
<li>
<p>Careful designed simple instruction set to improve the efficiency of instruction execution</p>
</li>
</ul>
</li>
</ul>
<h4 id="risc">RISC</h4>
<ul>
<li>
<p>RISC: Reduced Instruction Set Computer</p>
</li>
<li>
<p>Key features</p>
<ul>
<li>
<p><strong>Large number of general purpose registers</strong></p>
</li>
<li>
<p><strong>Compiler technology to optimize register use</strong></p>
</li>
<li>
<p><strong>Limited and simple instruction set</strong></p>
</li>
<li>
<p><strong>Emphasis on optimising the instruction pipeline</strong></p>
</li>
</ul>
</li>
</ul>
<p><strong>Main contributors of RISC</strong></p>
<ul>
<li>
<p>John Cocke: IBM</p>
<ul>
<li>Influences: Known as â€œthe father of RISC Architectureâ€. Turing Award Recipient and National Medal of Science</li>
</ul>
</li>
<li>
<p>Dave Patterson: UC Berkeley</p>
<ul>
<li>Influences: Sun SPARC from his achievements</li>
</ul>
</li>
<li>
<p>John L. Hennessy: Stanford</p>
<ul>
<li>Influences: In 1984, MIPS (Microprocessor without interlocked pipelined stages) was founded</li>
</ul>
</li>
</ul>
<h5 id="typical-features-of-risc">Typical features of RISC</h5>
<ul>
<li>
<p><strong>Simplified instruction set</strong></p>
<ul>
<li>
<p><strong>Standardized, fixed length</strong> instruction format (ARM instructions are all 32-bit)</p>
</li>
<li>
<p><strong>Limited operation types, only 8-bit operation code</strong></p>
</li>
<li>
<p><strong>Fetching and decoding instruction become easier</strong></p>
</li>
<li>
<p>One instruction per machine cycle</p>
</li>
<li>
<p>Hardwired design (no microcode)</p>
</li>
</ul>
</li>
<li>
<p>Use registers whenever possible</p>
<ul>
<li>
<p>Except for load/save instructions, other instructions are for register operations</p>
</li>
<li>
<p><strong>Data operations can only be performed in registers</strong></p>
</li>
<li>
<p><strong>Memory access has only three addressing modes</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Better pipeline design</strong></p>
<ul>
<li>
<p>Instruction pipeline is carefully designed to better meet the impact of conditional branches and procedure calls on the flow pipeline</p>
</li>
<li>
<p><strong>Each instruction is conditionally executed, which can reduce branches</strong></p>
</li>
</ul>
</li>
</ul>
<h5 id="influence-of-risc-concept">Influence of RISC concept</h5>
<ul>
<li>
<p><strong>RISC&rsquo;s design concept gave birth to a series of new computer architectures</strong></p>
<ul>
<li>Simplified pipeline design on RISC instruction set is becoming more and more attractive</li>
</ul>
</li>
<li>
<p><strong>RISC and CISC learn from each other</strong></p>
<ul>
<li>
<p>Make up for the disadvantage of CISC pipeline implementation</p>
</li>
<li>
<p>RISC is also learning from CISC, and both sides are learning from each other</p>
</li>
</ul>
</li>
<li>
<p><strong>Current situation</strong></p>
</li>
<li>
<p>With the development of architecture and microelectronics technology, the so-called disadvantage of CISC in structure is gradually reduced</p>
</li>
<li>
<p>RISC&rsquo;s theory of superiority has gradually died down, and RISC camp has been losing ground</p>
</li>
</ul>
<blockquote>
<p>Focus on the design and implementation of micro structures and physics, and explore the possibilities buried in operating systems, compilers and upper applications</p>
</blockquote>
<h5 id="summary-1">Summary</h5>
<ul>
<li>
<p>The number of available registers greatly influenced the <strong>instruction set architecture (ISA)</strong></p>
</li>
<li>
<p>Complex Instruction Set Computers were very complex</p>
</li>
<li>
<p><strong>CISC was necessary</strong></p>
<ul>
<li>
<p>The processor of X86 architecture dominates the server and desktop market</p>
</li>
<li>
<p>X86 draws many advantages from RISC</p>
</li>
</ul>
</li>
<li>
<p><strong>RISC is still widely concerned and applied</strong></p>
<ul>
<li>
<p><strong>ARM occupies a major share of the embedded market</strong></p>
</li>
<li>
<p><strong>Mobile phones, tablets PC and various sensors in daily life mostly adopt ARM architecture</strong></p>
</li>
<li>
<p><strong>ARM borrows a bit from both RISC and CISC</strong></p>
</li>
</ul>
</li>
</ul>
<h3 id="the-use-of-a-large-register-file">The Use of a Large Register File</h3>
<ul>
<li>
<p>Target: Keep frequently accessed operands in registers</p>
</li>
<li>
<p>Software solution</p>
<ul>
<li>
<p>Require compiler to allocate registers</p>
</li>
<li>
<p>Allocate based on most used variables in a given time</p>
</li>
<li>
<p>Requires sophisticated program analysis</p>
</li>
</ul>
</li>
<li>
<p>Hardware solution</p>
<ul>
<li>
<p>Have more registers</p>
</li>
<li>
<p>Thus more variables will be in registers</p>
</li>
</ul>
</li>
</ul>
<h4 id="how-and-problem">How and problem?</h4>
<ul>
<li>
<p>Limited number of registers requires reasonable use, and the locality principle provides the possibility</p>
<ul>
<li>
<p>Store local scalar variables in registers</p>
</li>
<li>
<p>Reduces memory access</p>
</li>
</ul>
</li>
<li>
<p><strong>Every procedure (function) call changes locality</strong></p>
<ul>
<li>
<p>Parameters must be passed</p>
</li>
<li>
<p>Results must be returned</p>
</li>
<li>
<p>Variables from calling programs must be restored</p>
</li>
</ul>
</li>
</ul>
<h4 id="register-windows">Register windows</h4>
<ul>
<li>
<p><strong>Characteristics of procedure call</strong></p>
<ul>
<li>
<p><strong>Only few parameters</strong></p>
</li>
<li>
<p><strong>Limited range of depth of call</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Divide the available registers into several small registers set</strong></p>
<ul>
<li>
<p><strong>Calls switch to a different set of registers</strong></p>
</li>
<li>
<p><strong>Returns switch back to a previously used set of registers</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Set of registers called register windows</strong></p>
</li>
</ul>
<hr>
<ul>
<li>
<p><strong>Three areas within a register set</strong></p>
<ul>
<li>
<p><strong>Parameter registers</strong></p>
</li>
<li>
<p><strong>Local registers</strong></p>
</li>
<li>
<p><strong>Temporary registers</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Temporary registers from one set overlap parameter registers from the next</strong></p>
<ul>
<li><strong>This allows parameter passing without moving data</strong></li>
</ul>
</li>
<li>
<p><strong>At any time, only one register window is visible</strong></p>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter13-1.png" title="/img/Computer Organization and Architecture/chapter13-1.png" data-thumbnail="/img/Computer Organization and Architecture/chapter13-1.png" data-sub-html="<h2>Overlapping register windows</h2>">
        
    </a><figcaption class="image-caption"><code>Overlapping register windows</code></figcaption>
    </figure>
<ul>
<li>
<p>æœ¬çº§çš„ä¸´æ—¶å˜é‡å¯„å­˜å™¨å’Œä¸‹ä¸€çº§çš„å‚æ•°å¯„å­˜å™¨åœ¨ç‰©ç†ä¸Šæ˜¯åŒä¸€ä¸ªï¼Œåœ¨ä¼ é€’å‚æ•°æ—¶ï¼Œä¸éœ€è¦ç§»åŠ¨æ•°æ®</p>
</li>
<li>
<p>ç¨‹åºä¸­è¿‡ç¨‹çš„è°ƒç”¨å’Œè¿”å›çš„æ•°é‡ä¸ç¡®å®šï¼Œæ‰€ä»¥å¯„å­˜å™¨çª—å£åº”è¯¥è¶³å¤Ÿå¤šï¼Œä»¥ä¿è¯æ‰€æœ‰çš„è¿‡ç¨‹è°ƒç”¨éƒ½èƒ½ç”¨åˆ°</p>
</li>
<li>
<p>ç”±äºå¯„å­˜å™¨çš„æ•°é‡æœ‰é™ï¼Œåªèƒ½ä¿è¯å°‘æ•°æœ€è¿‘çš„è¿‡ç¨‹èƒ½å¤Ÿä½¿ç”¨å¯„å­˜å™¨ã€‚æ›´æ—©çš„è¿‡ç¨‹è°ƒç”¨è¿˜æ˜¯éœ€è¦ä¿å­˜åˆ°å­˜å‚¨å™¨ä¸­ã€‚å½“åµŒå¥—æ·±åº¦å‡å°‘çš„æ—¶å€™ï¼Œå†å°†æ•°æ®ä»å­˜å‚¨å™¨æ¢å¤åˆ°å¯„å­˜å™¨ä¸­</p>
</li>
<li>
<p>è¿™ç§æ–¹å¼ç§°ä¸º<strong>ç¯å½¢ç¼“å†²çª—å£</strong></p>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter13-2.png" title="/img/Computer Organization and Architecture/chapter13-2.png" data-thumbnail="/img/Computer Organization and Architecture/chapter13-2.png" data-sub-html="<h2>Circular buffer diagram</h2>">
        
    </a><figcaption class="image-caption"><code>Circular buffer diagram</code></figcaption>
    </figure>
<ul>
<li>
<p><strong>å¯„å­˜å™¨çª—å£ä»¥ä¸€ç§éƒ¨åˆ†é‡å çš„å½¢å¼å½¢æˆä¸€ä¸ªç¯å½¢ã€‚å½“ç¯å½¢å¯„å­˜å™¨çª—å£éƒ½å……æ»¡äº†åï¼Œå†æœ‰è¿‡ç¨‹è°ƒç”¨ï¼ŒæŠŠæœ€æ—©çš„å¯„å­˜å™¨çª—å£ä¿å­˜åˆ°å­˜å‚¨å™¨</strong></p>
</li>
<li>
<p>è°ƒç”¨æ—¶ï¼Œç§»åŠ¨å½“å‰çª—å£æŒ‡é’ˆä»¥æ˜¾ç¤ºå½“å‰æ´»åŠ¨çš„å¯„å­˜å™¨çª—å£</p>
</li>
<li>
<p><strong>å¦‚æœæ‰€æœ‰çª—å£éƒ½åœ¨ä½¿ç”¨ä¸­ï¼Œå°†ç”Ÿæˆä¸€ä¸ªä¸­æ–­ï¼Œå¹¶å°†æœ€æ—©çš„çª—å£ï¼ˆè°ƒç”¨åµŒå¥—ä¸­æœ€è¿œçš„çª—å£ï¼‰ä¿å­˜åˆ°å†…å­˜ä¸­</strong></p>
</li>
<li>
<p>ä¿å­˜çš„çª—å£æŒ‡é’ˆæ ‡è¯†æœ€è¿‘ä¿å­˜åœ¨å†…å­˜ä¸­çš„çª—å£</p>
</li>
<li>
<p>å½“è¿‡ç¨‹è¿”å›çš„æ—¶å€™ï¼ŒCWPä¼šå›é€€ä¸€ä¸ªã€‚å½“CWPå›é€€åˆ°å’ŒSWPä¸€æ ·çš„æ—¶å€™ï¼Œå°±ä¼šå¼•èµ·ä¸€ä¸ªä¸­æ–­ï¼Œå¯¼è‡´ä¿å­˜åˆ°å­˜å‚¨å™¨ä¸­çš„å¯„å­˜å™¨çª—å£æ¢å¤</p>
</li>
<li>
<p>åµŒå¥—å±‚æ•°ä¸ä¼šå¤ªæ·±ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸ä¼šä¿å­˜åˆ°å­˜å‚¨å™¨ä¸­</p>
</li>
</ul>
<h4 id="global-variables">Global variables</h4>
<ul>
<li>
<p>Allocated by the compiler to memory</p>
<ul>
<li>
<p><strong>Inefficient for frequently accessed variables</strong></p>
</li>
<li>
<p><strong>Frequent access to memory, low efficiency</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>A set of registers for global variables</strong></p>
<ul>
<li>
<p><strong>compiler determines which global variables can be placed in global registers</strong></p>
</li>
<li>
<p><strong>Replacement is also determined by the compiler</strong></p>
</li>
</ul>
</li>
</ul>
<h4 id="registers-v-cache">Registers v cache</h4>
<ul>
<li>
<p>Cache</p>
<ul>
<li>Inserting cache between processor and memory can solve the problem of speed difference</li>
</ul>
</li>
<li>
<p>Register</p>
<ul>
<li>organized in the form of windows, which is similar to a small fast buffer. It stores a subset of all variables that may be used many times</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p>å¯„å­˜å™¨ç»„ä¸­ä¿å­˜çš„æ˜¯æ‰€æœ‰å±€éƒ¨æ ‡é‡å˜é‡ã€‚cacheä¿å­˜çš„æ˜¯æœ€è¿‘ä½¿ç”¨è¿‡çš„æ ‡é‡å˜é‡</p>
</li>
<li>
<p>å¯„å­˜å™¨ç»„ä¸­ä¿å­˜çš„æ˜¯ä¸ªåˆ«çš„å˜é‡ã€‚cacheä¸­ä¿å­˜çš„æ˜¯å†…å­˜ä¸­çš„ä¸€ä¸ªå—</p>
</li>
<li>
<p>å¯„å­˜å™¨ç»„æ–¹æ¡ˆä¸­ï¼Œéœ€è¦ç¼–è¯‘å™¨æ¥å†³å®šå…¨å±€å˜é‡çš„ä¿å­˜ã€‚cacheä¸­åˆ™æ˜¯æ ¹æ®æœ€è¿‘ä½¿ç”¨åŸåˆ™è¿›è¡Œç®¡ç†</p>
</li>
<li>
<p>å¯„å­˜å™¨çš„æ•°æ®ä¿å­˜æˆ–è€…æ¢å¤ï¼Œä¾èµ–çš„æ˜¯è¿‡ç¨‹è°ƒç”¨åµŒå¥—çš„æ·±åº¦ã€‚cacheæ ¹æ®æ›¿æ¢ç®—æ³•è¿›è¡Œæ›¿æ¢</p>
</li>
<li>
<p>å¯„å­˜å™¨ç»„é‡‡ç”¨çš„æ˜¯å¯„å­˜å™¨å¯»å€ã€‚cacheé‡‡ç”¨çš„æ˜¯å†…å­˜å¯»å€</p>
</li>
</ul>
<hr>
<ul>
<li>
<p>The register saves time because all local scalar variables are retained</p>
<ul>
<li>Not efficient use of space, because not all procedures will need the full window space allocated to them</li>
</ul>
</li>
<li>
<p>The cache may make more efficient use of space because it stores necessary data dynamically</p>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter13-3.png" title="/img/Computer Organization and Architecture/chapter13-3.png" data-thumbnail="/img/Computer Organization and Architecture/chapter13-3.png" data-sub-html="<h2>Register access</h2>">
        
    </a><figcaption class="image-caption"><code>Register access</code></figcaption>
    </figure>
<ul>
<li>
<p>è¦è®¿é—®åŸºäºçª—å£çš„å¯„å­˜å™¨ç»„ä¸­çš„ä¸€ä¸ªæ ‡é‡å˜é‡ï¼Œéœ€è¦ç»™å‡ºçª—å£å·å’Œä¸€ä¸ªå¯„å­˜å™¨å·</p>
</li>
<li>
<p>é€šè¿‡ä¸€ä¸ªç›¸å¯¹ç®€å•çš„è¯‘ç å™¨ï¼Œå°±å¯ä»¥å¾—åˆ°å¯¹åº”çš„å¯„å­˜å™¨ï¼Œè¯»å‡ºè¿™ä¸ªæ•°æ®</p>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter13-4.png" title="/img/Computer Organization and Architecture/chapter13-4.png" data-thumbnail="/img/Computer Organization and Architecture/chapter13-4.png" data-sub-html="<h2>Cache access</h2>">
        
    </a><figcaption class="image-caption"><code>Cache access</code></figcaption>
    </figure>
<ul>
<li>
<p>å¯¹äºcacheè®¿é—®ï¼Œéœ€è¦ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„åœ°å€ï¼Œæ“ä½œçš„å¤æ‚åº¦å’Œå¯»å€æ–¹å¼æœ‰å…³</p>
</li>
<li>
<p>è¿›è¡Œå¯¹æ¯”ï¼Œçœ‹æ•°æ®æ˜¯å¦å‘½ä¸­</p>
</li>
<li>
<p>å¦‚æœå‘½ä¸­ï¼Œå°±å¯ä»¥è¯»å–æ•°æ®</p>
</li>
<li>
<p>å¦‚æœæ²¡æœ‰å‘½ä¸­ï¼Œé‚£ä¹ˆå°±éœ€è¦å…ˆæ›¿æ¢cacheè¡Œï¼Œç„¶åæ‰èƒ½å¾—åˆ°æ•°æ®</p>
</li>
</ul>
<h3 id="compiler-based-register-optimization">Compiler-Based Register Optimization</h3>
<ul>
<li>
<p><strong>HLL programs have no explicit references to registers</strong></p>
</li>
<li>
<p><strong>Optimizing use is up to compiler</strong></p>
<ul>
<li>
<p>Assign symbolic or virtual register to each candidate variable</p>
</li>
<li>
<p>Map symbolic registers to real registers</p>
</li>
<li>
<p>Symbolic registers that do not overlap can share real registers</p>
</li>
<li>
<p>If you run out of real registersï¼Œsome variables use memory</p>
</li>
</ul>
</li>
<li>
<p><strong>The essence is to judge which data needs to be put in the register at any time</strong></p>
</li>
</ul>
<h4 id="graph-coloring">Graph coloring</h4>
<ul>
<li>
<p>Symbol registers is more than register</p>
</li>
<li>
<p>determine which symbol registers can use the actual registers</p>
</li>
<li>
<p><strong>Using Graph Coloring of topology</strong></p>
<ul>
<li>
<p>Given a graph of nodes and edges</p>
</li>
<li>
<p>Assign a colour to each node</p>
</li>
<li>
<p>Adjacent nodes have different colours</p>
</li>
<li>
<p>Use minimum number of colours</p>
</li>
</ul>
</li>
<li>
<p>Nodes are symbolic registers</p>
</li>
<li>
<p>Two registers that are live in the same program fragment are joined by an edge</p>
</li>
<li>
<p>Try to colour the graph with <em>n</em> colours, where <em>n</em> is the number of real registers</p>
</li>
<li>
<p>Nodes that can not be coloured are placed in memory</p>
</li>
</ul>
<hr>
<p><strong>Graph colouring approach</strong></p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter13-5.png" title="/img/Computer Organization and Architecture/chapter13-5.png" data-thumbnail="/img/Computer Organization and Architecture/chapter13-5.png">
        
    </a>
<ul>
<li>
<p>æ„é€ æ— å‘å›¾ï¼šAå’ŒBCåœ¨æ—¶é—´ä¸Šæœ‰é‡å ï¼ŒAå’ŒBCæœ‰è¿çº¿ï¼›Bå’Œæ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æœ‰æ—¶é—´é‡å ï¼ŒBå’Œæ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æœ‰è¿çº¿ã€‚Cå’ŒABDæœ‰æ—¶é—´ä¸Šçš„é‡å ï¼ŒCå’ŒABDæœ‰è¿çº¿</p>
</li>
<li>
<p>ä»Aå¼€å§‹ï¼Œç»™Aèµ‹ä¸€ä¸ªç°è‰²ï¼ŒBå’ŒCå¿…é¡»è¦å’ŒAä¸ä¸€æ ·ï¼Œå¹¶ä¸”Bå’ŒCä¹Ÿä¸èƒ½ä¸€æ ·ï¼Œç»™Bé™„ä¸€ä¸ªé¡ºæ–œæ ï¼ŒCèµ‹ä¸€ä¸ªåæ–œæ ã€‚DèŠ‚ç‚¹å’ŒBCç›¸è¿ï¼Œå’ŒAä¸ç›¸è¿ï¼ŒDç‚¹å¯ä»¥ç”¨ç°è‰²ã€‚EèŠ‚ç‚¹å’ŒBDç›¸è¿ï¼ŒEå¯ä»¥ç”¨Cçš„é¢œè‰²ã€‚Få’ŒBEDç›¸è¿ï¼Œè€ŒBDEåˆ†åˆ«æ˜¯æ­£æ–œæ ã€ç°è‰²å’Œåæ–œæ ï¼ŒFå¿…é¡»è¦ç”¨åˆ°ç¬¬å››ä¸ªé¢œè‰²</p>
</li>
<li>
<p>å¦‚æœç‰©ç†å¯„å­˜å™¨åªæœ‰3ä¸ªçš„è¯ï¼Œé‚£ä¹ˆFå°±éœ€è¦ä¿å­˜åˆ°å­˜å‚¨å™¨ä¸­äº†ï¼Œé€šè¿‡åŠ è½½å’Œä¿å­˜æ¥å¤„ç†</p>
</li>
</ul>
<h4 id="large-register-vs-compiler">Large Register vs Compiler</h4>
<ul>
<li>
<p>When the number of registers is small, the effect will be better by optimizing the registers</p>
</li>
<li>
<p>When the number of registers is large, the effect of register optimization will not be very good</p>
</li>
<li>
<p>Optimization of registers is mainly for the case of a small number of registers</p>
</li>
</ul>
<h3 id="risc-pipelining">RISC Pipelining</h3>
<ul>
<li>
<p>Most instructions are register to register</p>
</li>
<li>
<p>Two phases of execution</p>
<ul>
<li>
<p>I: Instruction fetch</p>
</li>
<li>
<p>E: Execute</p>
<ul>
<li>ALU operation with register input and output</li>
</ul>
</li>
</ul>
</li>
<li>
<p>For load and store</p>
<ul>
<li>
<p>I: Instruction fetch</p>
</li>
<li>
<p>E: Execute: Calculate memory address</p>
</li>
<li>
<p>D: Register to memory or memory to register operation</p>
</li>
</ul>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter13-6.png" title="/img/Computer Organization and Architecture/chapter13-6.png" data-thumbnail="/img/Computer Organization and Architecture/chapter13-6.png">
        
    </a>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter13-7.png" title="/img/Computer Organization and Architecture/chapter13-7.png" data-thumbnail="/img/Computer Organization and Architecture/chapter13-7.png">
        
    </a>
<ul>
<li>
<p>å›¾aæ˜¯æ²¡æœ‰é‡‡ç”¨æµæ°´çº¿æŠ€æœ¯ï¼Œå®Œå…¨æŒ‰ç…§é¡ºåºæ¥æ‰§è¡Œ</p>
</li>
<li>
<p><strong>å›¾bæ˜¯é‡‡ç”¨ä¸¤é˜¶æ®µæµæ°´çº¿çš„æ‰§è¡Œæƒ…å†µã€‚ç”±äºåŒæ—¶åªèƒ½æœ‰1ä¸ªå­˜å‚¨å™¨è®¿é—®ï¼Œå–æŒ‡å’Œå­˜å‚¨ä¼šå†²çªï¼Œå¯¼è‡´å–æŒ‡ä¼šå»¶åä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸ</strong></p>
</li>
<li>
<p>å­˜å‚¨å™¨çš„è®¿é—®é™åˆ¶å¯¼è‡´äº†æ—¶é’Ÿå‘¨æœŸçš„æµªè´¹</p>
</li>
<li>
<p>å¦‚æœå­˜å‚¨æ”¯æŒ2ä¸ªè®¿é—®ï¼Œå¯ä»¥ç”¨ä¸‰é˜¶æ®µæµæ°´çº¿</p>
</li>
<li>
<p>æŒ‡ä»¤ç›¸å…³æ€§ï¼šAdd rC$\leftarrow$rA+rBï¼ŒæŒ‡ä»¤éœ€è¦çš„æ“ä½œæ•°ä¸ºrAå’ŒrBã€‚è€Œç¬¬äºŒæ¡æŒ‡ä»¤è¦åˆ°ç¬¬å››ä¸ªæ—¶é’Ÿå‘¨æœŸæ‰èƒ½å¾—åˆ°rBã€‚æ‰€ä»¥è¦æ’å…¥ä¸€ä¸ªç©ºæŒ‡ä»¤NOOP</p>
</li>
<li>
<p>æŒ‡ä»¤æ‰§è¡Œé˜¶æ®µï¼Œé€šå¸¸æ¶‰åŠåˆ°å¯„å­˜å™¨çš„è¯»å’ŒALUçš„æ“ä½œï¼ŒæŠŠEé˜¶æ®µè¿›ä¸€æ­¥åˆ†ä¸ºE1å’ŒE2ã€‚å…¶ä¸­E1é˜¶æ®µå®Œæˆå¯„å­˜å™¨çš„è¯»ï¼Œè€ŒE2é˜¶æ®µåˆ™å®ŒæˆALUæ“ä½œå’Œå¯„å­˜å™¨çš„å†™æ“ä½œ</p>
</li>
<li>
<p>ä½¿ç”¨å››é˜¶æ®µæµæ°´çº¿æ¥æé«˜æ•ˆç‡ã€‚ä½†åŒæ ·éœ€è¦è€ƒè™‘ç›¸å…³æ€§é—®é¢˜</p>
</li>
</ul>
<h4 id="optimization-of-pipelining">Optimization of Pipelining</h4>
<ul>
<li>
<p>Dependency of data and branch will disrupt the pipeline and affect the efficiency</p>
</li>
<li>
<p>Two methods: Delayed branch, Loop Unrolling</p>
</li>
<li>
<p>Delayed branch</p>
<ul>
<li>
<p>Branch instruction affects only the instructions that follow it</p>
</li>
<li>
<p>This following instruction is the delay slot</p>
</li>
<li>
<p><strong>Arrange a useful instruction to replace the NOOP instruction</strong></p>
</li>
</ul>
</li>
</ul>
<h4 id="delayed-branch">delayed branch</h4>
<ul>
<li>
<p><strong>Calculate result of branch before unusable instructions pre-fetched</strong></p>
<ul>
<li>
<p><strong>Instructions that are not affected by branches are immediately followed by branch</strong></p>
</li>
<li>
<p><strong>Keeps pipeline full while fetching new instruction stream</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Not as good for superscalar</strong></p>
<ul>
<li>
<p>Multiple instructions need to execute in delay slot</p>
</li>
<li>
<p>Instruction dependence problems</p>
</li>
<li>
<p>Often use branch prediction</p>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p>Problem: How do you find instructions to fill the delay slots?</p>
<ul>
<li>
<p>Branch must be independent of delay slot instructions</p>
</li>
<li>
<p>Unconditional branch: Easier to find instructions to fill the delay slot</p>
</li>
<li>
<p>Conditional branch: Condition computation should not depend on instructions in delay slots â†’ difficult to fill the delay slot</p>
</li>
</ul>
</li>
</ul>
<h4 id="advantage">Advantage</h4>
<ul>
<li>
<p>Keeps the pipeline full with useful instructions in a simple way assuming</p>
<ul>
<li>
<p>Number of delay slots = number of instructions to keep the pipeline full before the branch resolves</p>
</li>
<li>
<p>All delay slots can be filled with useful instructions</p>
</li>
</ul>
</li>
</ul>
<h4 id="disadvantage">Disadvantage</h4>
<ul>
<li>
<p>Not easy to fill the delay slots (even with a 2-stage pipeline)</p>
<ul>
<li>
<p>Number of delay slots increases with pipeline depth, superscalar execution width</p>
</li>
<li>
<p>Number of delay slots should be variable with variable latency operations</p>
</li>
</ul>
</li>
</ul>
<h4 id="another-method-loop-unrolling">Another method-Loop Unrolling</h4>
<ul>
<li>
<p>Replicate body of loop a number of times</p>
<ul>
<li>Iterate loop fewer times</li>
<li>Reduces loop overhead</li>
<li>Increases instruction parallelism</li>
</ul>
</li>
<li>
<p>During the execution of the loop body, because of the locality principle, some data can be used for many times, which can reduce the number of times to access the</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fortran" data-lang="fortran"><span class="line"><span class="cl"><span class="k">do </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">end do</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>åŸå§‹çš„å¾ªç¯æ˜¯è¦åšä¸€ä¸ªä¸€ç»´æ•°ç»„çš„å˜åŒ–ã€‚å¾ªç¯ä½“ä¸­æœ‰ä¸€ä¸ªè¯­å¥éœ€è¦æ‰§è¡Œ</p>
</li>
<li>
<p>æŠŠè¿™ä¸ªå¾ªç¯ä½“è¿›è¡Œæ‹†è§£ï¼Œå˜æˆäº†2ä¸ªè¯­å¥ï¼Œä¸€ä¸ªå¾ªç¯ä½“æ‰§è¡Œäº†2ä¸ªè¿­ä»£æ“ä½œ</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fortran" data-lang="fortran"><span class="line"><span class="cl"><span class="k">do </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">end do</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>2ä¸ªæŒ‡ä»¤å¯ä»¥å¹¶è¡Œè¿›è¡Œã€‚åŸæ¥æ¯æ¬¡å¾ªç¯éœ€è¦è®¿é—®3æ¬¡å­˜å‚¨å™¨ï¼Œç°åœ¨ç›¸å½“äº2æ¬¡å¾ªç¯åªéœ€è¦è®¿é—®4æ¬¡å­˜å‚¨å™¨ï¼Œé™ä½äº†å­˜å‚¨å™¨è®¿é—®çš„æ¬¡æ•°</li>
</ul>
<h3 id="risc-versus-cisc-controversy">RISC Versus CISC Controversy</h3>
<ul>
<li>
<p>Not clear cut</p>
<ul>
<li>
<p>RISC designs may benefit from the inclusion of some CISC features and that</p>
</li>
<li>
<p>CISC designs may benefit from the inclusion of some RISC features</p>
</li>
</ul>
</li>
<li>
<p>Many designs borrow from both philosophies</p>
<ul>
<li>
<p>PowerPC are no longer â€œpureâ€ RISC</p>
</li>
<li>
<p>Pentium II and later Pentium models do incorporate some RISC characteristics</p>
</li>
</ul>
</li>
</ul>
]]></description>
</item>
<item>
    <title>Computer Organization and Architecture Processor Structure and Function</title>
    <link>https://Jungle430.github.io/posts/computer-organization-and-architecture/computer-organization-and-architecture-processor-structure-and-function/</link>
    <pubDate>Sat, 28 Jan 2023 14:20:25 &#43;0800</pubDate><author>1239946358@qq.com (Jungle)</author><guid>https://Jungle430.github.io/posts/computer-organization-and-architecture/computer-organization-and-architecture-processor-structure-and-function/</guid>
    <description><![CDATA[<h1 id="computer-organization-and-architecture">Computer Organization and Architecture</h1>
<h2 id="processor-structure-and-function">Processor Structure and Function</h2>
<h3 id="outline">Outline</h3>
<ul>
<li>
<p>Processor Organization</p>
</li>
<li>
<p>Register Organization</p>
</li>
<li>
<p>Instruction Cycle</p>
</li>
<li>
<p>Instruction Pipelining</p>
</li>
</ul>
<h3 id="processor-organization">Processor Organization</h3>
<ul>
<li>
<p>A CPU must be able to</p>
<ul>
<li>
<p>Fetch instruction from memory</p>
</li>
<li>
<p>Decode the instruction to determine what action to do</p>
</li>
<li>
<p>Fetch data</p>
</li>
<li>
<p>Process data</p>
</li>
<li>
<p>Write data</p>
</li>
</ul>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter12-1.png" title="/img/Computer Organization and Architecture/chapter12-1.png" data-thumbnail="/img/Computer Organization and Architecture/chapter12-1.png">
        
    </a>
<ul>
<li>
<p>CPUå¿…é¡»è¦èƒ½å¤Ÿæš‚æ—¶ä¿å­˜ä¸€äº›æ•°æ®ï¼Œä»¥å¯¹æ•°æ®è¿›è¡Œå¤„ç†</p>
</li>
<li>
<p>CPUéœ€è¦è®°ä½ä¸‹ä¸€ä¸ªæŒ‡ä»¤çš„ä½ç½®ï¼Œè¿™æ ·æ‰èƒ½åœ¨å½“å‰æŒ‡ä»¤æ‰§è¡Œå®Œæˆä¹‹åï¼Œèƒ½åˆ°æ‰¾åˆ°ä¸‹ä¸€ä¸ªæŒ‡ä»¤</p>
</li>
<li>
<p>å¤„ç†è¿‡ç¨‹ä¸­éœ€è¦èƒ½å¤Ÿä¿å­˜æŒ‡ä»¤å’Œæ•°æ®</p>
</li>
<li>
<p><strong>CPUåŒ…æ‹¬ALUï¼ŒCUï¼Œè¿˜éœ€è¦æœ‰ä¸€ç»„å­˜å‚¨éƒ¨ä»¶â€”â€”å¯„å­˜å™¨</strong></p>
</li>
<li>
<p>CPUé€šè¿‡ä¸€ç»„ç³»ç»Ÿæ€»çº¿å’Œè®¡ç®—æœºçš„å…¶ä»–éƒ¨ä»¶è¿›è¡Œè¿æ¥ã€‚ç³»ç»Ÿæ€»çº¿åŒ…æ‹¬æ§åˆ¶æ€»çº¿ã€æ•°æ®æ€»çº¿å’Œåœ°å€æ€»çº¿</p>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter12-2.png" title="/img/Computer Organization and Architecture/chapter12-2.png" data-thumbnail="/img/Computer Organization and Architecture/chapter12-2.png">
        
    </a>
<ul>
<li>
<p><strong>CPUçš„å†…éƒ¨æ€»çº¿æŠŠALUã€å¯„å­˜å™¨å’ŒCUè¿åœ¨ä¸€èµ·ï¼Œå®Œæˆæ•°æ®åœ¨å¯„å­˜å™¨å’ŒALUçš„ä¼ é€</strong></p>
</li>
<li>
<p>æ§åˆ¶å•å…ƒå¯¹å¯„å­˜å™¨ã€å†…éƒ¨æ€»çº¿å’ŒALUè¿›è¡Œæ§åˆ¶ï¼Œæ§åˆ¶å„ä¸ªéƒ¨ä»¶æŒ‰ç…§æŒ‡ä»¤è¦æ±‚å®Œæˆç›¸åº”çš„å¤„ç†</p>
</li>
<li>
<p>åœ¨ALUå†…éƒ¨ï¼Œè¿˜åŒ…æ‹¬å„ç§æ›´å°çš„ç»„ä»¶ï¼Œä¾‹å¦‚çŠ¶æ€æ ‡å¿—ï¼Œç§»ä½å™¨ï¼Œæ±‚è¡¥å™¨ï¼Œä»¥åŠç®—æœ¯å’Œå¸ƒå°”é€»è¾‘ç­‰</p>
</li>
</ul>
<h3 id="register-organization">Register Organization</h3>
<ul>
<li>
<p>CPU must have some working space (temporary storage)</p>
<ul>
<li>Called registers</li>
</ul>
</li>
<li>
<p>Number and function vary between processor designs</p>
</li>
<li>
<p><strong>One of the major design decisions</strong></p>
</li>
<li>
<p><strong>Top level of memory hierarchy</strong></p>
</li>
</ul>
<hr>
<ul>
<li>
<p><strong>Registers in the CPU Including two types</strong></p>
<ul>
<li>
<p><strong>User-visible registers</strong></p>
</li>
<li>
<p><strong>Reduce access to main memory and improve instruction processing efficiency by optimizing the use of registers</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Control and status registers</strong></p>
<ul>
<li>
<p><strong>Used by control unit</strong></p>
</li>
<li>
<p><strong>Control the operation of the CPU and the execution of the program by the privileged operating system</strong></p>
</li>
</ul>
</li>
</ul>
<h4 id="user-visible-registers">User-visible registers</h4>
<ul>
<li>
<p>User visible registers can be divided into four categories according to its purpose</p>
<ul>
<li>
<p><strong>General purpose: assigned to various purposes</strong></p>
</li>
<li>
<p><strong>Data: for data retention only</strong></p>
</li>
<li>
<p><strong>Address: used for some addressing mode</strong></p>
</li>
<li>
<p><strong>Condition codes: also called flag register, it stores some flags of operation results</strong></p>
</li>
</ul>
</li>
</ul>
<h5 id="general-purpose-registers">General purpose registers</h5>
<ul>
<li>
<p>True general purpose</p>
<ul>
<li>Registers and opcodes are orthogonal in the instruction set</li>
<li>Registers can be arbitrarily matched with opcodes</li>
</ul>
</li>
<li>
<p><strong>Restricted general registers</strong></p>
<ul>
<li><strong>Specially used for floating point number or stack operation</strong></li>
</ul>
</li>
<li>
<p>In some cases, general registers can be used for addressing</p>
<ul>
<li>Register indirect addressing</li>
<li>Displacement addressing</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p>Data register</p>
<ul>
<li><strong>It can only be used for store data, not for addressing</strong></li>
<li><strong>Accumulator</strong></li>
</ul>
</li>
<li>
<p><strong>Addressing register</strong></p>
<ul>
<li>
<p><strong>Used for a specific addressing mode</strong></p>
</li>
<li>
<p><strong>Segment pointer</strong></p>
</li>
<li>
<p><strong>Index register</strong></p>
</li>
<li>
<p><strong>Stack pointer</strong></p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>General or Specialized</strong></p>
<ul>
<li>
<p>Whether registers are general or special affects the design of instruction sets</p>
</li>
<li>
<p><strong>Specialized</strong></p>
<ul>
<li>
<p><strong>Opcode can implicitly use a register group or a register</strong></p>
</li>
<li>
<p><strong>Smaller instructions</strong></p>
</li>
<li>
<p><strong>Less flexibility</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>General purpose</strong></p>
<ul>
<li>
<p><strong>Increase flexibility and programmer options</strong></p>
</li>
<li>
<p><strong>Increase instruction size &amp; complexity</strong></p>
</li>
</ul>
</li>
<li>
<p>More registers require more bits to specify registers in instructions</p>
</li>
<li>
<p>Fewer registers require more memory access</p>
</li>
<li>
<p>Too many registers does not reduce memory references remarkably and takes up processor real estate</p>
<ul>
<li>Between 8-32 is appropriate</li>
</ul>
</li>
<li>
<p><strong>Using register files with RISC makes use of using more registers</strong></p>
</li>
</ul>
<hr>
<ul>
<li>
<p>Address register: large enough to hold full address</p>
</li>
<li>
<p>Data address: large enough to hold full word</p>
</li>
<li>
<p><strong>Sometimes combine two data registers to hold double length data</strong></p>
<ul>
<li><strong>In C language, there is a double integer and a long integer, both of which are two words long</strong></li>
</ul>
</li>
</ul>
<hr>
<p><strong>Condition code registers</strong></p>
<ul>
<li>
<p><strong>Also called flag registers, some of which are visible to users</strong></p>
</li>
<li>
<p><strong>After operating,CPU set the condition bit according to the result</strong></p>
<ul>
<li>
<p>After arithmetic operation, positive, negative, zero or overflow may occur</p>
</li>
<li>
<p>These conditions will be set in</p>
</li>
</ul>
</li>
<li>
<p>Programs are allowed to read the condition code and perform</p>
</li>
<li>
<p>Condition code cannot be modified by the program</p>
</li>
</ul>
<hr>
<p><strong>Control &amp; status registers</strong></p>
<ul>
<li>
<p>Four registers are essential to instruction execution</p>
<ul>
<li>
<p>Program Counter (PC)</p>
</li>
<li>
<p>Instruction Register (IR)</p>
</li>
<li>
<p>Memory Address Register (MAR)</p>
</li>
<li>
<p>Memory Buffer Register (MBR)</p>
</li>
</ul>
</li>
<li>
<p>Not all processors have MAR and MBR. However, the system still needs registers similar to these two registers</p>
</li>
</ul>
<hr>
<p><strong>Program status word</strong></p>
<ul>
<li>
<p>The PSW contains status information</p>
</li>
<li>
<p>The flags include</p>
<ul>
<li>
<p>Sign, zero, carry, equal, overflow</p>
</li>
<li>
<p>interrupt enable/disable</p>
</li>
<li>
<p>Supervisor: indicates whether the CPU is executing in supervisor or user mode</p>
</li>
</ul>
</li>
<li>
<p><strong>Supervisor mode</strong></p>
<ul>
<li>
<p>Not available to user programs</p>
</li>
<li>
<p>Used by operating system(<strong>System call</strong>)</p>
</li>
<li>
<p>Certain privileged instructions can be executed only in supervisor mode</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Other status and control registers</strong></p>
<ul>
<li>
<p>Other additional status and control registers</p>
<ul>
<li>
<p>Pointer register to process control block</p>
</li>
<li>
<p>Interrupt vector register in vector interrupt computer</p>
</li>
<li>
<p>System stack pointer</p>
</li>
<li>
<p>Page table pointer register in virtual memory</p>
</li>
<li>
<p>I/O operation related registers</p>
</li>
</ul>
</li>
<li>
<p>Control and status registers design elements</p>
<ul>
<li>Need to support the operating system</li>
<li>Storage location in registers and memory</li>
</ul>
</li>
</ul>
<h3 id="instruction-cycle">Instruction Cycle</h3>
<ul>
<li>
<p><strong>Instruction cycle includes fetching cycle and execution cycle</strong></p>
</li>
<li>
<p><strong>In execution cycle, first decode to get the operation type of the instruction</strong></p>
</li>
<li>
<p><strong>If instruction has operands, get the operand specifier in the instruction</strong></p>
<ul>
<li>
<p><strong>Immediate</strong></p>
</li>
<li>
<p><strong>Register</strong></p>
</li>
<li>
<p><strong>Direct addressing: memory access once</strong></p>
</li>
<li>
<p><strong>Indirect addressing: may requires more memory accesses</strong></p>
<ul>
<li><strong>Also called â€œindirect cycleâ€</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Instruction cycle with indirect</strong></p>
<div class="mermaid" id="id-1"></div>
<ul>
<li>
<p>æŒ‡ä»¤å‘¨æœŸåŒ…æ‹¬å–æŒ‡å‘¨æœŸå’Œæ‰§è¡Œå‘¨æœŸï¼Œè¿˜å¯èƒ½åŒ…æ‹¬é—´æ¥å‘¨æœŸå’Œä¸­æ–­å‘¨æœŸ</p>
</li>
<li>
<p>å–æŒ‡åï¼Œé€šè¿‡è¯‘ç ç¡®å®šæ˜¯å¦åŒ…å«éœ€è¦é—´æ¥å¯»å€çš„æ“ä½œæ•°ï¼Œå¦‚æœæœ‰ï¼Œè¿›å…¥é—´æ¥å‘¨æœŸ</p>
</li>
<li>
<p>å½“å‰æŒ‡ä»¤æ‰§è¡Œå®Œæˆä¹‹åï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ä¸­æ–­ã€‚å¦‚æœæœ‰ï¼Œè¿›å…¥ä¸­æ–­å‘¨æœŸ</p>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter12-3.png" title="/img/Computer Organization and Architecture/chapter12-3.png" data-thumbnail="/img/Computer Organization and Architecture/chapter12-3.png" data-sub-html="<h2>Instruction Cycle(with Interrupts - State Diagram)</h2>">
        
    </a><figcaption class="image-caption">Instruction Cycle(with Interrupts - State Diagram)</figcaption>
    </figure>
<ul>
<li>
<p>æŒ‡ä»¤å‘¨æœŸä¸­ï¼Œå…ˆå–æŒ‡ï¼Œç„¶åè¿›è¡ŒæŒ‡ä»¤æ“ä½œè¯‘ç </p>
</li>
<li>
<p>å¦‚æœæ¶‰åŠåˆ°æ“ä½œæ•°ï¼Œè¿›è¡Œæ“ä½œæ•°åœ°å€è®¡ç®—ï¼Œç„¶åå–æ“ä½œæ•°</p>
</li>
<li>
<p>ä¹‹åè¿›è¡Œæ•°æ®æ“ä½œã€‚æ“ä½œç»“æœå¦‚æœè¦ä¿å­˜åˆ°å­˜å‚¨å™¨ä¸­ï¼Œéœ€è¦è®¡ç®—æ“ä½œæ•°çš„åœ°å€ï¼Œç„¶åä¿å­˜</p>
</li>
<li>
<p>åœ¨è¿™æ¡æŒ‡ä»¤æ‰§è¡Œå®Œæˆä¹‹åï¼Œæ£€æµ‹æ˜¯å¦æœ‰ä¸­æ–­ã€‚å¦‚æœæ²¡æœ‰ä¸­æ–­ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚å¦‚æœæœ‰ä¸­æ–­ï¼Œå°±æŒ‰ç…§ä¸­æ–­çš„å¤„ç†è§„åˆ™ï¼Œè¿›è¡Œä¸­æ–­å¤„ç†</p>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter12-4.png" title="/img/Computer Organization and Architecture/chapter12-4.png" data-thumbnail="/img/Computer Organization and Architecture/chapter12-4.png" data-sub-html="<h2>Indirect cycle</h2>">
        
    </a><figcaption class="image-caption">Indirect cycle</figcaption>
    </figure>
<ul>
<li>
<p>é—´æ¥å¯»å€è¿‡ç¨‹ä¸­ï¼Œç”±äºæ“ä½œæ•°åœ°å€éœ€è¦é€šè¿‡è®¡ç®—å¾—åˆ°ï¼Œæ‰€ä»¥åœ¨å–æ“ä½œæ•°çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå­˜åœ¨å¤šæ¬¡è®¿é—®å­˜å‚¨å™¨çš„æƒ…å†µ</p>
</li>
<li>
<p>å–æ“ä½œæ•°å’Œå­˜ç»“æœçš„è¿‡ç¨‹ä¸­ï¼Œéƒ½å¯èƒ½ä¼šå­˜åœ¨é—´æ¥å‘¨æœŸ</p>
</li>
</ul>
<hr>
<p><strong>Data flow (instruction fetch)</strong></p>
<ul>
<li>
<p>Depends on CPU design</p>
</li>
<li>
<p>Fetch inn general</p>
<ul>
<li>
<p>PC contains address of next instruction</p>
</li>
<li>
<p>Address moved to MAR</p>
</li>
<li>
<p>Address placed on address bus</p>
</li>
<li>
<p>Control unit requests memory read</p>
</li>
<li>
<p>Result placed on data bus, copied to MBR, then to IR</p>
</li>
<li>
<p>Meanwhile PC incremented by 1</p>
</li>
</ul>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter12-5.png" title="/img/Computer Organization and Architecture/chapter12-5.png" data-thumbnail="/img/Computer Organization and Architecture/chapter12-5.png" data-sub-html="<h2>Data flow(fetch diagram)</h2>">
        
    </a><figcaption class="image-caption"><code>Data flow(fetch diagram)</code></figcaption>
    </figure>
<ul>
<li>
<p>åˆšå¼€å§‹ï¼Œä¸‹ä¸€ä¸ªåœ°å€åœ¨PCä¸­</p>
</li>
<li>
<p>åœ°å€ç»™MAR</p>
</li>
<li>
<p>åœ°å€æ”¾åˆ°æ•°æ®æ€»çº¿ä¸Š</p>
</li>
<li>
<p>æ§åˆ¶å•å…ƒå‘èµ·è¯»æ§åˆ¶</p>
</li>
<li>
<p>å­˜å‚¨å™¨æŠŠæ•°æ®ï¼Œä¹Ÿå°±æ˜¯æŒ‡ä»¤å†…å®¹ï¼Œæ”¾åˆ°æ•°æ®æ€»çº¿ä¸Š</p>
</li>
<li>
<p>MBRè¯»å–æ•°æ®æ€»çº¿å†…å®¹ï¼Œç„¶åæŠŠæŒ‡ä»¤ç»™IR</p>
</li>
<li>
<p>æ§åˆ¶å•å…ƒè¿˜éœ€è¦è®©PC+1ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªæŒ‡ä»¤</p>
</li>
</ul>
<hr>
<ul>
<li>
<p>IR is examined</p>
</li>
<li>
<p><strong>If there is no indirect addressing, enter the execution cycle</strong></p>
</li>
<li>
<p><strong>If indirect addressing, indirect cycle is performed</strong></p>
<ul>
<li>
<p>Rightmost N bits of MBR transferred to MAR</p>
</li>
<li>
<p>Control unit requests memory read</p>
</li>
<li>
<p>Result (address of operand) moved to MBR</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Data flow (execute)</strong></p>
<ul>
<li>
<p>May take many forms</p>
</li>
<li>
<p>Depends on instruction being executed</p>
</li>
<li>
<p>May include</p>
<ul>
<li>
<p>Memory read/write</p>
</li>
<li>
<p>Input/Output</p>
</li>
<li>
<p>Register transfers</p>
</li>
<li>
<p>ALU operations</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Data flow (interrupt)</strong></p>
<ul>
<li>
<p>Simple and predictable</p>
</li>
<li>
<p><strong>Current PC saved to allow resumption after interrupt</strong></p>
<ul>
<li>
<p>Contents of PC copied to MBR</p>
</li>
<li>
<p>Special memory location (e.g. stack pointer) loaded to MAR</p>
</li>
<li>
<p>MBR written to memory</p>
</li>
</ul>
</li>
<li>
<p><strong>PC loaded with address of interrupt handling routine</strong></p>
</li>
<li>
<p>Interrupt handler first instruction fetched</p>
</li>
</ul>
<h3 id="instruction-pipelining">Instruction Pipelining</h3>
<p><strong>Why need pipeline?</strong></p>
<ul>
<li>
<p>Development of computer application requires continuous improvement of processing capacity</p>
</li>
<li>
<p>The development of integrated circuit, clock frequency, registers, cache, etc. have reduced the instruction processing time and improved the processing ability</p>
</li>
<li>
<p><strong>More and more difficult to solve problems by simply relying on the performance of hardware</strong></p>
</li>
<li>
<p><strong>The goal is the execution efficiency of instructions</strong></p>
</li>
<li>
<p><strong>Better organization is needed to improve the efficiency of instruction execution</strong></p>
</li>
</ul>
<hr>
<p><strong>What is pipeline? ï¼ ï¼ ï¼</strong></p>
<ul>
<li>
<p><strong>The working mode of factory assembly line is used for reference</strong></p>
<ul>
<li>
<p><strong>Divide the execution of instructions into several stages</strong></p>
</li>
<li>
<p><strong>Different stages of multiple instructions can be processed in parallel</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Although execution time of each instruction is not shortened, the execution time of a group of instructions is shortened due to the parallel method</strong></p>
</li>
<li>
<p><strong>This is the basic idea of instruction pipeline</strong></p>
</li>
</ul>
<h4 id="prefetch">Prefetch</h4>
<ul>
<li>
<p>Before pipelining, next instruction is taken after current instruction is executed</p>
</li>
<li>
<p>With pipelining, more than one instruction in different stages of the pipeline</p>
</li>
<li>
<p>How to get instructions is a problem</p>
<ul>
<li>
<p><strong>Fetch accessing main memory</strong></p>
</li>
<li>
<p><strong>Execution usually does not access memory</strong></p>
</li>
<li>
<p><strong>Fetch next instruction during execution of current instruction</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Called instruction prefetch</strong></p>
</li>
</ul>
<hr>
<p><strong>Advantage</strong></p>
<ul>
<li>
<p>During execution of an instruction, a new instruction has entered the pipeline</p>
</li>
<li>
<p><strong>After current instruction is executed, it can be executed immediately</strong></p>
<ul>
<li>
<p>Next instruction has finished fetching</p>
</li>
<li>
<p><strong>Save time for fetching</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Accessing memory is required for fetching</strong></p>
<ul>
<li>
<p>If cache hits, take it directly</p>
</li>
<li>
<p>If cache missing, access memory</p>
</li>
</ul>
</li>
<li>
<p>In fact, the instruction cycle is divided into more detailed stages, more pipeline stages, and more overlapping and efficient instruction execution stages</p>
</li>
</ul>
<hr>
<p><strong>Which instruction is Prefetched?</strong></p>
<ul>
<li>
<p>Which instruction is appropriate for prefetching?</p>
</li>
<li>
<p><strong>Next instruction of the current instruction?</strong></p>
<ul>
<li>
<p><strong>If it is executed sequentially, no problem</strong></p>
</li>
<li>
<p><strong>If there is a transition, the next instruction needs to be determined according to the conditions</strong></p>
</li>
<li>
<p><strong>Hard to predict</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Does a misprediction in prefetching affect correctness?</strong></p>
<ul>
<li>
<p><strong>No, prefetched data at a â€œmis-predictedâ€ address is simply not used</strong></p>
</li>
<li>
<p><strong>There is no need for state recovery</strong></p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Basics characteristics</strong></p>
<ul>
<li>
<p>In modern systems, prefetching is usually done in cache block granularity</p>
</li>
<li>
<p>Prefetching is a technique that can reduce both</p>
<ul>
<li>
<p>Miss rate</p>
</li>
<li>
<p>Miss latency</p>
</li>
</ul>
</li>
<li>
<p><strong>Prefetching can be done by</strong></p>
<ul>
<li><strong>Hardware</strong></li>
<li><strong>Compiler</strong></li>
<li><strong>Programmer</strong></li>
</ul>
</li>
</ul>
<h4 id="prefetching-the-four-questions">Prefetching: the four questions</h4>
<ul>
<li>
<p>What</p>
<ul>
<li>What addresses to prefetch</li>
</ul>
</li>
<li>
<p>When</p>
<ul>
<li>When to initiate a prefetch request</li>
</ul>
</li>
<li>
<p>Where</p>
<ul>
<li>Where to place the prefetched data</li>
</ul>
</li>
<li>
<p>How</p>
<ul>
<li>Software, hardware, execution-based, cooperative</li>
</ul>
</li>
</ul>
<h4 id="two-stage-instruction-pipeline">Two stage instruction pipeline</h4>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter12-6.png" title="/img/Computer Organization and Architecture/chapter12-6.png" data-thumbnail="/img/Computer Organization and Architecture/chapter12-6.png">
        
    </a>
<ul>
<li>
<p>ç®€å•çš„æŒ‡ä»¤è¿‡ç¨‹å°±æ˜¯ä¸²è¡Œå¤„ç†ï¼Œå–æŒ‡-æ‰§è¡Œ-å–æŒ‡-æ‰§è¡Œï¼Œæ•ˆç‡ä½</p>
</li>
<li>
<p>é‡‡ç”¨ä¸¤é˜¶æ®µæµæ°´çº¿åï¼Œåœ¨å½“å‰æŒ‡ä»¤çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè¿›è¡Œä¸‹ä¸€ä¸ªæŒ‡ä»¤çš„å–æŒ‡</p>
</li>
<li>
<p>å¦‚æœå½“å‰æŒ‡ä»¤æ‰§è¡Œå®Œæˆåï¼Œä¸‹ä¸€ä¸ªæŒ‡ä»¤ä¸æ˜¯é¢„å–çš„ï¼Œéœ€è¦é‡æ–°å–æŒ‡</p>
</li>
<li>
<p>å–æŒ‡å’Œæ‰§è¡ŒæŒ‡ä»¤çš„æ—¶é—´é‡å ï¼ŒèŠ‚çœäº†æ—¶é—´</p>
</li>
<li>
<p>ä½†æ˜¯ç”±äºå–æŒ‡å’Œæ‰§è¡ŒæŒ‡ä»¤çš„æ—¶é—´éœ€è¦ä¸ä¸€æ ·ï¼Œæ‰€ä»¥æ‰§è¡Œé€Ÿåº¦ä¸èƒ½ç¿»å€</p>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter12-7.png" title="/img/Computer Organization and Architecture/chapter12-7.png" data-thumbnail="/img/Computer Organization and Architecture/chapter12-7.png" data-sub-html="<h2>Instruction pipelining</h2>">
        
    </a><figcaption class="image-caption"><code>Instruction pipelining</code></figcaption>
    </figure>
<ul>
<li>
<p>ä¸¤é˜¶æ®µæµæ°´çº¿çš„æ‰§è¡Œè¿‡ç¨‹</p>
</li>
<li>
<p><strong>ä¸Šä¸€æ¡æŒ‡ä»¤çš„æ‰§è¡Œé˜¶æ®µå’Œä¸‹ä¸€æ¡æŒ‡ä»¤çš„å–æŒ‡é˜¶æ®µåœ¨æ—¶é—´ä¸Šæ˜¯é‡å çš„</strong></p>
</li>
<li>
<p>æ¯ä¸ªæŒ‡ä»¤çš„æ€»ä½“æ‰§è¡Œæ—¶é—´æ²¡æœ‰ç¼©çŸ­ï¼Œéƒ¨æŒ‡ä»¤çš„æ‰§è¡Œæ—¶é—´ç¼©çŸ­äº†</p>
</li>
<li>
<p>å¦‚æœå–æŒ‡å’Œæ‰§è¡Œæ—¶é—´ç›¸åŒï¼Œé‚£ä¹ˆæµæ°´çº¿çš„æ‰§è¡Œæ—¶é—´æ˜¯ä¸²è¡Œæ‰§è¡Œçš„ä¸€åŠï¼Œæ€§èƒ½æå‡ä¸€å€</p>
</li>
</ul>
<h4 id="improved-performance">Improved performance</h4>
<ul>
<li>
<p><strong>But not doubled</strong></p>
<ul>
<li>
<p><strong>Fetch usually shorter than execution</strong></p>
</li>
<li>
<p>Instruction execution process is complex and time-consuming</p>
</li>
<li>
<p><strong>Execution time determines the improvement effect</strong></p>
</li>
</ul>
</li>
<li>
<p>Jump or branch instruction</p>
<ul>
<li>
<p><strong>means that prefetched instructions are not the required instructions</strong></p>
</li>
<li>
<p><strong>Get the actual instructions according to the results</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Add more stages to improve performance</strong></p>
</li>
</ul>
<h4 id="improve-concurrency">improve concurrency</h4>
<ul>
<li>
<p>Goal: More concurrency â†’ Higher instruction throughput</p>
</li>
<li>
<p><strong>Method: When an instruction is using some resources in its processing phase, process other instructions on idle resources</strong></p>
<ul>
<li>
<p>Fetch next instruction when an instruction is being decoded</p>
</li>
<li>
<p>Decode an instruction when an instruction is being executed</p>
</li>
<li>
<p>Execute the next instruction when current instruction is accessing memory</p>
</li>
<li>
<p>When an instruction is writing its result into the register file, access data memory for the next instruction</p>
</li>
</ul>
</li>
</ul>
<h4 id="summary">Summary</h4>
<ul>
<li>
<p>Analogy: â€œAssembly line processingâ€ of instructions</p>
</li>
<li>
<p>Pipeline the execution of multiple instructions</p>
<ul>
<li>
<p><strong>Divide the instruction processing cycle into distinct â€œstagesâ€ of processing</strong></p>
</li>
<li>
<p>Ensure there are enough hardware resources to process one instruction in each stage</p>
</li>
<li>
<p>Process a different instruction in each stage</p>
</li>
<li>
<p>Instructions are executed in the order of program</p>
</li>
</ul>
</li>
<li>
<p><strong>Benefit: Increases instruction processing throughput</strong></p>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter12-8.png" title="/img/Computer Organization and Architecture/chapter12-8.png" data-thumbnail="/img/Computer Organization and Architecture/chapter12-8.png" data-sub-html="<h2>execution of four independent add</h2>">
        
    </a><figcaption class="image-caption">execution of four independent add</figcaption>
    </figure>
<ul>
<li>
<p>åŠ æ³•æŒ‡ä»¤æµæ°´çº¿</p>
</li>
<li>
<p>æ•´ä¸ªæŒ‡ä»¤åˆ†ä¸º4ä¸ªé˜¶æ®µï¼šå–æŒ‡ï¼Œè¯‘ç ï¼Œæ‰§è¡Œï¼Œå†™ç»“æœï¼Œå‡ä¸ºt</p>
</li>
<li>
<p>é‡‡ç”¨4é˜¶æ®µæµæ°´çº¿ï¼Œæ¯ä¸ªé˜¶æ®µå®Œå…¨ç‹¬ç«‹ï¼Œnä¸ªæŒ‡ä»¤ï¼Œéœ€è¦$nt+3t$çš„æ—¶é—´</p>
</li>
<li>
<p>åŸºæœ¬ä¸Šæ˜¯$\frac {1}{4}$çš„æ—¶é—´</p>
</li>
</ul>
<h4 id="in-practice">In practice</h4>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter12-9.png" title="/img/Computer Organization and Architecture/chapter12-9.png" data-thumbnail="/img/Computer Organization and Architecture/chapter12-9.png">
        
    </a>
<ul>
<li>
<p>çƒ˜å¹²è¡£æœéœ€è¦2ä¸ªæ—¶é—´å•ä½ï¼Œè¿™æ ·ï¼Œå¦‚æœå®Œå…¨ä¸²è¡Œï¼Œéœ€è¦20ä¸ªæ—¶é—´å•ä½</p>
</li>
<li>
<p>é‡‡ç”¨æµæ°´çº¿åï¼Œæœ‰ç­‰å¾…çƒ˜å¹²æœºçš„æ—¶é—´</p>
</li>
<li>
<p>4ä»¶è¡£æœéœ€è¦11ä¸ªæ—¶é—´å•ä½</p>
</li>
<li>
<p>ç†è®ºä¸Šçš„é€Ÿåº¦ä¸ºéæµæ°´çº¿çš„$2.5$å€</p>
</li>
<li>
<p><strong>æœ€æ…¢çš„æ­¥éª¤å†³å®šäº†æ•´ä¸ªç³»ç»Ÿçš„ååé‡</strong></p>
</li>
</ul>
<h5 id="how">How</h5>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter12-10.png" title="/img/Computer Organization and Architecture/chapter12-10.png" data-thumbnail="/img/Computer Organization and Architecture/chapter12-10.png">
        
    </a>
<ul>
<li>
<p>çƒ˜å¹²æœºæˆä¸ºæ•´ä¸ªç³»ç»Ÿçš„ç“¶é¢ˆ</p>
</li>
<li>
<p>è¡¥å……èµ„æºï¼Œé…ç½®2ä¸ªçƒ˜å¹²æœº</p>
</li>
<li>
<p>ä¸‹ä¸€ä¸ªè¡£æœæ´—å®Œåï¼Œä¸éœ€è¦ç­‰å¾…ä¸Šä¸€ä¸ªè¡£æœçš„çƒ˜å¹²ï¼Œç”¨å¦ä¸€å°çƒ˜å¹²æœº</p>
</li>
<li>
<p>å…³é”®ç¯èŠ‚å¢åŠ èµ„æºï¼Œä½¿å¾—æ•´ä¸ªååé‡å›åˆ°ä¹‹å‰çš„æƒ…å†µ</p>
</li>
<li>
<p>ä»£ä»·å°±æ˜¯é…ç½®é¢å¤–çš„èµ„æº</p>
</li>
</ul>
<h4 id="goal">Goal</h4>
<ul>
<li>
<p>Increase instruction throughput with little increase in cost</p>
<ul>
<li>
<p><strong>Process instructions in the order required by the program</strong></p>
</li>
<li>
<p><strong>Hardware cost cannot be increased too much</strong></p>
</li>
<li>
<p>Instruction throughput can be greatly increased</p>
</li>
</ul>
</li>
</ul>
<h4 id="an-ideal-pipeline">An ideal pipeline</h4>
<ul>
<li>
<p><strong>Repetition of identical operations</strong></p>
<ul>
<li>
<p><strong>Same operation, different operation objects</strong></p>
</li>
<li>
<p>Automobiles of the same model can be produced on one assembly line</p>
</li>
<li>
<p><strong>Different operations require different steps, which affects the operation of the pipeline</strong></p>
</li>
<li>
<p>The production of automobiles and motorcycles requires different steps and cannot be put on the same assembly line</p>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p><strong>Operating objects are independent of each other</strong></p>
<ul>
<li>
<p><strong>There is no dependency between each operation object</strong></p>
</li>
<li>
<p>For example, there is no relationship between cars produced on the assembly line</p>
</li>
<li>
<p><strong>Operating objects with sequential dependencies affect each other during parallel operations</strong></p>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p>A complete operation can be decomposed into several sub operations</p>
<ul>
<li>
<p><strong>Each sub operation takes the same time</strong></p>
</li>
<li>
<p><strong>Each sub operation requires independent resources and does not share resources</strong></p>
</li>
<li>
<p>If sub operation requires different time, some sub operations must wait</p>
</li>
<li>
<p>Resource sharing leads to resource contention</p>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p>For the pipeline design of instructions, we divide the execution of instructions into six stages</p>
<ul>
<li>
<p><strong>Fetch instruction(FI)</strong></p>
</li>
<li>
<p><strong>Decode instruction(DI)</strong></p>
</li>
<li>
<p><strong>Calculate operands(CO)</strong></p>
</li>
<li>
<p><strong>Fetch operands(FO)</strong></p>
</li>
<li>
<p><strong>Execute instructions(EI)</strong></p>
</li>
<li>
<p><strong>Write result(WO)</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Overlap these operations</strong></p>
</li>
</ul>
<h4 id="timing-of-pipeline">Timing of pipeline</h4>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter12-11.png" title="/img/Computer Organization and Architecture/chapter12-11.png" data-thumbnail="/img/Computer Organization and Architecture/chapter12-11.png">
        
    </a>
<ul>
<li>
<p>ç†æƒ³çš„æŒ‡ä»¤æµæ°´çº¿çš„æ‰§è¡Œè¿‡ç¨‹</p>
</li>
<li>
<p><strong>æŒ‡ä»¤æ‰§è¡Œåˆ†ä¸º6ä¸ªé˜¶æ®µï¼Œç›¸äº’ä¹‹é—´ä¸å…±äº«èµ„æº</strong></p>
</li>
<li>
<p>æŒ‰ç…§æµæ°´çº¿çš„æ–¹å¼æ¥æ‰§è¡Œï¼Œä»ç¬¬å…­ä¸ªæ—¶é—´å•ä½å¼€å§‹ï¼Œæ¯ä¸ªæ—¶é—´å•ä½éƒ½ä¼šæœ‰1ä¸ªæŒ‡ä»¤å®Œæˆæ‰§è¡Œ</p>
</li>
<li>
<p>æŒ‡ä»¤æ•°é‡è¶³å¤Ÿå¤šæ—¶ï¼Œæ‰§è¡Œæ•ˆç‡ä¸ºåŸæ¥çš„6å€</p>
</li>
</ul>
<h4 id="summary-1">Summary</h4>
<ul>
<li>
<p>The total execution time for each individual instruction is not changed by pipelining</p>
<ul>
<li>It still takes an instruction cycle to make it all the way through the processor</li>
</ul>
</li>
<li>
<p>Pipelining doesn&rsquo;t speed up instruction execution time</p>
</li>
<li>
<p>It does speed up program execution time by increasing the number of instructions finished per unit time</p>
</li>
</ul>
<h4 id="branch-in-a-pipeline">Branch in a pipeline</h4>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter12-12.png" title="/img/Computer Organization and Architecture/chapter12-12.png" data-thumbnail="/img/Computer Organization and Architecture/chapter12-12.png">
        
    </a>
<ul>
<li>
<p>æŒ‡ä»¤1å’Œ2çš„æ‰§è¡Œéƒ½æ˜¯æ­£å¸¸çš„</p>
</li>
<li>
<p>æŒ‡ä»¤3åœ¨æ—¶é—´ç‰‡8æ—¶ï¼Œéœ€è¦è·³è½¬åˆ°æŒ‡ä»¤15çš„æ‰§è¡Œ</p>
</li>
<li>
<p>æŒ‡ä»¤4-7å·²ç»å®Œæˆçš„å¤„ç†ä½œåºŸ</p>
</li>
<li>
<p>éœ€è¦é‡æ–°å¼€å§‹æŒ‡ä»¤15çš„å–æŒ‡</p>
</li>
<li>
<p><strong>ç¬¬9åˆ°ç¬¬12æ—¶é—´ç‰‡ï¼Œæ²¡æœ‰æŒ‡ä»¤å®Œæˆæ‰§è¡Œï¼Œç§°ä¸ºåˆ†æ”¯æƒ©ç½š</strong></p>
</li>
<li>
<p><strong>åˆ†æ”¯è¶Šå¤šï¼Œåˆ†æ”¯æƒ©ç½šå°±è¶Šå¤šï¼Œæ•´ä¸ªç¨‹åºçš„æŒ‡ä»¤ååç‡å°±è¶Šä½</strong></p>
</li>
</ul>
<hr>
<p><strong>Six stage instruction pipeline</strong></p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter12-13.png" title="/img/Computer Organization and Architecture/chapter12-13.png" data-thumbnail="/img/Computer Organization and Architecture/chapter12-13.png">
        
    </a>
<ul>
<li>
<p>ç¬¬ä¸€æ­¥æ˜¯å–æŒ‡ï¼Œä¹‹åæ˜¯æŒ‡ä»¤è¯‘ç ï¼Œå¹¶è®¡ç®—æ“ä½œæ•°åœ°å€</p>
</li>
<li>
<p><strong>æ­¤æ—¶ï¼Œéœ€è¦åˆ¤æ–­æŒ‡ä»¤æ˜¯å¦æ˜¯æ— æ¡ä»¶è½¬ç§»ï¼Œå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆæ›´æ–°PCï¼Œå¹¶æ¸…ç©ºæµæ°´çº¿ï¼Œç»§ç»­å¼€å§‹å–æŒ‡</strong></p>
</li>
<li>
<p><strong>å¦‚æœä¸è½¬ç§»ï¼Œæ­£å¸¸æ‰§è¡ŒæŒ‡ä»¤ï¼Œå–æ“ä½œæ•°ï¼Œç„¶åæ‰§è¡ŒæŒ‡ä»¤ï¼Œå¹¶å†™æ“ä½œæ•°</strong></p>
</li>
<li>
<p><strong>åˆ¤æ–­æ˜¯å¦è¿›è¡Œåˆ†æ”¯ï¼Œæˆ–è€…æ˜¯å¦æœ‰ä¸­æ–­ã€‚å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå’Œæ— æ¡ä»¶åˆ†æ”¯ä¸€æ ·ï¼Œæ›´æ”¹PCï¼Œæ¸…ç©ºæµæ°´çº¿ï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œåç»­æŒ‡ä»¤</strong></p>
</li>
</ul>
<h4 id="other-factors">Other factors</h4>
<ul>
<li>
<p>Data transmission between different parts takes time</p>
</li>
<li>
<p>Theoretically, the more stages, the higher the efficiency of instruction execution</p>
<ul>
<li>
<p>The more stages are divided, the more complex the control between stages will be</p>
</li>
<li>
<p><strong>Latching delay, buffering between phases takes a certain time</strong></p>
</li>
<li>
<p>Need reasonable design</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Speedup factors with instruction pipelining</strong></p>
<ul>
<li>å‡å®šæ€»å…±éœ€è¦æ‰§è¡Œnæ¡æŒ‡ä»¤ï¼Œé‡‡ç”¨çš„æµæ°´çº¿æ®µæ•°ä¸ºkï¼Œé‚£ä¹ˆä½¿ç”¨æŒ‡ä»¤æµæ°´çº¿ç›¸å¯¹äºä¸ä½¿ç”¨æµæ°´çº¿çš„åŠ é€Ÿæ¯”çš„å®šä¹‰æ˜¯</li>
</ul>
<p>$$
S_k=\frac {nk}{k+n-1}
$$</p>
<ul>
<li>
<p>éšç€æŒ‡ä»¤æ•°çš„å¢åŠ ï¼ŒåŠ é€Ÿæ¯”è¶‹å‘äºæµæ°´çº¿çš„é˜¶æ®µ</p>
</li>
<li>
<p>æŒ‡ä»¤æ•°è¶Šå¤šï¼ŒåŠ é€Ÿæ¯”è¶Šæ¥è¿‘ç†è®ºä¸Šçš„åŠ é€Ÿæ¯”ã€‚è€Œéšç€æ®µæ•°çš„å¢åŠ ï¼ŒåŠ é€Ÿæ¯”å¢åŠ ç¼“æ…¢</p>
</li>
<li>
<p>æµæ°´çº¿æ®µæ•°èƒ½å¸¦æ¥æ›´å¥½çš„æ½œåœ¨åŠ é€Ÿæ¯”ï¼Œä½†åŒæ—¶ä¹Ÿå¸¦æ¥å¾ˆå¤šé—®é¢˜ã€‚æ¯”å¦‚åˆ†æ”¯æ—¶éœ€è¦æ¸…ç©ºæµæ°´çº¿ï¼Œæ®µé—´å»¶æ—¶ä¹Ÿéœ€è¦è€ƒè™‘</p>
</li>
</ul>
<h4 id="analysis-of-instruction-pipeline">Analysis of instruction pipeline</h4>
<ul>
<li>What are the characteristics of an ideal pipeline?
<ul>
<li>
<p>Repetition of identical operations</p>
</li>
<li>
<p>Operating objects are independent of each other</p>
</li>
<li>
<p>A complete operation can be decomposed into several sub operations</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Identical operations â€¦ NOT!</strong></p>
<ul>
<li>
<p><strong>different instructions â†’ not all need the same stages</strong></p>
</li>
<li>
<p>Forcing different instructions to go through the same pipe stages</p>
</li>
<li>
<p><strong>Some pipeline stages are idle</strong></p>
</li>
<li>
<p><strong>Leading to a waste of time, called external fragmentation</strong></p>
</li>
</ul>
<hr>
<p><strong>Independent operations &hellip; NOT!</strong></p>
<ul>
<li>
<p><strong>instructions are not independent of each other</strong></p>
</li>
<li>
<p>Need to detect and resolve inter-instruction dependencies to ensure the pipeline provides correct results</p>
</li>
<li>
<p>Pipeline stalls frequently due to branch</p>
</li>
<li>
<p>Poor operation of the pipeline</p>
</li>
</ul>
<hr>
<p><strong>Uniform sub-operations &hellip; NOT!</strong></p>
<ul>
<li>
<p><strong>different pipeline stages â†’ not the same latency</strong></p>
</li>
<li>
<p>Need to force each stage to be controlled by the same clock</p>
</li>
<li>
<p><strong>Some pipe stages are too fast but all take the same clock cycle time</strong></p>
</li>
<li>
<p><strong>These wasted time are called internal fragmentation</strong></p>
</li>
</ul>
<hr>
<h4 id="issues-in-pipeline-design">Issues in pipeline design</h4>
<ul>
<li>
<p>Reasonably divide the stages of instructions</p>
<ul>
<li>
<p><strong>How many stages is the instruction cycle divided into?</strong></p>
</li>
<li>
<p>what is done in each stage</p>
</li>
</ul>
</li>
<li>
<p>Handling exceptions, interrupts</p>
</li>
<li>
<p>Keeping the pipeline correct, moving, and full</p>
<ul>
<li>
<p>Data dependences</p>
</li>
<li>
<p>Control dependences</p>
</li>
<li>
<p>Resource conflict</p>
</li>
<li>
<p>Long-latency (or multi-cycle) operations</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Causes of pipeline stalls</strong></p>
<ul>
<li>
<p><strong>Pipeline stall: A condition when the pipeline stops moving</strong></p>
</li>
<li>
<p>Causes of stall</p>
<ul>
<li>Resource contention</li>
<li>Dependences between instructions, including data dependence and control dependence</li>
<li>Long-latency (multi-cycle) operations</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Dependences and Their Types</strong></p>
<ul>
<li>
<p>Also called â€œhazardâ€ or â€œpipeline bubbleâ€</p>
</li>
<li>
<p>Dependences dictate ordering requirements between instructions</p>
</li>
<li>
<p>Two types</p>
<ul>
<li>
<p>Data dependence</p>
</li>
<li>
<p>Control dependence</p>
</li>
</ul>
</li>
<li>
<p><strong>Resource contention is sometimes called resource dependence</strong></p>
</li>
<li>
<p><strong>When dependency occurs, the pipeline will be suspended, which is called pipeline adventure</strong></p>
</li>
</ul>
<h4 id="resource-hazards">Resource hazards</h4>
<ul>
<li>
<p><strong>Two (or more) instructions in pipeline need same resource</strong></p>
<ul>
<li>
<p><strong>Executed in serial rather than parallel for part of pipeline</strong></p>
</li>
<li>
<p><strong>Also called <em>structural hazard</em></strong></p>
</li>
</ul>
</li>
<li>
<p>It is caused by unreasonable structure or insufficient resources</p>
<ul>
<li>Such as using the same register</li>
</ul>
</li>
<li>
<p><strong>The solution is generally to increase available resources, such as adding a dryer in the previous example</strong></p>
</li>
</ul>
<p><strong>Example</strong></p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter12-14.png" title="/img/Computer Organization and Architecture/chapter12-14.png" data-thumbnail="/img/Computer Organization and Architecture/chapter12-14.png">
        
    </a>
<ul>
<li>
<p>ç¬¬3ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œ$I_1$éœ€è¦è¯»å–å†…å­˜å–æ“ä½œæ•°ï¼ŒåŒæ—¶$I_3$ä¹Ÿéœ€è¦å–æŒ‡</p>
</li>
<li>
<p>ä¸¤ä¸ªæŒ‡ä»¤è¯»éœ€è¦è¯»å­˜å‚¨å™¨ï¼Œå‘ç”Ÿèµ„æºå†²çª</p>
</li>
<li>
<p>$I_3$éœ€è¦ç©ºä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œç­‰åˆ°ç¬¬4ä¸ªæ—¶é’Ÿå‘¨æœŸçš„æ—¶å€™ï¼Œæ‰å»å–æŒ‡</p>
</li>
<li>
<p>å› ä¸ºèµ„æºå†²çªè€Œæµªè´¹äº†1ä¸ªæ—¶é’Ÿå‘¨æœŸ</p>
</li>
<li>
<p>å¦‚æœåªæœ‰ä¸€ä¸ª$ALU$ï¼Œæ‰§è¡ŒæŒ‡ä»¤ä¹Ÿå¯èƒ½ä¼šå†²çª</p>
</li>
</ul>
<h4 id="handling-resource-contention">Handling resource contention</h4>
<ul>
<li>
<p><strong>Solution 1: Eliminate the cause of contention</strong></p>
<ul>
<li>
<p>Duplicate the resource or increase its throughput</p>
</li>
<li>
<p>E.g., use separate instruction and data memories (caches)</p>
</li>
<li>
<p>E.g., use multiple ports for memory structures</p>
</li>
</ul>
</li>
<li>
<p><strong>Solution 2: Detect the resource contention and stall one</strong></p>
<ul>
<li>Need to decide which one to stop</li>
</ul>
</li>
</ul>
<h4 id="data-hazards">Data hazards</h4>
<ul>
<li>
<p>Conflict in access of an operand</p>
<ul>
<li>E.g. ,both instructions access a particular memory or register operand</li>
</ul>
</li>
<li>
<p><strong>If two instructions are executed serially in strict order, that is one instruction executes after the finish of the previous instruction execution. No problem</strong></p>
</li>
<li>
<p><strong>If in a pipeline, operand value could be updated so as to produce different result from strict sequential execution</strong></p>
</li>
<li>
<p><strong>Data Hazard is caused by the conflict of access to the same operand location</strong></p>
</li>
</ul>
<hr>
<h4 id="types-of-data-hazard">Types of data hazard</h4>
<ul>
<li>
<p>Types of data dependencesï¼š</p>
<ul>
<li>
<p><strong>read after write</strong></p>
<ul>
<li><strong>Called â€œTrue dependence â€</strong></li>
</ul>
</li>
<li>
<p><strong>write after read</strong></p>
<ul>
<li><strong>Called â€œAnti dependence â€</strong></li>
</ul>
</li>
<li>
<p><strong>write after write</strong></p>
<ul>
<li><strong>Called â€œOutput dependenceâ€</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="true-dependency">True dependency</h5>
<ul>
<li>
<p><strong>Read after write (RAW), or true dependency</strong></p>
<ul>
<li>
<p><strong>An instruction modifies a register or memory location</strong></p>
</li>
<li>
<p><strong>Succeeding instruction reads data in that location</strong></p>
</li>
<li>
<p><strong>Hazard occurs if read takes place before write complete</strong></p>
</li>
<li>
<p><strong>What needs to be read by succeeding instruction is the modified data</strong></p>
</li>
<li>
<p><strong>After the pipeline is adopted, the read data becomes the data before writing</strong></p>
</li>
</ul>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter12-15.png" title="/img/Computer Organization and Architecture/chapter12-15.png" data-thumbnail="/img/Computer Organization and Architecture/chapter12-15.png">
        
    </a>
<ul>
<li>
<p>ç¬¬ä¸€ä¸ªæŒ‡ä»¤éœ€è¦å†™$r_3$</p>
</li>
<li>
<p>ç¬¬äºŒä¸ªæŒ‡ä»¤éœ€è¦è¯»$r_3$</p>
</li>
<li>
<p>ç¬¬äºŒä¸ªæŒ‡ä»¤<strong>å¿…é¡»è¦ç­‰ç¬¬ä¸€ä¸ªæŒ‡ä»¤æ‰§è¡Œå®Œæˆä¹‹åå¹¶å†™äº†</strong>$r_3$ï¼Œæ‰èƒ½å®Œæˆè¯»æ“ä½œæ•°çš„æŒ‡ä»¤ï¼Œå¦åˆ™è¯»å–çš„$r_3$ä¸æ˜¯éœ€è¦çš„æ•°</p>
</li>
</ul>
<h5 id="anti-dependence">Anti dependence</h5>
<ul>
<li>
<p><strong>Write after read (WAR), or anti-dependency</strong></p>
</li>
<li>
<p><strong>An instruction reads a register or memory location</strong></p>
</li>
<li>
<p><strong>Succeeding instruction writes to location</strong></p>
</li>
<li>
<p><strong>Hazard occur if write completes before read takes place</strong></p>
</li>
<li>
<p><strong>The data of the first instruction read operation is incorrect</strong></p>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter12-16.png" title="/img/Computer Organization and Architecture/chapter12-16.png" data-thumbnail="/img/Computer Organization and Architecture/chapter12-16.png">
        
    </a>
<ul>
<li>
<p>ç¬¬ä¸€ä¸ªæŒ‡ä»¤è¯»$r_1$</p>
</li>
<li>
<p>ç¬¬äºŒä¸ªæŒ‡ä»¤å†™$r_1$</p>
</li>
<li>
<p>å¦‚æœå…ˆæ‰§è¡Œäº†ç¬¬äºŒä¸ªæŒ‡ä»¤ï¼Œé‚£ä¹ˆç»“æœä¹Ÿä¸æ­£ç¡®</p>
</li>
<li>
<p>åœ¨è¶…æ ‡é‡ä¸­ä¼šå‡ºç°è¿™ç§æƒ…å†µ</p>
</li>
</ul>
<h5 id="output-dependence">Output dependence</h5>
<ul>
<li>
<p><strong>Write after write (WAW), or output dependency</strong></p>
<ul>
<li>
<p><strong>Two instructions both write to same location</strong></p>
</li>
<li>
<p><strong>Hazard if writes take place in reverse of order intended sequence</strong></p>
</li>
<li>
<p><strong>The data to be stored is the data written by the second instruction</strong></p>
</li>
<li>
<p><strong>In the pipeline, the data actually saved is the data written by the first instruction</strong></p>
</li>
<li>
<p><strong>Data of memory or register is not required</strong></p>
</li>
</ul>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter12-17.png" title="/img/Computer Organization and Architecture/chapter12-17.png" data-thumbnail="/img/Computer Organization and Architecture/chapter12-17.png">
        
    </a>
<ul>
<li>
<p>ç¬¬ä¸€ä¸ªæ‰§è¡Œå†™$r_3$</p>
</li>
<li>
<p>ç¬¬ä¸‰ä¸ªæŒ‡ä»¤ä¹Ÿå†™$r_3$</p>
</li>
<li>
<p>å¦‚æœç¬¬ä¸‰ä¸ªæŒ‡ä»¤å…ˆæ‰§è¡Œäº†ï¼Œä¹Ÿç»“æœä¸æ­£ç¡®</p>
</li>
<li>
<p>åœ¨è¶…æ ‡é‡ä¸­ä¼šå‡ºç°è¿™ç§æƒ…å†µ</p>
</li>
</ul>
<h4 id="how-1">How?</h4>
<ul>
<li>
<p>True dependences always need to be obeyed because they constitute true dependence on a value</p>
</li>
<li>
<p><strong>True dependences always need to be obeyed because they constitute true dependence on a value</strong></p>
</li>
<li>
<p><strong>Anti and output dependences exist due to limited number of architectural registers</strong></p>
<ul>
<li><strong>They are dependence on a name, not a value</strong></li>
</ul>
</li>
<li>
<p><strong>Without special hardware and specific avoidance algorithms, results in inefficient pipeline usage</strong></p>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter12-18.png" title="/img/Computer Organization and Architecture/chapter12-18.png" data-thumbnail="/img/Computer Organization and Architecture/chapter12-18.png" data-sub-html="<h2>Data hazard diagram</h2>">
        
    </a><figcaption class="image-caption"><code>Data hazard diagram</code></figcaption>
    </figure>
<ul>
<li>
<p>åœ¨ç¬¬äº”ä¸ªæ—¶é’Ÿå‘¨æœŸï¼ŒåŠ æ³•æŒ‡ä»¤å†™EAX</p>
</li>
<li>
<p>ç¬¬å››ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œå‡æ³•è¦ç”¨EAX</p>
</li>
<li>
<p>å¦‚æœç¬¬äºŒä¸ªæŒ‡ä»¤ä¸ç­‰å¾…ï¼Œé‚£å–çš„EAXè¿˜æ˜¯æœ€æ—©çš„EAXï¼Œä¸æ˜¯åŠ æ³•çš„ç»“æœ</p>
</li>
<li>
<p>æ‰€ä»¥å‡æ³•æŒ‡ä»¤éœ€è¦åœé¡¿2ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œåˆ°ç¬¬å…­ä¸ªæ—¶é’Ÿå‘¨æœŸæ‰ä¼šå»å–æ“ä½œæ•°</p>
</li>
<li>
<p>æµªè´¹äº†2ä¸ªæ—¶é’Ÿå‘¨æœŸ</p>
</li>
</ul>
<h4 id="method-of-handle">Method of handle</h4>
<ul>
<li>
<p>True dependences are more interesting</p>
<ul>
<li><strong>Actual interdependence between dataï¼Œrequires waiting</strong></li>
</ul>
</li>
<li>
<p><strong>Anti and output dependences are easier to handle</strong></p>
<ul>
<li>
<p><strong>Itâ€™s all about writing</strong></p>
</li>
<li>
<p><strong>Use more registers</strong></p>
</li>
<li>
<p><strong>Use different registers to eliminate possible correlation</strong></p>
</li>
</ul>
</li>
<li>
<p>Some fundamental ways of handling true dependences</p>
<ul>
<li>
<p>Detect and wait until value is available in register file</p>
</li>
<li>
<p>Detect and eliminate the dependence at the software level</p>
<ul>
<li>
<p>Register renaming</p>
</li>
<li>
<p>Discussed later</p>
</li>
</ul>
</li>
<li>
<p>Predict the needed value(s), execute â€œspeculativelyâ€, and verify</p>
</li>
</ul>
</li>
</ul>
<h4 id="control-dependence">Control dependence</h4>
<ul>
<li>
<p>Also called â€œcontrol hazardâ€â€œbranch hazardâ€</p>
</li>
<li>
<p>A Special Case of Data Dependence</p>
</li>
<li>
<p>Occurs when the pipeline makes a wrong judgment on branch transfer</p>
</li>
<li>
<p>Brings instructions into pipeline that must subsequently be discarded</p>
</li>
<li>
<p>The pipeline cannot run with full load</p>
</li>
</ul>
<h5 id="solve">solve</h5>
<ul>
<li>
<p><strong>Multiple Streams</strong></p>
</li>
<li>
<p><strong>Prefetch Branch Target</strong></p>
</li>
<li>
<p><strong>Loop buffer</strong></p>
</li>
<li>
<p><strong>Branch prediction</strong></p>
</li>
<li>
<p><strong>Delayed branching</strong></p>
</li>
</ul>
<h6 id="multiple-streams">Multiple streams</h6>
<ul>
<li>
<p>Have two pipelines for each branch</p>
<ul>
<li>Prefetch each branch into a separate pipeline</li>
</ul>
</li>
<li>
<p>Finally, determine which pipeline to use according to the branching conditions</p>
</li>
<li>
<p>Shortcoming</p>
<ul>
<li>
<p>Leads to bus &amp; register contention</p>
</li>
<li>
<p>Multiple branches lead to further pipelines being needed</p>
</li>
</ul>
</li>
</ul>
<h6 id="prefetch-branch-target">Prefetch branch target</h6>
<ul>
<li>Target of branch is prefetched in addition to instructions following branch</li>
<li>It is not executed after prefetching, but fetching and decoding</li>
<li>Keep target until branch is executed</li>
<li>It can save the time of fetching and decoding</li>
<li>Used by IBM 360/91</li>
</ul>
<h6 id="loop-buffer">Loop buffer</h6>
<ul>
<li>
<p>Very fast memory</p>
</li>
<li>
<p>Contains n instructions taken in the most recent order</p>
</li>
<li>
<p>When a branch may occur, first check whether the transfer target is in the buffer</p>
</li>
<li>
<p><strong>Very good for small loops or jumps</strong></p>
</li>
</ul>
<h6 id="branch-prediction">Branch prediction</h6>
<ul>
<li>
<p>There are two types of branch predictions</p>
<ul>
<li>
<p>Static branch predictions: the branch does not depend on the execution history</p>
</li>
<li>
<p>Dynamic branch prediction: the branch depends on the execution history</p>
</li>
</ul>
</li>
<li>
<p>Static branching</p>
<ul>
<li>
<p>Predict never taken</p>
</li>
<li>
<p>Predict always taken</p>
</li>
<li>
<p>Predict by Opcode</p>
</li>
</ul>
</li>
<li>
<p>Dynamic branching</p>
<ul>
<li>
<p>Taken/not taken switch</p>
</li>
<li>
<p>Branch history table</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Static branch prediction</strong></p>
<ul>
<li>
<p><strong>Predict never taken</strong></p>
<ul>
<li>
<p><strong>Assume that jump will not happen</strong></p>
</li>
<li>
<p><strong>Always fetch next instruction</strong></p>
</li>
<li>
<p><strong>68020 &amp; VAX 11/780</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Predict always taken</strong></p>
<ul>
<li>
<p><strong>Assume that jump will happen</strong></p>
</li>
<li>
<p><strong>Always fetch target instruction</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>â€œPredict always taken â€ are most used</strong></p>
</li>
<li>
<p>Predict by Opcode</p>
<ul>
<li>
<p>Some instructions are more likely to result in a jump than others</p>
</li>
<li>
<p>Can get up to 75% success</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Dynamic branch prediction</strong></p>
<ul>
<li>
<p><strong>Record the history of conditional branch instructions in a program</strong></p>
</li>
<li>
<p>Taken/not taken switch: One or more bits are used to indicate recent history of the instruction</p>
<ul>
<li>
<p><strong>The branching decision is depended on these bits</strong></p>
</li>
<li>
<p><strong>Based on previous history</strong></p>
</li>
<li>
<p><strong>Good for loops</strong></p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Branch history table</strong></p>
<ul>
<li>
<p>If Predict branchï¼Œtarget address can only be obtained by decoding instructions</p>
<ul>
<li>
<p>A waiting time is required</p>
</li>
<li>
<p>How to improve efficiency?</p>
</li>
</ul>
</li>
<li>
<p>A storage area called branch target buffer is designed</p>
<ul>
<li>
<p>Also called branch history table</p>
</li>
<li>
<p>It records information related to branch transfer, including branch instruction address, transfer history bit, and target address information</p>
</li>
</ul>
</li>
<li>
<p>Target address information</p>
<ul>
<li>
<p>Can be target instruction</p>
<ul>
<li>
<p>Use this instruction directly</p>
</li>
<li>
<p>Less time</p>
</li>
<li>
<p>It will take up more space</p>
</li>
</ul>
</li>
<li>
<p>Can be the target instruction address</p>
<ul>
<li>
<p>Less space</p>
</li>
<li>
<p>More time</p>
</li>
</ul>
</li>
<li>
<p>Whether to save time or space depends on the specific situation</p>
</li>
</ul>
</li>
</ul>
<h4 id="branch-history-table">Branch history table</h4>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter12-19.png" title="/img/Computer Organization and Architecture/chapter12-19.png" data-thumbnail="/img/Computer Organization and Architecture/chapter12-19.png">
        
    </a>
<ul>
<li>
<p>é¢„æµ‹è½¬ç§»åï¼ŒæŒ‡ä»¤é¢„å–çš„æ—¶å€™ï¼Œå…ˆå»è½¬ç§»å†å²è¡¨ä¸­æŸ¥è¯¢</p>
<ul>
<li>
<p>å¦‚æœæœ‰çš„è¯ï¼Œæ ¹æ®æŒ‡ä»¤çŠ¶æ€è¿›è¡Œé¢„æµ‹ï¼Œå¯èƒ½æ˜¯ç›®æ ‡åœ°å€ï¼Œæˆ–è€…æ˜¯ä¸‹ä¸€é¡ºåºåœ°å€</p>
</li>
<li>
<p>å¦‚æœä¸åŒ¹é…ï¼Œé¡ºåºå–ä¸‹ä¸€ä¸ªæŒ‡ä»¤</p>
</li>
</ul>
</li>
<li>
<p>åˆ†æ”¯æŒ‡ä»¤æ‰§è¡Œæ—¶ï¼Œæ ¹æ®å®é™…æ˜¯å¦å‘ç”Ÿäº†è½¬ç§»ï¼Œæ›´æ–°è½¬ç§»å†å²è¡¨ä¸­çš„çŠ¶æ€ä½</p>
</li>
<li>
<p>å¦‚æœæ¡ä»¶åˆ†æ”¯æŒ‡ä»¤ä¸åœ¨è¡¨ä¸­çš„æ—¶å€™ï¼Œéœ€è¦æŠŠæŒ‡ä»¤åŠ åˆ°è¿™ä¸ªè¡¨ä¸­ï¼ŒåŒæ—¶éœ€è¦æ›¿æ¢åˆ°å½“å‰è¡¨ä¸­çš„ä¸€é¡¹ã€‚æ›¿æ¢æ–¹æ³•å¯ä»¥é‡‡ç”¨å¾ˆå¤šç§æ–¹æ³•ï¼Œ<strong>ç±»ä¼¼äºcacheçš„æ›¿æ¢ç­–ç•¥</strong></p>
</li>
<li>
<p>è½¬ç§»å†å²è¡¨åŠ¨æ€è‡ªåŠ¨ç»´æŠ¤</p>
</li>
</ul>
<hr>
<p><strong>Correlation-based prediction</strong></p>
<ul>
<li>
<p>The execution effect of the branch history table in the loop statement is good</p>
</li>
<li>
<p>In more complex structures, branch instruction directly correlates with that of related branches instruction</p>
</li>
<li>
<p><strong>A method called Correlation-based branch history is proposed</strong></p>
<ul>
<li><strong>Create a global branch history table</strong></li>
<li><strong>Predict by combining global and current branch instructions</strong></li>
</ul>
</li>
</ul>
<hr>
<p><strong>Delayed Branch</strong></p>
<ul>
<li>
<p>A method of instruction rearrangement</p>
</li>
<li>
<p><strong>Delayed branches need to calculate the impact of branches and determine which instructions are not affected before prefetching unwanted instructions</strong></p>
<ul>
<li>
<p><strong>Execute such an instruction immediately after the branch instruction</strong></p>
</li>
<li>
<p><strong>The execution of this instruction keeps the pipeline in a full rotation state, and the clock cycle will not be wasted due to waiting</strong></p>
</li>
</ul>
</li>
</ul>
]]></description>
</item>
<item>
    <title>Computer Organization and Architecture Instruction Sets Addressing Modes and Formats</title>
    <link>https://Jungle430.github.io/posts/computer-organization-and-architecture/computer-organization-and-architecture-instruction-sets-addressing-modes-and-formats/</link>
    <pubDate>Thu, 26 Jan 2023 16:30:34 &#43;0800</pubDate><author>1239946358@qq.com (Jungle)</author><guid>https://Jungle430.github.io/posts/computer-organization-and-architecture/computer-organization-and-architecture-instruction-sets-addressing-modes-and-formats/</guid>
    <description><![CDATA[<h1 id="computer-organization-and-architecture">Computer Organization and Architecture</h1>
<h2 id="instruction-sets-addressing-modes-and-formats">Instruction Sets: Addressing Modes and Formats</h2>
<h3 id="outline">Outline</h3>
<ul>
<li>
<p>Addressing</p>
</li>
<li>
<p><code>x86</code> and <code>ARM</code> addressing modes</p>
</li>
<li>
<p>Instruction Formats</p>
</li>
<li>
<p><code>x86</code> and <code>ARM</code> instruction formats</p>
</li>
</ul>
<h3 id="addressing">Addressing</h3>
<h4 id="what-is-addressing-mode">What is addressing mode?</h4>
<ul>
<li>
<p><strong>Elements in the instruction include: opcode, source operand, destination operand, and next instruction address</strong></p>
</li>
<li>
<p>Possible positions of operands</p>
<ul>
<li>
<p>Memory</p>
</li>
<li>
<p>Register</p>
</li>
<li>
<p>Immediate</p>
</li>
<li>
<p>I/O</p>
</li>
</ul>
</li>
<li>
<p><strong>Addressing mode specifies how to obtain an operand of an instruction</strong></p>
</li>
<li>
<p>Addressing is relatively simple when the operand is in a register or immediate</p>
</li>
<li>
<p>If the operand is in memory</p>
<ul>
<li>
<p>The address field of an operand in an instruction cannot be too long</p>
</li>
<li>
<p>Want to access a large memory space</p>
</li>
</ul>
</li>
<li>
<p>Memory addressing adopts multiple addressing modes</p>
<ul>
<li><strong>Balance</strong> the addressable address range, addressing flexibility, addressing complexity and the number of storage units occupied</li>
</ul>
</li>
</ul>
<h4 id="memory-addressing">Memory addressing</h4>
<ul>
<li>
<p>Absolute</p>
</li>
<li>
<p>Displacement</p>
</li>
<li>
<p>Indexed</p>
</li>
<li>
<p>register indirect</p>
</li>
<li>
<p>memory indirect</p>
</li>
<li>
<p>Autoincrement</p>
</li>
<li>
<p>Autodecrement</p>
</li>
</ul>
<hr>
<p><strong>Advantage</strong></p>
<ul>
<li>
<p>Expanding addressable address space</p>
</li>
<li>
<p>Improved addressing flexibility</p>
</li>
<li>
<p>Provide better program architecture to help programmers design more flexible programs</p>
<ul>
<li>For example, array, pointer based access, etc</li>
</ul>
</li>
</ul>
<h4 id="common-addressing-mode">Common addressing mode</h4>
<ul>
<li>
<p>Immediate</p>
</li>
<li>
<p>Direct</p>
</li>
<li>
<p>Indirect</p>
</li>
<li>
<p>Register</p>
</li>
<li>
<p>Register Indirect</p>
</li>
<li>
<p>Displacement (Indexed)</p>
</li>
<li>
<p>Stack</p>
</li>
</ul>
<h5 id="immediate-addressing">Immediate addressing</h5>
<ul>
<li>
<p>Operand is part of instruction</p>
<ul>
<li><strong>Operand = address field</strong></li>
</ul>
</li>
<li>
<p>e.g.</p>
<ul>
<li>
<p>ADD 5</p>
</li>
<li>
<p>Add 5 to contents of accumulator</p>
</li>
<li>
<p>5 is operand</p>
</li>
</ul>
</li>
<li>
<p><strong>No memory reference to fetch data</strong></p>
<ul>
<li>
<p><strong>Fast</strong></p>
</li>
<li>
<p><strong>Limited range: length of the address field in the instruction is limited</strong></p>
</li>
<li>
<p><strong>Inflexible</strong></p>
</li>
</ul>
</li>
</ul>
<div class="mermaid" id="id-1"></div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">MOV BL,10
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p><strong>æŒ‡ä»¤ä¸­åŒ…å«äº†æ“ä½œç å’Œç«‹å³æ•°</strong></p>
</li>
<li>
<p><strong>å¤æ‚ä¸€ç‚¹çš„æŒ‡ä»¤ä¸­ï¼Œæ“ä½œæ•°åŒ…æ‹¬ç«‹å³æ•°ï¼Œä»¥åŠå…¶ä»–å¯»å€æ–¹å¼</strong></p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">MOV BL,10
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p><strong>è¿™ä¸ªæŒ‡ä»¤æŠŠ10è¿™ä¸ªç«‹å³æ•°é€åˆ°BLå¯„å­˜å™¨ä¸­</strong></p>
</li>
<li>
<p><strong>ç«‹å³æ•°å¯»å€åœ¨å¾ˆå¤šæŒ‡ä»¤ä¸­éƒ½ä¼šç”¨åˆ°ï¼Œä½†æ˜¯å—åˆ°çš„é™åˆ¶æ¯”è¾ƒå¤§</strong></p>
</li>
</ul>
<h5 id="direct-addressing">Direct addressing</h5>
<ul>
<li>
<p><strong>Address field contains address of operand</strong></p>
</li>
<li>
<p>Effective address (EA) = address field (A)</p>
<ul>
<li>
<p><strong>Single memory reference to access data</strong></p>
</li>
<li>
<p><strong>No additional calculations to work out effective address</strong></p>
</li>
<li>
<p><strong>Limited address space</strong></p>
</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ADD A
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>Add contents of cell A to accumulator</p>
</li>
<li>
<p>Look in memory at address A for operand</p>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter11-1.png" title="/img/Computer Organization and Architecture/chapter11-1.png" data-thumbnail="/img/Computer Organization and Architecture/chapter11-1.png">
        
    </a>
<ul>
<li>
<p>æŒ‡ä»¤ä¸­ç»™å‡ºäº†æ“ä½œæ•°åœ¨ä¸»å­˜å‚¨å™¨ä¸­çš„åœ°å€</p>
</li>
<li>
<p>é€šè¿‡ä¸€æ¬¡å­˜å‚¨å™¨è®¿é—®ï¼Œå°±å¯ä»¥å¾—åˆ°æ“ä½œæ•°</p>
</li>
<li>
<p>æ“ä½œæ•°çš„åœ°å€ç›´æ¥åœ¨æŒ‡ä»¤ä¸­ã€‚æŒ‡ä»¤çš„é•¿åº¦æœ‰é™ï¼Œèƒ½ç•™ç»™ç›´æ¥å¯»å€çš„åœ°å€åŸŸçš„é•¿åº¦æœ‰é™ï¼Œå¯¼è‡´å¯»å€ç©ºé—´æœ‰é™</p>
</li>
</ul>
<h5 id="indirect-addressing">Indirect addressing</h5>
<ul>
<li>
<p>Memory cell pointed to by address field contains the address of (pointer to) the operand</p>
</li>
<li>
<p>EA = (A)</p>
<ul>
<li>
<p><strong>Access the storage unit with address A to obtain the actual address of the operand</strong></p>
</li>
<li>
<p><strong>Access the memory according to this address to get the operand</strong></p>
</li>
<li>
<p>Memory needs to be accessed twice</p>
</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ADD (A)
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p><strong>Add contents of cell pointed to by contents of A to accumulator</strong></p>
</li>
<li>
<p>Large address space</p>
<ul>
<li>$2^n\ where\ \rightarrow n=word\ length\newline$</li>
</ul>
</li>
<li>
<p><strong>May be nested, multilevel, cascaded</strong></p>
<ul>
<li>
<p>e.g. EA=((A))</p>
</li>
<li>
<p>Effective address is the value of the storage unit pointed to by (A)</p>
</li>
</ul>
</li>
<li>
<p><strong>Multiple memory accesses to find operand</strong></p>
</li>
<li>
<p><strong>Hence slower</strong></p>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter11-2.png" title="/img/Computer Organization and Architecture/chapter11-2.png" data-thumbnail="/img/Computer Organization and Architecture/chapter11-2.png">
        
    </a>
<ul>
<li>
<p>æŒ‡ä»¤ä¸­åŒ…å«äº†ä¸€ä¸ªåœ°å€A</p>
</li>
<li>
<p>æ ¹æ®Aå»å­˜å‚¨å™¨ä¸­è®¿é—®ï¼Œå¾—åˆ°æ“ä½œæ•°çš„åœ°å€</p>
</li>
<li>
<p>æ ¹æ®è¿™ä¸ªåœ°å€å»è·å¾—æ“ä½œæ•°</p>
</li>
<li>
<p>è¦2æ¬¡è®¿é—®å­˜å‚¨å™¨ï¼Œè®¿é—®é€Ÿåº¦ç›¸å¯¹æ¯”è¾ƒæ…¢</p>
</li>
</ul>
<h5 id="register-addressing">Register addressing</h5>
<ul>
<li>
<p>Operand is held in register named in address field</p>
</li>
<li>
<p>EA = R</p>
</li>
<li>
<p><strong>Limited number of registers</strong></p>
<ul>
<li>Register address field is 3-5 bits, and the number of accessible registers ranges from 8 to 32</li>
</ul>
</li>
<li>
<p><strong>Very small address field needed</strong></p>
<ul>
<li><strong>Shorter instructions</strong></li>
<li><strong>Faster instruction fetch</strong></li>
</ul>
</li>
<li>
<p><strong>Similar to direct addressing</strong></p>
<ul>
<li>
<p><strong>No memory access</strong></p>
</li>
<li>
<p><strong>Very fast execution</strong></p>
</li>
</ul>
</li>
<li>
<p>Very limited address space</p>
</li>
<li>
<p>Multiple registers helps performance</p>
<ul>
<li>
<p>Requires good assembly programming or compiler writing</p>
</li>
<li>
<p>Multiple used operands are placed in registers</p>
</li>
</ul>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter11-3.png" title="/img/Computer Organization and Architecture/chapter11-3.png" data-thumbnail="/img/Computer Organization and Architecture/chapter11-3.png">
        
    </a>
<ul>
<li>
<p>å¯„å­˜å™¨å¯»å€å’Œå­˜å‚¨å™¨ç›´æ¥å¯»å€éå¸¸ç±»ä¼¼</p>
</li>
<li>
<p>è®¿é—®çš„æ˜¯CPUå†…éƒ¨çš„å¯„å­˜å™¨</p>
</li>
<li>
<p><strong>è®¿é—®å¯„å­˜å™¨çš„é€Ÿåº¦æ¯”è®¿é—®å­˜å‚¨å™¨å¿«å¾ˆå¤šï¼Œå¹¶ä¸”å¯„å­˜å™¨çš„æ•°é‡å°‘ï¼Œå……åˆ†åˆ©ç”¨å¥½å¯„å­˜å™¨å¯»å€ï¼Œå¯ä»¥æé«˜å¤„ç†é€Ÿåº¦</strong></p>
</li>
</ul>
<h5 id="register-indirect-addressing">Register indirect addressing</h5>
<ul>
<li>
<p>Similar to indirect addressing</p>
</li>
<li>
<p>EA = (R)</p>
<ul>
<li>Operand is in memory cell pointed to by contents of register R</li>
</ul>
</li>
<li>
<p><strong>Large address space</strong>($2^n$)</p>
<ul>
<li><strong>n is the word length of register</strong></li>
</ul>
</li>
<li>
<p><strong>Much faster than indirect addressing</strong></p>
<ul>
<li><strong>One memory access + one register access</strong></li>
</ul>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter11-4.png" title="/img/Computer Organization and Architecture/chapter11-4.png" data-thumbnail="/img/Computer Organization and Architecture/chapter11-4.png">
        
    </a>
<ul>
<li>
<p>æŒ‡ä»¤ä¸­çš„åœ°å€åŸŸä¸­æ˜¯å¯„å­˜å™¨Rï¼Œè€Œå¯„å­˜å™¨Rä¸­çš„å€¼æ˜¯æ“ä½œæ•°åœ¨ä¸»å­˜ä¸­çš„åœ°å€</p>
</li>
<li>
<p>ç»è¿‡ä¸¤æ¬¡è®¿é—®ï¼Œæ‰èƒ½å¾—åˆ°æ“ä½œæ•°ã€‚ç¬¬ä¸€æ¬¡æ˜¯å¯„å­˜å™¨è®¿é—®ï¼Œç¬¬äºŒæ¬¡æ˜¯å­˜å‚¨å™¨è®¿é—®</p>
</li>
<li>
<p>ç”±äºå¯„å­˜å™¨çš„è®¿é—®æ—¶é—´å¾ˆçŸ­ï¼Œæ‰€ä»¥å¯„å­˜å™¨é—´æ¥å¯»å€çš„æ—¶é—´ï¼ŒåŸºæœ¬ä¸Šå’Œè®¿é—®å­˜å‚¨å™¨çš„æ—¶é—´ç›¸å½“</p>
</li>
</ul>
<h5 id="displacement-addressing">Displacement addressing</h5>
<ul>
<li>
<p><strong>Add a displacement to the base address to obtain the actual address of the operand</strong></p>
<ul>
<li>EA = A + (R)</li>
</ul>
</li>
<li>
<p><strong>Address field hold two values</strong></p>
<ul>
<li><strong>A = base value</strong></li>
<li><strong>R = register that holds displacement</strong></li>
<li><strong>or vice versa</strong></li>
</ul>
</li>
<li>
<p>The operand address is the relative address of the base address, which is often used in virtual addresses</p>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter11-5.png" title="/img/Computer Organization and Architecture/chapter11-5.png" data-thumbnail="/img/Computer Organization and Architecture/chapter11-5.png">
        
    </a>
<ul>
<li>
<p>æŒ‡ä»¤ä¸­åŒ…å«äº†2ä¸ªåœ°å€å­—æ®µï¼Œå¯„å­˜å™¨Rå’ŒåŸºå€A</p>
</li>
<li>
<p>å¯»å€æ—¶ï¼Œæ ¹æ®Rçš„å€¼ï¼Œå»å¯„å­˜å™¨ä¸­è¯»å–æ“ä½œæ•°çš„åœ°å€åç§»é‡ï¼ŒåŠ ä¸ŠåŸºå€Aï¼Œå¾—åˆ°æ“ä½œæ•°åœ¨ä¸»å­˜ä¸­çš„åœ°å€ï¼Œè®¿é—®å­˜å‚¨å™¨ï¼Œå¾—åˆ°æ“ä½œæ•°</p>
</li>
<li>
<p>åç§»å¯»å€æœ‰ä¸‰ç§æ–¹å¼ï¼šç¬¬ä¸€ç§æ˜¯ç›¸å¯¹å¯»å€ï¼Œç¬¬äºŒç§æ˜¯åŸºå€å¯„å­˜å™¨å¯»å€ï¼Œç¬¬ä¸‰ç§æ˜¯å˜å€å¯»å€</p>
</li>
</ul>
<h6 id="relative-addressing">Relative addressing</h6>
<ul>
<li>
<p>A version of displacement addressing</p>
<ul>
<li>
<p>R = Program counter, PC</p>
</li>
<li>
<p><strong>EA = A + (PC)</strong></p>
</li>
<li>
<p>obtain the operand from the memory, and the address of the operand comes from PC and A</p>
</li>
</ul>
</li>
<li>
<p>Locality of reference &amp; cache usage</p>
<ul>
<li>
<p>Program counter is instruction address</p>
</li>
<li>
<p>Based on the principle of locality, the probability of data in cache is very high, and data access is fast</p>
</li>
</ul>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter11-6.png" title="/img/Computer Organization and Architecture/chapter11-6.png" data-thumbnail="/img/Computer Organization and Architecture/chapter11-6.png">
        
    </a>
<ul>
<li>
<p>ç›¸å¯¹å¯»å€ä¸­ï¼Œ<strong>éšå«ä½¿ç”¨äº†PCä½œä¸ºåŸºç¡€åœ°å€ï¼Œç”¨æŒ‡ä»¤ä¸­åœ°å€åŸŸä¸­çš„Aä½œä¸ºåç§»é‡</strong></p>
</li>
<li>
<p>é€šè¿‡ä¸¤ä¸ªçš„è®¡ç®—ï¼Œå¾—åˆ°æ“ä½œæ•°åœ¨ä¸»å­˜ä¸­çš„åœ°å€</p>
</li>
<li>
<p>æ ¹æ®è¿™ä¸ªåœ°å€ï¼Œè®¿é—®å­˜å‚¨å™¨ï¼Œå¾—åˆ°å®é™…çš„æ“ä½œæ•°</p>
</li>
</ul>
<h6 id="base-register-addressing">Base-register addressing</h6>
<ul>
<li>
<p>Use a register R as the base register</p>
<ul>
<li>
<p>R holds pointer to base address</p>
</li>
<li>
<p>R may be explicit or implicit</p>
</li>
<li>
<p>e.g. segment registers in 80x86 is implicit</p>
</li>
</ul>
</li>
<li>
<p>The address field in the instruction gives displacement A</p>
</li>
<li>
<p>The operation of R and A can obtain the actual address of the operand</p>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter11-7.png" title="/img/Computer Organization and Architecture/chapter11-7.png" data-thumbnail="/img/Computer Organization and Architecture/chapter11-7.png">
        
    </a>
<ul>
<li>
<p>åŸºå€å¯„å­˜å™¨BRä¸­åŒ…å«äº†å¯»å€çš„åŸºå€ï¼Œè€ŒæŒ‡ä»¤ä¸­çš„åœ°å€å­—æ®µä¸­åŒ…å«äº†åç§»é‡</p>
</li>
<li>
<p>è¿™ä¸¤ä¸ªç›¸åŠ ï¼Œå¾—åˆ°æ“ä½œæ•°åœ°å€ï¼Œè®¿é—®å­˜å‚¨å™¨ï¼Œè·å–æ“ä½œæ•°</p>
</li>
<li>
<p>åŸºå€å¯„å­˜å™¨å¯»å€çš„å¯»å€è¿‡ç¨‹åŒ…æ‹¬ï¼š<strong>1. è®¿é—®1æ¬¡å¯„å­˜å™¨ï¼›2. è¿›è¡Œä¸€æ¬¡åŠ æ³•è¿ç®—ï¼›3. è®¿é—®ä¸€æ¬¡ä¸»å­˜</strong></p>
</li>
</ul>
<h6 id="indexed-addressing">Indexed addressing</h6>
<ul>
<li>
<p>One type of displacement addressing mode</p>
</li>
<li>
<p><strong>The base address is in the address field, and the offset is in the register</strong></p>
<ul>
<li>
<p>A = base</p>
</li>
<li>
<p>R = displacement</p>
</li>
<li>
<p>EA = A + R</p>
</li>
</ul>
</li>
<li>
<p><strong>Good for accessing arrays</strong></p>
<ul>
<li>EA = A + R</li>
<li>R++</li>
</ul>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter11-8.png" title="/img/Computer Organization and Architecture/chapter11-8.png" data-thumbnail="/img/Computer Organization and Architecture/chapter11-8.png">
        
    </a>
<ul>
<li>
<p>å˜å€å¯»å€ä¸­ï¼Œ<strong>å¯„å­˜å™¨ä¸­çš„å€¼æ˜¯åç§»é‡ï¼ŒåŸºå€ä¸ºæŒ‡ä»¤ä¸­ç»™å‡ºçš„åœ°å€</strong></p>
</li>
<li>
<p>å¯»å€æ—¶ï¼Œå°†åŸºå€å’Œå¯„å­˜å™¨ä¸­çš„åç§»é‡è¿›è¡Œç›¸åŠ ï¼Œå¾—åˆ°å­˜å‚¨å™¨åœ°å€</p>
</li>
<li>
<p>æ ¹æ®è¿™ä¸ªåœ°å€è®¿é—®å†…å­˜ï¼Œå¾—åˆ°æ“ä½œæ•°</p>
</li>
</ul>
<h5 id="combinations">Combinations</h5>
<ul>
<li>
<p>Post-index: Indexing after indirect addressing</p>
<ul>
<li>
<p>First get address from memory, then indexing address</p>
</li>
<li>
<p>EA = (A) + (R)</p>
</li>
</ul>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter11-9.png" title="/img/Computer Organization and Architecture/chapter11-9.png" data-thumbnail="/img/Computer Organization and Architecture/chapter11-9.png">
        
    </a>
<ul>
<li>æŒ‡ä»¤ä¸­åœ°å€å­—æ®µçš„å†…å®¹ç”¨æ¥è®¿é—®å­˜å‚¨å™¨ï¼Œè·å¾—æ“ä½œæ•°çš„ç›´æ¥åœ°å€</li>
<li>ç›´æ¥åœ°å€è¢«å¯„å­˜å™¨å€¼å˜å€ï¼Œå¾—åˆ°æ“ä½œæ•°çš„å®é™…åœ°å€ï¼Œç„¶åè®¿é—®è¿™ä¸ªåœ°å€ï¼Œå¾—åˆ°æ“ä½œæ•°</li>
</ul>
<hr>
<ul>
<li>
<p>Pre-index: Indirect addressing after indexing</p>
<ul>
<li>
<p>Index first, read the memory after getting the address</p>
</li>
<li>
<p>EA = (A + (R))</p>
</li>
</ul>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter11-10.png" title="/img/Computer Organization and Architecture/chapter11-10.png" data-thumbnail="/img/Computer Organization and Architecture/chapter11-10.png">
        
    </a>
<ul>
<li>
<p>æŒ‡ä»¤ä¸­åœ°å€å­—æ®µå’Œå¯„å­˜å™¨å…ˆè¿›è¡Œå˜å€ï¼Œå¾—åˆ°æ“ä½œæ•°çš„é—´æ¥åœ°å€</p>
</li>
<li>
<p>è®¿é—®å­˜å‚¨å™¨ï¼Œå¾—åˆ°æ“ä½œæ•°çš„å®é™…åœ°å€</p>
</li>
<li>
<p>å†ä¸€æ¬¡è®¿é—®å­˜å‚¨å™¨ï¼Œå¾—åˆ°æ“ä½œæ•°</p>
</li>
</ul>
<h5 id="stack-addressing">Stack addressing</h5>
<ul>
<li>
<p><strong>Operand is implicitly on top of stack</strong></p>
</li>
<li>
<p>e.g. ADD</p>
<ul>
<li>
<p><strong>Pop top two number from stack</strong></p>
</li>
<li>
<p><strong>Add the two numbers</strong></p>
</li>
<li>
<p><strong>Push the sum</strong></p>
</li>
</ul>
</li>
</ul>
<h3 id="x86-and-arm-addressing-modes"><code>x86</code> and <code>ARM</code> addressing modes</h3>
<h4 id="swapping">Swapping</h4>
<ul>
<li>
<p>Problem: I/O is so slow compared with CPU that even in multi-programming system, CPU can be idle most of the time</p>
</li>
<li>
<p>Solutions</p>
<ul>
<li>
<p>Increase main memory</p>
<ul>
<li>Expensive</li>
<li>Leads to larger programs</li>
</ul>
</li>
<li>
<p><strong>Swapping</strong></p>
</li>
</ul>
</li>
</ul>
<h4 id="partitioning">Partitioning</h4>
<ul>
<li>
<p><strong>Splitting memory into sections to allocate to processes (including Operating System)</strong></p>
</li>
<li>
<p>Fixed-sized partitions</p>
<ul>
<li>
<p>May not be equal size</p>
</li>
<li>
<p><strong>Process is fitted into smallest hole that will take it (best fit)</strong></p>
</li>
<li>
<p><strong>Some wasted memory</strong></p>
</li>
<li>
<p>Leads to variable sized partitions</p>
</li>
</ul>
</li>
</ul>
<h5 id="variable-sized-partitions">Variable sized partitions</h5>
<ul>
<li>
<p>Allocate exactly the required memory to a process</p>
<ul>
<li>
<p>This leads to a hole at the end of memory, too small to use</p>
</li>
<li>
<p>Only one small hole - less waste</p>
</li>
</ul>
</li>
<li>
<p>When all processes are blocked, swap out a process and bring in another</p>
<ul>
<li>New process may be smaller than swapped out process</li>
<li>Another hole</li>
</ul>
</li>
<li>
<p><strong>Eventually have lots of holesï¼Œcalled fragmentation</strong></p>
</li>
<li>
<p>Solutions</p>
<ul>
<li>
<p><strong>Coalesce - Join adjacent holes into one large hole</strong></p>
</li>
<li>
<p><strong>Compaction - From time to time go through memory and move all hole into one free block</strong></p>
</li>
</ul>
</li>
</ul>
<h4 id="relocation">Relocation</h4>
<ul>
<li>
<p>Instructions contain addresses</p>
<ul>
<li>
<p>Locations of data</p>
</li>
<li>
<p>Addresses for instructions (branching)</p>
</li>
</ul>
</li>
<li>
<p>No guarantee that process will load into the same place in memory</p>
<ul>
<li>
<p>Logical address - relative to beginning of program</p>
</li>
<li>
<p>Physical address - actual location in memory (this time)</p>
</li>
<li>
<p>Automatic conversion using base address</p>
</li>
</ul>
</li>
</ul>
<h4 id="paging">Paging</h4>
<ul>
<li>
<p>Use paging to solve the problem of memory waste</p>
<ul>
<li>
<p>Split memory into equal sized, small chunks-page frames</p>
</li>
<li>
<p>Split programs (processes) into equal sized small chunksâ€“pages</p>
</li>
<li>
<p>Allocate the required number page frames to a process</p>
</li>
</ul>
</li>
<li>
<p><strong>Operating System is responsible for the management of page tables</strong></p>
<ul>
<li>
<p>A process does not require contiguous page frames</p>
</li>
<li>
<p><strong>Each process uses a page table to record which page frames in memory it uses</strong></p>
</li>
</ul>
</li>
<li>
<p>Each process has its own page table</p>
</li>
<li>
<p><strong>Each page table entry contains the frame number of the corresponding page in main memory</strong></p>
</li>
<li>
<p>Two extra bits are needed to indicate</p>
<ul>
<li>
<p><strong>whether the page is in main memory or not</strong></p>
</li>
<li>
<p><strong>Whether the contents of the page has been altered since it was last loaded</strong></p>
</li>
</ul>
</li>
</ul>
<h4 id="real-and-virtual-memory">Real and virtual memory</h4>
<ul>
<li>
<p><strong>Real memory</strong></p>
<ul>
<li><strong>Main memory, the actual <code>RAM</code></strong></li>
</ul>
</li>
<li>
<p><strong>Virtual memory</strong></p>
<ul>
<li>
<p><strong>Memory on disk</strong></p>
</li>
<li>
<p><strong>Allows for effective multiprogramming and relieves the user of tight constraints of main memory</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Advantage of virtual memory</strong></p>
<ul>
<li>
<p><strong>You do not need to load all processes into memory</strong></p>
</li>
<li>
<p><strong>Running multiple processes simultaneously</strong></p>
</li>
<li>
<p><strong>Improved operational efficiency</strong></p>
</li>
</ul>
</li>
</ul>
<h4 id="segmentation">Segmentation</h4>
<ul>
<li>
<p><strong>Paging is not (usually) visible to the programmer</strong></p>
</li>
<li>
<p><strong>Segmentation is visible to the programmer</strong></p>
</li>
<li>
<p>Usually different segments allocated to program and data</p>
</li>
<li>
<p>May be a number of program and data segments</p>
</li>
</ul>
<h4 id="x86-addressing-modes"><code>x86</code> addressing modes</h4>
<ul>
<li>
<p><strong><code>x86</code> adopts a memory management mechanism combining segments and pages</strong></p>
</li>
<li>
<p><strong>Virtual or effective address is offset into segment</strong></p>
<ul>
<li>
<p>Starting address plus offset gives linear address</p>
</li>
<li>
<p>This goes through page translation if paging enabled</p>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p>9 addressing modes available</p>
<ul>
<li>
<p>Immediate</p>
</li>
<li>
<p>Register operand</p>
</li>
<li>
<p>Displacement</p>
</li>
<li>
<p>Base</p>
</li>
<li>
<p>Base with displacement</p>
</li>
<li>
<p>Scaled index with displacement</p>
</li>
<li>
<p>Base with index and displacement</p>
</li>
<li>
<p>Base scaled index with displacement</p>
</li>
<li>
<p>Relative</p>
</li>
</ul>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter11-11.png" title="/img/Computer Organization and Architecture/chapter11-11.png" data-thumbnail="/img/Computer Organization and Architecture/chapter11-11.png">
        
    </a>
<ul>
<li>
<p>æŒ‡ä»¤ä¸­ç»™çš„é€»è¾‘åœ°å€åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼šæ®µå’Œæ®µå†…åç§»é‡</p>
</li>
<li>
<p>æŸ¥æ‰¾æ®µè¡¨ï¼Œå¯ä»¥å¾—åˆ°æ®µèµ·å§‹åœ°å€ï¼ŒåŠ ä¸Šæ®µå†…åç§»é‡ï¼Œå¾—åˆ°æ“ä½œæ•°çš„çº¿æ€§åœ°å€</p>
</li>
<li>
<p>çº¿æ€§åœ°å€é‡‡ç”¨äº†åˆ†é¡µçš„æ–¹å¼ï¼Œæ‰€ä»¥è¿˜éœ€è¦é€šè¿‡é¡µè½¬æ¢æœºåˆ¶ï¼Œå¾—åˆ°ç‰©ç†åœ°å€ï¼Œæœ€åé€šè¿‡ç‰©ç†åœ°å€æŸ¥è¯¢å¾—åˆ°è¿™ä¸ªæ“ä½œæ•°ã€‚é¡µè¡¨é‡‡ç”¨ä¸¤çº§é¡µè¡¨çš„å½¢å¼</p>
</li>
<li>
<p>6ä¸ªæ®µå¯„å­˜å™¨ï¼Œæ¯ä¸ªè¿›ç¨‹ä½¿ç”¨å“ªä¸ªæ®µå¯„å­˜å™¨ç”±æŒ‡ä»¤å’Œæ‰§è¡Œçš„ä¸Šä¸‹æ–‡æ¥ç¡®å®šã€‚æ¯ä¸ªæ®µå¯„å­˜å™¨å¯¹åº”ä¸€ä¸ªæ®µæè¿°ç¬¦è¡¨ï¼Œè®°å½•äº†æ®µçš„è®¿é—®æƒé™ï¼Œæ®µçš„èµ·å§‹åœ°å€å’Œæ®µçš„é•¿åº¦</p>
</li>
<li>
<p>åŸºå€å¯„å­˜å™¨å’Œå˜å€å¯„å­˜å™¨ï¼Œç”¨äºæ„é€ å¤æ‚çš„å¯»å€æ–¹å¼</p>
</li>
<li>
<p>åŸºå€ã€å˜å€ä»¥åŠæŒ‡ä»¤ä¸­çš„åç§»é‡è®¡ç®—å¾—åˆ°æœ‰æ•ˆåœ°å€ï¼ŒåŠ ä¸Šæ®µåœ°å€å¾—åˆ°æ“ä½œæ•°çš„çº¿æ€§åœ°å€ï¼Œç„¶åå†æ ¹æ®åˆ†é¡µçš„è§„åˆ™ï¼Œå¾—åˆ°ç‰©ç†åœ°å€</p>
</li>
</ul>
<hr>
<p><strong>Terms</strong></p>
<ul>
<li>
<p>Effective address</p>
</li>
<li>
<p>Physical address</p>
</li>
<li>
<p>LA: linear address</p>
</li>
<li>
<p>SR : segment register</p>
</li>
<li>
<p>B: base register</p>
</li>
<li>
<p>I : index register</p>
</li>
<li>
<p>S: scale factor</p>
</li>
</ul>
<hr>
<p><strong><code>x86</code> addressing modes</strong></p>
<ul>
<li>
<p>8ä¸ª32ä½é€šç”¨å¯„å­˜å™¨ï¼Œåˆ†åˆ«æ˜¯EAXã€EBXã€ECXã€EDXã€ESIã€EDIã€ESPã€EBP</p>
</li>
<li>
<p>8ä¸ª16ä½é€šç”¨å¯„å­˜å™¨ï¼ŒAXã€BXã€CXã€DXã€SIã€DIã€SPã€BP</p>
</li>
<li>
<p>8ä¸ª8ä½é€šç”¨å¯„å­˜å™¨ï¼ŒAHã€BHã€CHã€DHã€ALã€BLã€CLã€DL</p>
</li>
<li>
<p>é€šè¿‡æ®µå¯„å­˜å™¨æ¥ç¡®å®šæ®µçš„èµ·å§‹åœ°å€ï¼Œç„¶åè®¡ç®—å¾—åˆ°çº¿æ€§åœ°å€</p>
</li>
<li>
<p>æ¯”ä¾‹å˜å€å¯»å€å¸¦åç§»é‡å¯»å€æ¨¡å¼ä¸­ï¼Œå˜å€æ¯”ä¾‹å› å­ä¸º1ã€2ã€4ã€8ï¼Œè¿™ä¸ªæ˜¯å› ä¸º<code>x86</code>æ˜¯æŒ‰å­—èŠ‚å¯»å€ï¼Œè®¾ç½®æ¯”ä¾‹å› å­å¯ä»¥æŒ‰16ä½æˆ–32ä½è¿›è¡Œå˜å€</p>
</li>
<li>
<p>ç›¸å¯¹å¯»å€ä¸»è¦ç”¨äºæ§åˆ¶è½¬ç§»æŒ‡ä»¤</p>
</li>
<li>
<p>å°†åç§»é‡åŠ åˆ°ç¨‹åºè®¡æ•°å™¨ä¸­ï¼Œå¾—åˆ°ç›¸å¯¹äºä¸‹ä¸€ä¸ªéœ€è¦æ‰§è¡ŒæŒ‡ä»¤çš„åœ°å€çš„åç§»åœ°å€</p>
</li>
<li>
<p>åç§»é‡æ˜¯ä¸€ä¸ªæœ‰ç¬¦å·æ•´æ•°ï¼Œé€šè¿‡è®¡ç®—ï¼Œå¯ä»¥å¢åŠ ä¹Ÿå¯ä»¥å‡å°‘ç¨‹åºè®¡æ•°å™¨ä¸­çš„åœ°å€å€¼</p>
</li>
</ul>
<h4 id="arm-addressing-modes"><code>ARM</code> addressing modes</h4>
<ul>
<li>
<p><strong><code>ARM</code> is a <code>RISC</code> architecture processor</strong></p>
</li>
<li>
<p>RISC uses simple addressing modes, but ARM provides more addressing modes</p>
</li>
<li>
<p>Only load/store instructions can reference memory</p>
</li>
<li>
<p>Indirectly through base register plus offset</p>
</li>
<li>
<p>Base register itself may be updated during addressing</p>
</li>
<li>
<p>3 addressing mode</p>
</li>
</ul>
<h5 id="offset">Offset</h5>
<ul>
<li>åç§»å¯»å€ï¼šåªåç§»ï¼Œä¸å˜å€ã€‚ä»åŸºå€å¯„å­˜å™¨å¢åŠ æˆ–å‡å°‘åç§»é‡æ¥å½¢æˆå†…å­˜åœ°å€</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">STRB r0, [r1,#12]
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>å°†r0å­˜æ”¾åˆ°å­˜å‚¨å™¨ä¸­ï¼Œå­˜å‚¨å™¨åœ°å€ä¸ºr1çš„å€¼åŠ ä¸Šç«‹å³æ•°12</strong></li>
</ul>
<h5 id="pre-index">Pre-index</h5>
<ul>
<li>
<p>å†…å­˜åœ°å€è·Ÿåç§»å¯»å€ä¸€æ ·ï¼ŒåŸºå€å¯„å­˜å™¨å¢åŠ æˆ–å‡å°‘åç§»é‡æ¥å½¢æˆå†…å­˜åœ°å€</p>
</li>
<li>
<p><strong>å†…å­˜åœ°å€ä¼šå†™å›åˆ°åŸºå€å¯„å­˜å™¨ï¼ŒåŸºå€å¯„å­˜å™¨çš„å€¼ä¼šå¢åŠ æˆ–å‡å°‘ä¸€ä¸ªåç§»é‡</strong></p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">STRB r0, [r1,#12]!
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>è¿™é‡Œï¼å°±æ˜¯æ ‡è¯†æ˜¯å‰å˜å€</p>
</li>
<li>
<p>å¯»å€å®Œæˆåï¼Œr1å¯„å­˜å™¨çš„å€¼å˜æˆäº†r1-12</p>
</li>
</ul>
<h5 id="post-index">Post-index</h5>
<ul>
<li>æ“ä½œæ•°çš„åœ°å€å°±æ˜¯åœ¨åŸºå€å¯„å­˜å™¨çš„å€¼</li>
<li><strong>å¯»å€å®Œæˆåï¼ŒåŸºå€å¯„å­˜å™¨çš„å€¼ä¼šå¢åŠ æˆ–å‡å°‘ä¸€ä¸ªåç§»é‡ï¼Œç›¸å½“äºå¯»å€å®Œæˆåï¼ŒåŸºå€å¯„å­˜å™¨è‡ªèº«å¢åŠ æˆ–å‡å°‘äº†ä¸€ä¸ªåç§»é‡</strong></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">STRBv r0, [r1],#12
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p><strong>#è¡¨ç¤ºåå˜å€</strong></p>
</li>
<li>
<p><strong>å¯»å€ç”¨r1åœ°å€ï¼ŒåŒæ—¶r1å¯„å­˜å™¨çš„å€¼å˜æˆäº†r1-12</strong></p>
</li>
</ul>
<hr>
<ul>
<li>
<p>Base register acts as index register for pre-index and postindex addressing</p>
</li>
<li>
<p><strong>Offset either immediate value in instruction or another register</strong></p>
</li>
<li>
<p><strong>If registerï¼Œscaled register addressing available</strong></p>
<ul>
<li>
<p>Offset register value scaled by shift operator</p>
</li>
<li>
<p>Instruction specifies shift size</p>
</li>
</ul>
</li>
<li>
<p>Data Processing</p>
<ul>
<li>
<p>Register addressing</p>
</li>
<li>
<p>Value in register operands may be scaled using a shift operator</p>
</li>
<li>
<p>Or mixture of register and immediate addressing</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Addressing of branch</strong></p>
<ul>
<li>
<p>Branch</p>
<ul>
<li>
<p><strong>Only immediate</strong></p>
</li>
<li>
<p>Instruction contains 24 bit value</p>
</li>
<li>
<p>When addressing, this immediate value will be shifted two bits to the left, reaching the boundary of a 32-bit word</p>
</li>
<li>
<p>Shifted 2 bits to the left, which is equivalent to an offset of 26 bits. The effective address range is+- 32MB</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>ARM Load/Store Multiple Addressing</strong></p>
<ul>
<li>
<p>One instruction can load or store multiple data at the same time</p>
<ul>
<li>Load or store a set of general registers</li>
</ul>
</li>
<li>
<p>16-bit instruction field in instruction specifies list of registers</p>
<ul>
<li>Registers corresponds to a sequential storage unit in memory</li>
<li>Memory unit with the lowest address corresponds to the register with the lowest number</li>
</ul>
</li>
<li>
<p>Base register specifies first main memory address</p>
</li>
<li>
<p>Four types</p>
<ul>
<li>increment after</li>
<li>increment before</li>
<li>decrement after</li>
<li>decrement before</li>
</ul>
</li>
<li>
<p><strong>Incrementing or decrementing starts before or after first memory access</strong></p>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter11-12.png" title="/img/Computer Organization and Architecture/chapter11-12.png" data-thumbnail="/img/Computer Organization and Architecture/chapter11-12.png" data-sub-html="<h2>Multiple addressing diagram</h2>">
        
    </a><figcaption class="image-caption"><code>Multiple addressing diagram</code></figcaption>
    </figure>
<ul>
<li>
<p>r10å¼€å§‹çš„ä¸‰ä¸ªå•å…ƒå†…å®¹åŠ è½½åˆ°r0ï¼Œr1ï¼Œr4è¿™ä¸‰ä¸ªå¯„å­˜å™¨ä¸­ã€‚R0ä¸ºä½åœ°å€ï¼Œr4ä¸ºé«˜åœ°å€</p>
</li>
<li>
<p>é‡‡ç”¨åé€’å¢ï¼Œä»0x20Cå¼€å§‹ï¼Œè¿ç»­ä¸‰ä¸ªå­˜å‚¨å•å…ƒçš„å†…å®¹å–å‡ºåï¼Œåˆ†åˆ«ç»™r0ï¼Œr1å’Œr4ã€‚é‡‡ç”¨å‰é€’å¢ï¼Œç¬¬ä¸€ä¸ªå­˜å‚¨å•å…ƒçš„åœ°å€è¦åœ¨åŸºå€å¯„å­˜å™¨ä¸­çš„åœ°å€åŸºç¡€ä¸ŠåŠ 1ï¼Œç„¶åå–è¿ç»­ä¸‰ä¸ªå­˜å‚¨å•å…ƒçš„å†…å®¹å–å‡ºåï¼Œåˆ†åˆ«ç»™r0ï¼Œr1å’Œr4</p>
</li>
<li>
<p>å¯¹äºåé€’å‡ï¼Œå°±æ˜¯ä»åŸºå€å¯„å­˜å™¨å¼€å§‹ï¼Œåœ°å€é€’å‡çš„è¿ç»­ä¸‰ä¸ªå­˜å‚¨å•å…ƒã€‚å¯¹äºå‰é€’å‡ï¼Œå°±æ˜¯å…ˆåœ¨åŸºå€å¯„å­˜å™¨çš„åœ°å€ä¸Šå‡1ï¼Œç„¶ååœ°å€é€’å‡çš„è¿ç»­ä¸‰ä¸ªå­˜å‚¨å•å…ƒ</p>
</li>
</ul>
<h3 id="instruction-formats">Instruction Formats</h3>
<ul>
<li>
<p>Instruction set is the interface provided by the processor to the upper layer</p>
<ul>
<li>
<p>An important symbol of CPU performance</p>
</li>
<li>
<p>The rationality of the instruction set has a great impact on the performance of the CPU</p>
</li>
</ul>
</li>
<li>
<p><strong>Therefore, the design of instruction format is the core content of processor design</strong></p>
</li>
</ul>
<hr>
<p><strong>Instruction formats</strong></p>
<ul>
<li>
<p>Instruction include</p>
<ul>
<li>
<p>Opcode</p>
</li>
<li>
<p>Operand(s) (implicit or explicit) and addressing mode</p>
</li>
</ul>
</li>
<li>
<p><strong>Instruction formats: How many bits do the parts of the instruction occupy, and in what order</strong></p>
</li>
<li>
<p>Layout of bits in an instruction</p>
</li>
<li>
<p>Usually more than one instruction format in an instruction set</p>
</li>
</ul>
<h4 id="key-of-instruction-formats">Key of instruction formats</h4>
<ul>
<li>
<p>The width of opcodes: determines number of operation</p>
<ul>
<li><strong>The more opcodes, the more functions of the instruction set, and the larger the number of bits</strong></li>
</ul>
</li>
<li>
<p>The width of operands: effect the instruction length</p>
<ul>
<li>
<p>The operand takes up a large proportion of the instruction length</p>
</li>
<li>
<p><strong>Number of operands, addressing mode and size of addressing space have a great impact on the length of instructions</strong></p>
</li>
</ul>
</li>
<li>
<p>Addressing modes: determine the complexity and the length of the instruction</p>
<ul>
<li>
<p><strong>The more complex the addressing mode is, the more operations are required to obtain the physical address of the operand, and the higher the time complexity is</strong></p>
</li>
<li>
<p><strong>Complex addressing mode can use less address field length to obtain larger addressing space and save instruction length</strong></p>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p><strong>First step in instruction set design is to determine the length of instructions</strong></p>
</li>
<li>
<p><strong>Trade off between powerful instruction repertoire and saving space</strong></p>
</li>
</ul>
<hr>
<p><strong>Summary</strong></p>
<ul>
<li>
<p>The operation code and operands should have as many digits as possible</p>
</li>
<li>
<p>The longer the instruction, the more memory space it takes</p>
</li>
<li>
<p>Generallyï¼Œinstruction length is consistent with the bus width , or an integer multiple</p>
</li>
<li>
<p>In the design of instruction set</p>
<ul>
<li>
<p>Every part of the directive needs to be properly planned</p>
</li>
<li>
<p>Seeking the best balance among various design scheme</p>
</li>
</ul>
</li>
</ul>
<h4 id="allocation-of-bits">Allocation of bits</h4>
<ul>
<li>
<p>After the length of the instruction is determined, each bit in the instruction needs to be allocated reasonably to maximize the use of each bit</p>
<ul>
<li><strong>If the opcode is long, operands is short</strong></li>
<li><strong>Variable length opcode, additional bits determine operation</strong></li>
</ul>
</li>
<li>
<p><strong>First, you need to determine the number of operands and opcodes</strong></p>
</li>
</ul>
<p><strong>The following factors need to be considered</strong></p>
<ul>
<li>
<p>Number of operands</p>
</li>
<li>
<p>Number of addressing modes</p>
</li>
<li>
<p>Register versus memory</p>
</li>
<li>
<p>Number of register sets</p>
</li>
<li>
<p>Address range</p>
</li>
<li>
<p>Address granularity</p>
</li>
</ul>
<hr>
<p><strong>Number of addressing modes</strong></p>
<ul>
<li>
<p>Some opcodes implicitly specify the addressing mode of the operand, which does not need to be specified separately</p>
</li>
<li>
<p>Sometimes it is necessary to explicitly specify the addressing mode of this operand, and one or more addressing mode bits are required</p>
</li>
<li>
<p>There may be multiple addressing modes in an instruction</p>
</li>
</ul>
<hr>
<p><strong>Number of operands</strong></p>
<ul>
<li>
<p>If the instruction only supports one operand, it is troublesome to write the program</p>
</li>
<li>
<p>Generally, two operands are supported</p>
</li>
<li>
<p>Each operand hope an independent addressing mode</p>
<ul>
<li>
<p>Flexible</p>
</li>
<li>
<p>Need addressing indication bit</p>
</li>
</ul>
</li>
<li>
<p>Some processors allow one operand to specify the addressing bit</p>
</li>
</ul>
<hr>
<p><strong>Register versus memory</strong></p>
<ul>
<li>Data needs to be loaded into CPU through registers for processing</li>
<li>If there is only one register, it does not need to be specified, but it is very troublesome to use</li>
<li>Several registers are generally provided
<ul>
<li>Several bits can specify a register, which takes up less instruction bits</li>
</ul>
</li>
<li>Most processors have more than 32 registers</li>
</ul>
<hr>
<p><strong>Number of register sets</strong></p>
<ul>
<li>
<p>Most processors provide only one set of general-purpose registers</p>
<ul>
<li>
<p>Store Data</p>
</li>
<li>
<p>Store address field in offset addressing mode</p>
</li>
</ul>
</li>
<li>
<p>Some processors, such as the x86 processor, can provide multiple sets of registers</p>
<ul>
<li>
<p>Divide by function, some store data, some store offset</p>
</li>
<li>
<p>Opcode implicitly determines which set of registers to use</p>
</li>
<li>
<p>Reduce the number of instructions</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Address range</strong></p>
<ul>
<li>
<p>In direct addressing, the address range is determined by the length of the address field in the instruction</p>
<ul>
<li>
<p>Instruction length is limited</p>
</li>
<li>
<p>The address range of direct addressing is small</p>
</li>
</ul>
</li>
<li>
<p><strong>General use offset addressing</strong></p>
<ul>
<li>
<p>Length of the address register is critical</p>
</li>
<li>
<p>If the offset is large, the length of the address field in the instruction is also long</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Address granularity</strong></p>
<ul>
<li>
<p><strong>The smaller the addressable address granularity is, the longer the address bits are required</strong></p>
</li>
<li>
<p>Addressing by byte</p>
<ul>
<li>
<p>Some operations are more convenient</p>
</li>
<li>
<p>e.g. character processing</p>
</li>
<li>
<p>More address bits required</p>
</li>
</ul>
</li>
<li>
<p>Operate according to words</p>
<ul>
<li>
<p>Number of address bits reduced</p>
</li>
<li>
<p>Reduced operational flexibility</p>
</li>
</ul>
</li>
</ul>
<h3 id="x86-and-arm-instruction-formats"><code>x86</code> and <code>ARM</code> instruction formats</h3>
<h4 id="x86-instruction-format"><code>x86</code> instruction format</h4>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter11-13.png" title="/img/Computer Organization and Architecture/chapter11-13.png" data-thumbnail="/img/Computer Organization and Architecture/chapter11-13.png">
        
    </a>
<p><strong>Characteristic</strong></p>
<ul>
<li>
<p><strong>Addressing mode is associated with the instruction opcode</strong></p>
</li>
<li>
<p><strong>An instruction has only one addressing mode</strong></p>
</li>
<li>
<p><strong>Only one memory operand can be referenced in an instruction</strong></p>
</li>
<li>
<p><strong>Typical <code>CISC</code> architectureï¼Œuse complex instruction format</strong></p>
<ul>
<li>
<p><code>X86</code> needs to consider downward compatibility</p>
</li>
<li>
<p>Hope to provide richer instructions for compiler developers</p>
</li>
</ul>
</li>
</ul>
<h4 id="arm-instruction-formats"><code>ARM</code> instruction formats</h4>
<ul>
<li>
<p><strong>Typical <code>RISC</code> architecture</strong></p>
</li>
<li>
<p><strong>All the instructions are 32 bits, and the format is very neat</strong></p>
</li>
<li>
<p><strong><code>ARM</code> instructions are divided into four categories</strong></p>
<ul>
<li>
<p><strong>data processing instructions</strong></p>
</li>
<li>
<p><strong>load / save instructions</strong></p>
</li>
<li>
<p><strong>overload / save instructions</strong></p>
</li>
<li>
<p><strong>branch instructions</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>All instructions are conditionally executed</strong></p>
</li>
</ul>
<h5 id="condition-code">Condition code</h5>
<ul>
<li>
<p><strong>All instructions are conditionally executed</strong></p>
</li>
<li>
<p>The instruction contains a 4-bit condition code, which is in the highest 4-bit of the instruction</p>
</li>
<li>
<p>Except for the condition flags 1110 and 1111, all other instructions must meet the conditions before they can be executed</p>
</li>
<li>
<p><strong>The condition code includes four condition flags, which are stored in the program status register</strong></p>
</li>
<li>
<p><strong>The four condition flags are N negative flag, Z zero flag, C carry flag, V overflow flag</strong></p>
</li>
<li>
<p><strong>For all arithmetic or logic instructions, an S bit is given to indicate whether the instruction modifies the condition flag bit</strong></p>
</li>
</ul>
<h4 id="data-processing">Data processing</h4>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter11-14.png" title="/img/Computer Organization and Architecture/chapter11-14.png" data-thumbnail="/img/Computer Organization and Architecture/chapter11-14.png">
        
    </a>
<ul>
<li>
<p>æ•°æ®å¤„ç†æŒ‡ä»¤ç±»å‹ä¸º000æˆ–001ã€‚æ“ä½œç éƒ½æ˜¯4ä½ï¼Œsè¡¨ç¤ºæ˜¯å¦ä¿®æ”¹æ¡ä»¶æ ‡å¿—ä½ã€‚æŒ‡ä»¤ä¸­éƒ½æœ‰ä¸‰ä¸ªæ“ä½œæ•°</p>
</li>
<li>
<p>ç¬¬ä¸€ç§æ ¼å¼ä¸­ï¼Œç›®çš„å¯„å­˜å™¨Rdï¼Œç¬¬ä¸€ä¸ªæ“ä½œæ•°å¯„å­˜å™¨Rnå’Œç¬¬äºŒä¸ªæ“ä½œæ•°å¯„å­˜å™¨Rmï¼Œæ“ä½œæ•°å¯ä»¥æ ¹æ®shiftçš„æ ‡å¿—è¿›è¡Œç§»ä½ï¼Œshift amountæŒ‡æ˜ç§»åŠ¨å¤šå°‘ä½</p>
</li>
<li>
<p>ç¬¬äºŒç§æ ¼å¼è·Ÿç¬¬ä¸€ç§ç±»ä¼¼ï¼Œåªæ˜¯ç§»ä½çš„ä½æ•°ä¸æ˜¯ç«‹å³æ•°ï¼Œè€Œæ˜¯ç”±å¯„å­˜å™¨Rsæ¥ç¡®å®š</p>
</li>
<li>
<p>ç¬¬ä¸‰ç§æ ¼å¼ä¸­ï¼Œç¬¬äºŒæ“ä½œæ•°æ˜¯ä¸€ä¸ªç«‹å³æ•°ï¼Œå¹¶ä¸”å¯ä»¥é’ˆå¯¹ç«‹å³æ•°è¿›è¡Œå¾ªç¯å³ç§»ï¼Œå¾ªç¯å³ç§»çš„æ¬¡æ•°ç”±rotateåŸŸä¸­çš„å€¼å†³å®š</p>
</li>
</ul>
<h4 id="loadstore">Load/Store</h4>
<ul>
<li>
<p>åŠ è½½/ä¿å­˜æŒ‡ä»¤ä¸­ï¼ŒæŒ‡ä»¤ä¸€èˆ¬ç±»å‹ä¸º010å’Œ011ã€‚åé¢5ä½æ ‡è¯†äº†å¯»å€æ¨¡å¼ã€æ•°æ®ç±»å‹ï¼Œæ˜¯å­—èŠ‚è¿˜æ˜¯å­—ï¼Œä»¥åŠåŠ è½½å’Œä¿å­˜æ ‡å¿—ã€‚</p>
</li>
<li>
<p>ç¬¬ä¸€ç§åŠ è½½/ä¿å­˜æŒ‡ä»¤æ˜¯ç«‹å³æ•°åç§»æŒ‡ä»¤ï¼ŒæŒ‡ä»¤ä¸­ç»™å‡ºäº†12ä½çš„åç§»é‡ã€‚å†…å­˜åœ°å€å°±æ˜¯åŸºå€å¯„å­˜å™¨RnåŠ ä¸Šæˆ–å‡å»ç«‹å³æ•°åç§»é‡ã€‚</p>
</li>
<li>
<p>ç¬¬äºŒç§æŒ‡ä»¤æ˜¯å¯„å­˜å™¨åç§»ã€‚åç§»é‡åœ¨Rmå¯„å­˜å™¨ä¸­ï¼Œé€šè¿‡shiftç¡®å®šç§»ä½æ“ä½œï¼Œç§»åŠ¨shift amountä½ä¹‹åå¾—åˆ°ï¼Œç„¶åå†å’ŒåŸºå€å¯„å­˜å™¨Rnè®¡ç®—ï¼Œå¾—åˆ°å†…å­˜åœ°å€ã€‚</p>
</li>
<li>
<p>å¤šè½½/å¤šå­˜æŒ‡ä»¤ä¸­ï¼ŒæŒ‡ä»¤ä¸€èˆ¬ç±»å‹ä¸º100ã€‚æŒ‡ä»¤ä¸­ç»™äº†16ä½çš„å¯„å­˜å™¨åˆ—è¡¨ï¼Œå†…å­˜åœ°å€åœ¨Rnä¸­ï¼Œæ˜¯å…ˆé€’å¢ï¼Œå…ˆé€’å‡ï¼Œè¿˜æ˜¯åé€’å¢ï¼Œåé€’å‡ï¼Œç”±å¯»å€æ¨¡å¼æ¥å†³å®š</p>
</li>
</ul>
<h4 id="branch">Branch</h4>
<ul>
<li>åˆ†æ”¯æŒ‡ä»¤çš„æŒ‡ä»¤ä¸€èˆ¬ç±»å‹ä¸º101ï¼Œæä¾›äº†ä¸€ä¸ª24ä½çš„ç«‹å³æ•°</li>
<li>è¿˜æœ‰ä¸€ä¸ªæ ‡å¿—ä½Lï¼Œè¿™ä¸ªæ ‡å¿—ä½å†³å®šè¿”å›åœ°å€æ˜¯å¦ä¿å­˜åœ¨è¿æ¥å¯„å­˜å™¨ï¼Œä¹Ÿå°±æ˜¯link registerä¸­ã€‚</li>
</ul>
<h4 id="arm-immediate-constants">ARM immediate constants</h4>
<ul>
<li>
<p>æ•°æ®å¤„ç†æŒ‡ä»¤ä¸­ï¼Œç«‹å³æ•°å äº†8ä½ï¼Œ<strong>åŒæ—¶è¿˜è§„å®šäº†ä¸€ä¸ªå¾ªç¯ç§»ä½çš„å€¼ã€‚è¿™æ ·è®¾è®¡çš„ç›®çš„æ˜¯ä¸ºäº†è·å¾—å–å€¼èŒƒå›´è¾ƒå¤§çš„æ•°</strong></p>
</li>
<li>
<p>é€šè¿‡å¾ªç¯ç§»ä½ï¼Œå¯ä»¥å°†ç«‹å³æ•°çš„èŒƒå›´ä»8ä½æœ€å¤šæ‰©å±•åˆ°32ä½</p>
</li>
</ul>
<h4 id="thumb-instruction-set">Thumb instruction set</h4>
<ul>
<li>
<p>Special Usage: use 16 bit instructions to implement most of 32-bit instructions</p>
</li>
<li>
<p>In an embedded system, there may only be a 16 bit bus</p>
</li>
<li>
<p><strong>Thumb instruction set: Re-encoded subset of ARM instruction set</strong></p>
</li>
<li>
<p><strong>Increases performance in 16-bit or less data bus</strong></p>
</li>
<li>
<p>Need to reduce 16 bits in the instruction</p>
</li>
<li>
<p>Unconditional (4 bits saved)</p>
</li>
<li>
<p>Always update conditional flags</p>
<ul>
<li>Update flag not used (1 bit saved)</li>
</ul>
</li>
<li>
<p>Subset of instructions</p>
<ul>
<li>
<p>2 bit opcode, 3 bit type field (2 bit saved)</p>
</li>
<li>
<p>Reduced operand specifications (9 bits saved)</p>
</li>
</ul>
</li>
<li>
<p>å‹ç¼©æŒ‡ä»¤é›†çš„16ä½æŒ‡ä»¤å¯ä»¥æ‰©å±•åˆ°32ä½çš„æ ‡å‡†æŒ‡ä»¤</p>
<ul>
<li>
<p>å‹ç¼©çš„æŒ‡ä»¤é›†åªæœ‰16ä½ï¼Œå¯ä»¥åœ¨é…ç½®è¾ƒä½çš„ç¡¬ä»¶ä¸Šæ‰§è¡Œ</p>
</li>
<li>
<p>å¦‚æœåœ¨æ ‡å‡†çš„ARMå¤„ç†å™¨ä¸Šæ‰§è¡Œï¼Œå¯ä»¥æŒ‰ç…§è¿™ä¸ªå›¾ä¸Šçš„æ–¹æ³•ï¼Œæ‰©å……åˆ°32ä½ä¹‹åè¿›è¡Œæ‰§è¡Œ</p>
</li>
</ul>
</li>
<li>
<p>ARMå¤„ç†å™¨èƒ½å¤Ÿæ‰§è¡Œ16ä½å’Œ32ä½çš„æŒ‡ä»¤ï¼Œå¹¶ä¸”èƒ½å¤Ÿä¸¤ç§æ ¼å¼æ··åˆæ‰§è¡Œ</p>
</li>
<li>
<p>å¤„ç†å™¨ä¸­çš„æ§åˆ¶å¯„å­˜å™¨ä¸­çš„1ä½ç”¨æ¥ç¡®å®šå½“å‰çš„æ‰§è¡Œæ˜¯16ä½çš„æŒ‡ä»¤è¿˜æ˜¯32ä½çš„æŒ‡ä»¤</p>
</li>
</ul>
]]></description>
</item>
<item>
    <title>Computer Organization and Architecture Instruction Sets: Characteristics and Functions</title>
    <link>https://Jungle430.github.io/posts/computer-organization-and-architecture/computer-organization-and-architecture-instruction-sets-characteristics-and-functions/</link>
    <pubDate>Wed, 25 Jan 2023 17:56:04 &#43;0800</pubDate><author>1239946358@qq.com (Jungle)</author><guid>https://Jungle430.github.io/posts/computer-organization-and-architecture/computer-organization-and-architecture-instruction-sets-characteristics-and-functions/</guid>
    <description><![CDATA[<h1 id="computer-organization-and-architecture">Computer Organization and Architecture</h1>
<h2 id="instruction-sets-characteristics-and-functions">Instruction Sets: Characteristics and Functions</h2>
<h3 id="outline">Outline</h3>
<ul>
<li>
<p>Machine Instruction Characteristics</p>
</li>
<li>
<p>Types of Operands</p>
</li>
<li>
<p>Intel x86 and ARM Data Types</p>
</li>
<li>
<p>Types of Operations</p>
</li>
<li>
<p>Endian Support</p>
</li>
</ul>
<h3 id="machine-instruction-characteristics">Machine Instruction Characteristics</h3>
<h4 id="language">Language</h4>
<p><strong>Programming language</strong></p>
<ul>
<li>
<p>Classification of programming language</p>
<ul>
<li>
<p>Machine language</p>
</li>
<li>
<p>Assembly language</p>
</li>
<li>
<p>High-level language</p>
</li>
</ul>
</li>
<li>
<p>Compiler</p>
<ul>
<li>
<p>Computers can only recognize machine language</p>
</li>
<li>
<p>Translation program that converts high-level/assembly language programs into machine language</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Machine language</strong></p>
<ul>
<li>
<p>Defined by the computerâ€™s hardware design</p>
</li>
<li>
<p>Consists of streams of numbers (1s and 0s)</p>
</li>
<li>
<p>Instruct the computer to perform the most basic operations</p>
</li>
<li>
<p>A computer can understand only its own machine language</p>
</li>
<li>
<p>It is difficult to remember, and generally will not be used directly</p>
</li>
</ul>
<hr>
<p><strong>Assembly language</strong></p>
<ul>
<li>
<p>Represents machine-language instructions using English-like abbreviations</p>
</li>
<li>
<p>Replace the address of an instruction or operand with an address symbol or label</p>
</li>
<li>
<p>Assemblers convert assembly language to machine language</p>
</li>
<li>
<p>Specific assembly language and specific machine language instruction set are one-to-one, and cannot be directly transplanted between different computer</p>
</li>
</ul>
<h4 id="instruction-set">Instruction set</h4>
<ul>
<li>
<p>The complete collection of instructions that are understood by a CPU</p>
<ul>
<li>
<p>Machine Code</p>
</li>
<li>
<p>Binary</p>
</li>
<li>
<p>Usually represented by assembly codes</p>
</li>
</ul>
</li>
</ul>
<div class="mermaid" id="id-1"></div>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter10-1.png" title="/img/Computer Organization and Architecture/chapter10-1.png" data-thumbnail="/img/Computer Organization and Architecture/chapter10-1.png" data-sub-html="<h2>Instruction cycle state diagram</h2>">
        
    </a><figcaption class="image-caption"><code>Instruction cycle state diagram</code></figcaption>
    </figure>
<h5 id="elements-of-an-instruction">Elements of an instruction</h5>
<ul>
<li>
<p><strong>Operation code (Op code)</strong></p>
<ul>
<li><strong>Do what</strong></li>
</ul>
</li>
<li>
<p><strong>Source Operand reference</strong></p>
<ul>
<li><strong>From this</strong></li>
</ul>
</li>
<li>
<p><strong>Result Operand reference</strong></p>
<ul>
<li><strong>Put the answer here</strong></li>
</ul>
</li>
<li>
<p><strong>Next Instruction Reference</strong></p>
<ul>
<li>
<p><strong>When you have done that, do this&hellip;</strong></p>
</li>
<li>
<p><strong>Generally, it defaults to the next storage unit</strong></p>
</li>
</ul>
</li>
</ul>
<h5 id="instruction-representation">Instruction representation</h5>
<ul>
<li>
<p>In machine code,each opcode has a unique bit string</p>
</li>
<li>
<p>For programmers a symbolic representation is used</p>
<ul>
<li>e.g. ADD,SUB,LOAD</li>
</ul>
</li>
<li>
<p>The operand follows the opcode in the instruction</p>
</li>
<li>
<p>If there are multiple operands, separate them with â€œ, â€</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ADD A,B
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p><strong>ç®€å•çš„æŒ‡ä»¤æ ¼å¼</strong></p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter10-2.png" title="/img/Computer Organization and Architecture/chapter10-2.png" data-thumbnail="/img/Computer Organization and Architecture/chapter10-2.png">
        
    </a>
<ul>
<li>
<p>æŒ‡ä»¤æ€»å…±16ä¸ªbité•¿ï¼Œåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†</p>
<ul>
<li>
<p>ç¬¬ä¸€éƒ¨åˆ†æ˜¯æ“ä½œç ï¼Œ4ä¸ªbitã€‚æœ€å¤šæœ‰16ç§æ“ä½œ</p>
</li>
<li>
<p>ç¬¬äºŒéƒ¨åˆ†æ˜¯æ“ä½œæ•°1çš„å¼•ç”¨ï¼Œ6ä¸ªbit</p>
</li>
<li>
<p>ç¬¬ä¸‰éƒ¨åˆ†æ˜¯æ“ä½œæ•°2çš„å¼•ç”¨ï¼Œ6ä¸ªbit</p>
</li>
</ul>
</li>
<li>
<p><strong>åœ¨æŒ‡ä»¤ä¸­ï¼Œæºæ“ä½œæ•°å’Œç›®çš„æ“ä½œæ•°å¯ä»¥åœ¨å†…å­˜ã€CPUå¯„å­˜å™¨ä¸­æˆ–è€…I/Oä¸­ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªæ•°ï¼Œç§°ä¹‹ä¸ºç«‹å³æ•°</strong></p>
</li>
</ul>
<p>Operands</p>
<ul>
<li>
<p>Main memory</p>
<ul>
<li>
<p>Memory address must be supplied</p>
</li>
<li>
<p><strong>If virtual address is supplied,address translation required</strong></p>
</li>
<li>
<p><strong>It may be in the cache</strong></p>
</li>
</ul>
</li>
<li>
<p>I/O device</p>
<ul>
<li><strong>The instruction must specify the I/O module and device for the operation</strong></li>
</ul>
</li>
<li>
<p>CPU register</p>
<ul>
<li>
<p><strong>If only one register exists, reference to it may be implicit</strong></p>
</li>
<li>
<p><strong>If more than one register exists, then each register is assigned a unique name or number</strong></p>
</li>
<li>
<p><strong>Instruction must contain the number of the desired register</strong></p>
</li>
</ul>
</li>
<li>
<p>Immediate</p>
<ul>
<li>The value of the operand is contained in a field in the instruction being executed</li>
</ul>
</li>
</ul>
<h5 id="instruction-types">Instruction types</h5>
<ul>
<li>
<p>The instructions can be categorized into four types</p>
<ul>
<li>
<p>Data processing</p>
</li>
<li>
<p>Data storage</p>
</li>
<li>
<p>Data movement</p>
</li>
<li>
<p>Program flow control</p>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p>Data processing instruction</p>
<ul>
<li>
<p>Processing data</p>
</li>
<li>
<p>Including arithmetic and logic instructions</p>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p>Data storage</p>
<ul>
<li>
<p>Storing data</p>
</li>
<li>
<p>Mainly refers to the <strong>transfer of data between memory and CPU registers</strong></p>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>Data movement
<ul>
<li>mainly refers to the data transmission between CPU and I/O</li>
<li>I/O instructions</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p>Program flow control</p>
<ul>
<li>
<p>Some instructions of CPU execution control</p>
</li>
<li>
<p>Test instructions</p>
</li>
<li>
<p>Branch instructions</p>
</li>
</ul>
</li>
</ul>
<p><strong>Instruction types</strong></p>
<ul>
<li>
<p>Arithmetic instructions</p>
</li>
<li>
<p>Logic (Boolean) instructions</p>
</li>
<li>
<p>Memory instructions: moving data between memory and the registers</p>
</li>
<li>
<p>I/O instructions</p>
</li>
<li>
<p>Test instructions: used to test the value of a data word or the status of a computation</p>
</li>
<li>
<p>Branch instructions: used to branch to a different set of instructions</p>
</li>
</ul>
<h4 id="number-of-addresses">Number of addresses</h4>
<ul>
<li>
<p>The address in the instruction is used to address the operand</p>
</li>
<li>
<p>The number of addresses in instructions varies with different instruction types</p>
</li>
<li>
<p>Different computers support different numbers of operands</p>
</li>
<li>
<p><strong>The number of operands in an instruction may be 3, 2, 1, or none</strong></p>
</li>
</ul>
<h5 id="3-addresses">3 addresses</h5>
<ul>
<li>
<p><strong>Operand 1, Operand 2, Result</strong></p>
</li>
<li>
<p><strong>a = b + c</strong></p>
</li>
<li>
<p>May be a forth - next instruction (usually implicit)</p>
</li>
<li>
<p>Not common</p>
</li>
<li>
<p>Needs very long words to hold everything</p>
</li>
</ul>
<h5 id="2-addresses">2 addresses</h5>
<ul>
<li>
<p>Two operand</p>
</li>
<li>
<p><strong>One address doubles as operand and result</strong></p>
</li>
<li>
<p><strong>a = a + b</strong></p>
</li>
<li>
<p>Reduces length of instruction</p>
</li>
<li>
<p>Requires some extra work</p>
<ul>
<li><strong>Temporary storage to hold some results</strong></li>
</ul>
</li>
</ul>
<h5 id="1-addresses">1 addresses</h5>
<ul>
<li>
<p><strong>Implicit second address</strong></p>
</li>
<li>
<p><strong>Usually a register (accumulator)</strong></p>
</li>
<li>
<p>Common on early machines</p>
<ul>
<li>
<p>LOAD A  $AC \leftarrow A\newline$</p>
</li>
<li>
<p>SUB B  $AC \leftarrow AC-B\newline$</p>
</li>
<li>
<p>STORE Y  $Y \leftarrow AC\newline$</p>
</li>
</ul>
</li>
</ul>
<h5 id="0-addresses">0 addresses</h5>
<ul>
<li>
<p><strong>0 (zero) addresses: All addresses implicit</strong></p>
<ul>
<li>
<p><strong>Usually use stack to imply the operands</strong></p>
</li>
<li>
<p>e.g:</p>
<ul>
<li>push a</li>
<li>push b</li>
<li>add (pop a and b,then add a and b(c=a+b) and push the result to the stack)</li>
<li>pop c</li>
<li>c = a + b</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p>More addresses</p>
<ul>
<li>
<p>More complex instructions</p>
</li>
<li>
<p>Fewer instructions per program</p>
</li>
<li>
<p>Inter-register operations are quicker</p>
</li>
<li>
<p>More registers</p>
</li>
</ul>
</li>
<li>
<p>Fewer addresses</p>
<ul>
<li>
<p>Less complex instructions</p>
</li>
<li>
<p>More instructions per program</p>
</li>
<li>
<p>Faster fetch/execution of instructions</p>
</li>
</ul>
</li>
</ul>
<h4 id="instruction-set-design">Instruction set design</h4>
<h5 id="design-issues-of-instruction-set">Design issues of instruction set</h5>
<ul>
<li>
<p>Operation repertoire: how many and which operations to provides, and how complex operations should be</p>
</li>
<li>
<p>Data types: the operands types</p>
</li>
<li>
<p>Instruction format: instruction length, number of addressesâ€¦</p>
</li>
<li>
<p>Registers: how many registers can be used by the instructions</p>
</li>
<li>
<p>Addressing: how to access a memory location, how many modes can be used</p>
</li>
</ul>
<h3 id="types-of-operands">Types of Operands</h3>
<ul>
<li>
<p>Addresses</p>
</li>
<li>
<p>Numbers</p>
<ul>
<li>Integer/floating point</li>
</ul>
</li>
<li>
<p>Characters</p>
<ul>
<li>ASCII etc</li>
</ul>
</li>
<li>
<p>Logical Data</p>
<ul>
<li>Bits or flags</li>
</ul>
</li>
</ul>
<h4 id="address">Address</h4>
<ul>
<li>
<p>The data operated by the instruction may be in memory</p>
<ul>
<li>
<p>Address is used for addressing operands</p>
</li>
<li>
<p>Treat as an unsigned integer</p>
</li>
</ul>
</li>
<li>
<p>In many cases, need to process the address to get the actual address of the data</p>
</li>
</ul>
<h4 id="numbers">Numbers</h4>
<ul>
<li>
<p>Three types of numerical data are common in computers</p>
<ul>
<li>
<p>Binary integer or binary fixed point</p>
</li>
<li>
<p>Binary floating point</p>
</li>
<li>
<p>Decimal</p>
<ul>
<li>
<p>Packed decimal</p>
</li>
<li>
<p>Use 4-bit binary number to represent a decimal number</p>
</li>
<li>
<p>In the packed decimal representation, only the previous 10 codes are used, that is, from 0000 to 1001</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="characters">Characters</h4>
<ul>
<li>
<p>A common form of data is text or character strings</p>
</li>
<li>
<p>The most commonly used</p>
<ul>
<li>
<p>International Reference Alphabet (IRA)</p>
</li>
<li>
<p>United States as the American Standard Code for Information Interchange (ASCII)</p>
</li>
</ul>
</li>
<li>
<p>Extended Binary Coded Decimal Interchange Code (EBCDIC)</p>
<ul>
<li>Used on IBM mainframes</li>
</ul>
</li>
</ul>
<h4 id="logical-data">Logical data</h4>
<ul>
<li>
<p>Boolean or binary data items</p>
<ul>
<li>Each item can take on only the values 1 (true) and 0 (false)</li>
</ul>
</li>
<li>
<p>There are occasions when we wish to manipulate the bits of a data item</p>
</li>
</ul>
<p>æ•°æ®éƒ½æ˜¯ä»¥äºŒè¿›åˆ¶ä¸²çš„å½¢å¼ä¿å­˜çš„ã€‚<strong>å› æ­¤æ•°æ®æ˜¯ä»€ä¹ˆç±»å‹çš„ä¸»è¦å–å†³äºæŒ‡ä»¤çš„ç±»å‹ã€‚æŒ‡ä»¤ä¸­ç¡®å®šäº†å®ƒæ‰€æ“ä½œçš„æ•°æ®çš„ç±»å‹</strong></p>
<h3 id="intel-x86-and-arm-data-types">Intel x86 and ARM Data Types</h3>
<h4 id="x86-data-types">X86 data types</h4>
<ul>
<li>
<p>8 bit Byte</p>
</li>
<li>
<p>16 bit word</p>
</li>
<li>
<p>32 bit double word</p>
</li>
<li>
<p>64 bit quad word</p>
</li>
<li>
<p>128 bit double quadword</p>
</li>
<li>
<p>Addressing is by 8 bit unit</p>
</li>
<li>
<p><strong>Words do not need to align at even-numbered address</strong></p>
</li>
<li>
<p><strong>Data accessed across 32 bit bus in units of double word read at addresses divisible by 4</strong></p>
</li>
<li>
<p><strong>Little endian</strong></p>
</li>
</ul>
<hr>
<ul>
<li>æ— ç¬¦å·æ•´æ•°4ç§æ ¼å¼ï¼Œåˆ†åˆ«æ˜¯8ä½ï¼Œ16ä½ï¼Œ32ä½å’Œ64ä½</li>
<li>æœ‰ç¬¦å·æ•°é‡‡ç”¨è¡¥ç å½¢å¼ï¼Œä¹Ÿæœ‰4ç§æ ¼å¼ï¼Œä½æ•°æ˜¯8ä½ï¼Œ16ä½ï¼Œ32ä½å’Œ64ä½</li>
<li>æµ®ç‚¹æ•°ï¼ŒåŒ…æ‹¬å•ç²¾åº¦æµ®ç‚¹æ•°ï¼Œ32ä½ï¼›åŒç²¾åº¦æµ®ç‚¹æ•°ï¼Œ64ä½ï¼Œä»¥åŠæ‰©å±•çš„åŒç²¾åº¦æµ®ç‚¹æ•°ï¼Œ80ä½</li>
<li>æµ®ç‚¹æ•°è¡¨ç¤ºç¬¦åˆIEEE 754æ ‡å‡†çš„è¦æ±‚</li>
</ul>
<h4 id="simd-data-types">SIMD data types</h4>
<ul>
<li>
<p>In the X86 architecture, <code>MMX</code>(Multi Media eXtension)related instructions are added to improve the processing efficiency of multimedia data</p>
</li>
<li>
<p><code>MMX</code> technology adds 57 instructions specially designed for video signal, audio signal and graphic manipulation to the CPU</p>
</li>
<li>
<p>Therefore, <code>MMX</code> CPU greatly improves the computerâ€™s multimedia (such as stereo, video, 3D animation, etc.) processing function</p>
</li>
<li>
<p>In <code>MMX</code> instructions, one instruction can process multiple data at the same time, which is called <strong>single instruction multiple data(<code>SIMD</code>)</strong></p>
</li>
<li>
<p><strong>Basic idea of <code>SIMD</code> is to package multiple operands into one memory addressable data, that is, the data obtained by one addressing is the result of multiple data packages</strong></p>
<ul>
<li><strong>one instruction can obtain multiple operands and process them at the same time</strong></li>
</ul>
</li>
<li>
<p>Five packaging methods for compressed data</p>
<ul>
<li>
<p>Packed byte and packed byte integer</p>
</li>
<li>
<p>Packed word and packed word integer</p>
</li>
<li>
<p>Packed doubleword and packed doubleword integer</p>
</li>
<li>
<p>Packed quadword and packed quadword integer</p>
</li>
<li>
<p>Packed single-precision floating-point and packed double-precision floatingpoint</p>
</li>
</ul>
</li>
<li>
<p>Packed byte and packed byte integer</p>
<ul>
<li>
<p>Bytes packed into 64-bit quadword</p>
</li>
<li>
<p>or 128-bit double quadword</p>
</li>
</ul>
</li>
<li>
<p>Packed word and packed word integer</p>
<ul>
<li>
<p>16-bit words packed into 64-bit quadword</p>
</li>
<li>
<p>or 128-bit double quadword</p>
</li>
</ul>
</li>
<li>
<p>Packed doubleword and packed doubleword integer</p>
<ul>
<li>
<p>32-bit doublewords packed into 64-bit quadword</p>
</li>
<li>
<p>or 128-bit double quadword</p>
</li>
</ul>
</li>
<li>
<p>Packed quadword and packed quadword integer</p>
<ul>
<li>Two 64-bit quadwords packed into 128-bit double quadword</li>
</ul>
</li>
<li>
<p>Packed single-precision floating-point and packed double-precision floating-point</p>
<ul>
<li>Four 32-bit floating-point or two 64-bit floating-point values packed into a 128-bit double quadword</li>
</ul>
</li>
</ul>
<h4 id="arm-data-types">ARM data types</h4>
<ul>
<li>
<p><strong>8 (byte), 16 (halfword), 32 (word) bits</strong></p>
</li>
<li>
<p><strong>Halfword and word accesses should be word aligned</strong></p>
</li>
<li>
<p>Nonaligned access alternatives</p>
<ul>
<li>
<p>Default</p>
<ul>
<li>
<p>Treated as truncated</p>
</li>
<li>
<p><strong>Load single word instructions rotate right word aligned data transferred by non word-aligned address one, two or three bytes Alignment checking</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Data abort signal indicates alignment fault for attempting unaligned access</strong></p>
</li>
<li>
<p><strong>Unaligned access: Processor uses one or more memory accesses to generate transfer of adjacent bytes transparently to the programmer</strong></p>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p>Unsigned integer interpretation supported for all types</p>
</li>
<li>
<p>Twos-complement signed integer interpretation supported for all types</p>
</li>
<li>
<p><strong>Majority of implementations do not provide floating-point hardware</strong></p>
<ul>
<li>
<p><strong>Saves power and area</strong></p>
</li>
<li>
<p><strong>Floating-point arithmetic implemented in software</strong></p>
</li>
<li>
<p><strong>Optional floating-point coprocessor</strong></p>
</li>
<li>
<p><strong>Single- and double-precision IEEE 754 floating point data types</strong></p>
</li>
</ul>
</li>
</ul>
<h3 id="types-of-operations">Types of Operations</h3>
<ul>
<li>
<p>Arithmetic</p>
</li>
<li>
<p>Logical</p>
</li>
<li>
<p>Data Transfer</p>
</li>
<li>
<p>Conversion</p>
</li>
<li>
<p>I/O</p>
</li>
<li>
<p>System Control</p>
</li>
<li>
<p>Transfer of Control</p>
</li>
</ul>
<h4 id="data-transfer">Data transfer</h4>
<ul>
<li>
<p>Location of source and destination must be specified</p>
<ul>
<li>Memory</li>
<li>Register</li>
<li>Top of the stack</li>
</ul>
</li>
<li>
<p>For the memory access, addressing mode must be specified</p>
<ul>
<li>Memory has multiple addressing modes, such as direct addressing and indirect addressing</li>
</ul>
</li>
<li>
<p>The length of the operands must be specified</p>
</li>
<li>
<p>Data transmission instructions need to specify</p>
<ul>
<li>
<p><strong>Source address</strong></p>
</li>
<li>
<p><strong>Destination address</strong></p>
</li>
<li>
<p><strong>Amount of data</strong></p>
</li>
</ul>
</li>
<li>
<p>Which data transfer instructions are included is one of the important issues to be considered in instruction set design</p>
</li>
<li>
<p>For example, whether the location of the operand is determined by the opcode or by the operand needs to be designed</p>
</li>
</ul>
<hr>
<ul>
<li>
<p>IBM 390</p>
<ul>
<li>
<p>Use different instructions for different movements</p>
</li>
<li>
<p>Operation code determines the direction of data movement</p>
</li>
</ul>
</li>
<li>
<p>VAX</p>
<ul>
<li>
<p>Data transmission between different data sources with the same</p>
</li>
<li>
<p>The position of each operand must be specified separately in the instruction</p>
</li>
</ul>
</li>
</ul>
<h4 id="common-data-transfer-instructions">Common Data Transfer Instructions</h4>
<ul>
<li>
<p>å¸¸è§çš„æ•°æ®ä¼ é€æŒ‡ä»¤åŒ…æ‹¬ï¼šç§»åŠ¨ã€å­˜å‚¨ã€åŠ è½½ã€äº¤æ¢ã€æ¸…é™¤ã€è®¾ç½®ã€è¿›æ ˆã€å‡ºæ ˆç­‰</p>
</li>
<li>
<p>æ•°æ®ä¼ é€å¯¹äºå¤„ç†å™¨æ¥è¯´æ˜¯æœ€åŸºæœ¬ã€æœ€ç®€å•çš„æ“ä½œï¼Œå®ç°äº†æ•°æ®ä»ä¸€ä¸ªä½ç½®åˆ°å¦ä¸€ä¸ªä½ç½®çš„ç§»åŠ¨</p>
</li>
<li>
<p>æ•°æ®ä¼ é€æŒ‡ä»¤å°†æ•°æ®ä»ä¸€ä¸ªä½ç½®ç§»åŠ¨åˆ°å¦ä¸€ä¸ªä½ç½®</p>
</li>
<li>
<p><strong>å¦‚æœæ•°æ®ä¼ é€æ¶‰åŠåˆ°å†…å­˜çš„è¯ï¼Œè¿˜æœ‰ä¸€ç‚¹å¤æ‚:</strong></p>
<ul>
<li>
<p><strong>éœ€è¦æ ¹æ®å¯»å€æ–¹å¼æ¥è®¡ç®—å­˜å‚¨å™¨çš„åœ°å€</strong></p>
</li>
<li>
<p><strong>å¦‚æœç»™çš„æ˜¯è™šæ‹Ÿåœ°å€çš„è¯ï¼Œè¿˜éœ€è¦è¿›è¡Œè™šæ‹Ÿåœ°å€åˆ°å®é™…åœ°å€çš„è½¬æ¢</strong></p>
</li>
<li>
<p><strong>æ‰€ä»¥å¾—åˆ°å®å­˜åœ°å€åï¼Œéœ€è¦æ£€æŸ¥æ•°æ®æ˜¯å¦åœ¨cacheä¸­ã€‚å¦‚æœåœ¨cacheä¸­ï¼Œå°±å¯¹cacheè¿›è¡Œè¯»å–æ“ä½œï¼›å¦‚æœæ²¡æœ‰å‘½ä¸­ï¼Œéœ€è¦è¿›è¡Œå­˜å‚¨å™¨çš„è¯»æˆ–è€…å†™æ“ä½œ</strong></p>
</li>
</ul>
</li>
</ul>
<h4 id="arithmetic">Arithmetic</h4>
<ul>
<li>
<p>Single operand instruction</p>
<ul>
<li>absolute, negate, increment, decrement</li>
</ul>
</li>
<li>
<p>Two operands instruction</p>
<ul>
<li>Add, subtract, multiply, divide</li>
</ul>
</li>
<li>
<p>The operands are</p>
<ul>
<li>
<p>Signed integer (fixed point) numbers</p>
</li>
<li>
<p>Floating-point numbers</p>
</li>
<li>
<p><strong>Packed decimal numbers</strong></p>
</li>
</ul>
</li>
<li>
<p>Mainly completed by CPU</p>
</li>
<li>
<p>ç®—æœ¯è¿ç®—çš„æ“ä½œå¯èƒ½ä¼šåŒ…æ‹¬æ•°æ®ä¼ è¾“ä¼ é€æ“ä½œã€‚æ•°æ®ä¼ é€æ“ä½œçš„ç›®çš„æ˜¯åœ¨è¿ç®—å‰ç»™ALUæä¾›æ“ä½œçš„æ•°æ®ï¼Œæˆ–è€…åœ¨è¿ç®—åå°†ç»“æœè¾“å‡º</p>
</li>
<li>
<p>ç®—æœ¯æ“ä½œçš„å®é™…æ‰§è¡Œæ˜¯åœ¨ALUä¸­</p>
</li>
<li>
<p>è®¡ç®—å®Œæˆä¹‹åï¼Œè¿˜ä¼šè®¾ç½®çŠ¶æ€ç æˆ–æ ‡å¿—ä½ï¼Œç”¨ä»¥è¡¨ç¤ºè®¡ç®—çš„ç»“æœï¼Œæ¯”å¦‚æ˜¯å¦æº¢å‡ºï¼Œæ˜¯å¦å‡ºé”™ç­‰</p>
</li>
</ul>
<h4 id="logical">Logical</h4>
<ul>
<li>
<p>Most processors can operate on a single bit of a word or addressable unit</p>
<ul>
<li>
<p><strong>Called <code>bit twiddling</code></strong></p>
</li>
<li>
<p>It&rsquo;s actually a bit wise Boolean operation</p>
</li>
</ul>
</li>
<li>
<p>Basic logic operation</p>
<ul>
<li><strong>AND, OR, NOT, Exclusive-OR</strong></li>
</ul>
</li>
<li>
<p>Extended logical operations</p>
<ul>
<li><strong>Testï¼Œcompareï¼Œset control variablesï¼Œshiftï¼Œrotate</strong></li>
</ul>
</li>
<li>
<p>æµ‹è¯•testï¼šæµ‹è¯•æŒ‡ä»¤ï¼Œè¿›è¡Œç‰¹å®šæ¡ä»¶çš„æµ‹è¯•å¹¶è®¾ç½®æ ‡å¿—ä½</p>
</li>
<li>
<p>æ¯”è¾ƒcompareï¼šæ¯”è¾ƒæŒ‡ä»¤ï¼Œå¯¹ä¸¤ä¸ªæˆ–å¤šä¸ªæ“ä½œæ•°è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶è®¾ç½®æ ‡å¿—ä½</p>
</li>
<li>
<p>è®¾ç½®æ§åˆ¶å˜é‡set control variablesï¼šä¸€ç»„ç”¨äºè®¾ç½®æ§åˆ¶ä½çš„æŒ‡ä»¤ï¼Œä»¥è¿›è¡Œä¿æŠ¤ï¼Œä¸­æ–­å¤„ç†ï¼Œå®šæ—¶æ§åˆ¶çš„ç”¨é€”</p>
</li>
<li>
<p>ç§»ä½shiftï¼šå·¦ç§»æˆ–å³ç§»æ•°æ®</p>
</li>
<li>
<p>å¾ªç¯rotateï¼šå¾ªç¯ç§»ä½</p>
</li>
</ul>
<h4 id="shift-operations--">Shift operations! ! !</h4>
<ul>
<li>
<p><strong>Logical shift: without considering the highest sign bit</strong></p>
<ul>
<li>
<p><strong>Logical right: Move the operand to the right by n bits, and fill in 0 at the left position</strong></p>
</li>
<li>
<p><strong>Logical left: Move the operand to the left by n, and fill in 0 for the n bits vacated on the right</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Arithmetic shift: consider the highest sign bit</strong></p>
<ul>
<li>
<p><strong>Arithmetic right: Shift n bits to the right as a whole, and fill the empty n bits on the left with the highest sign bit</strong></p>
</li>
<li>
<p><strong>Arithmetic left: Retain the sign bit of the highest bit, and then shift the other bits by n bits to the left</strong></p>
</li>
</ul>
</li>
<li>
<p>10100110ï¼šç§»åŠ¨3ä½</p>
<ul>
<li>
<p>é€»è¾‘å³ç§»ï¼š00010100ï¼Œé€»è¾‘å·¦ç§»ï¼š00110000</p>
</li>
<li>
<p>ç®—æœ¯å³ç§»ï¼š11110100ï¼Œç®—æœ¯å·¦ç§»ï¼š10110000</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Rotate/Cyclic shift</strong></p>
<ul>
<li>
<p>Rotate right: Each number moves one digit to the right, and the rightmost digit moves to the leftmost digit</p>
</li>
<li>
<p>Rotate left: Each number moves one digit to the left, and the leftmost digit moves to the rightmost digit</p>
</li>
<li>
<p><strong>One possible use of the loop is to move left circularly, place each bit at the highest bit in turn, and then test the sign bit to determine the value of each bit</strong></p>
</li>
<li>
<p>10100110ï¼šç§»åŠ¨3ä½</p>
<ul>
<li>
<p>å¾ªç¯å³ç§»ï¼š11010110</p>
</li>
<li>
<p>å¾ªç¯å·¦ç§»ï¼š00110101</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Role of shift</strong></p>
<ul>
<li>
<p>Right shift</p>
<ul>
<li>
<p><strong>Logical right shift: which is equivalent to dividing an unsigned integer by 2</strong></p>
</li>
<li>
<p><strong>Arithmetic right shift: for complement representation, it is equivalent to dividing by 2</strong></p>
</li>
</ul>
</li>
<li>
<p>Left shift: overflow needs to be considered</p>
<ul>
<li>
<p><strong>When there is no overflow, it is equivalent to multiplying by 2</strong></p>
</li>
<li>
<p><strong>When there is overflow, it has different effects on logical shift left and arithmetic shift left</strong></p>
</li>
</ul>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter10-3.png" title="/img/Computer Organization and Architecture/chapter10-3.png" data-thumbnail="/img/Computer Organization and Architecture/chapter10-3.png">
        
    </a>
<h4 id="conversion">Conversion</h4>
<ul>
<li>
<p>è½¬æ¢æŒ‡ä»¤ä¸»è¦ç›®çš„æ˜¯æ”¹å˜æ•°æ®æ ¼å¼ï¼Œæˆ–è€…å¯¹æ•°æ®æ ¼å¼è¿›è¡Œæ“ä½œ</p>
</li>
<li>
<p>æ¯”å¦‚è¯´ï¼Œå¯¹äºŒçº§åˆ¶çš„æ•°æ®æ ¼å¼è¿›è¡Œè½¬æ¢ï¼Œè½¬æ¢æˆåè¿›åˆ¶ï¼Œæˆ–è€…ä»å‹ç¼©çš„10è¿›åˆ¶è½¬æ¢ä¸ºäºŒè¿›åˆ¶</p>
</li>
<li>
<p>è¿˜æœ‰ä¸€ç§æ˜¯ç¿»è¯‘ï¼Œæ ¹æ®ä¸€ä¸ªè¡¨çš„ç›¸åº”ä½çš„å€¼ï¼Œå°†å†…å­˜å—ä¸­çš„ä¸€äº›æ•°æ®ç¿»è¯‘æˆå¦ä¸€äº›æ•°</p>
</li>
</ul>
<h4 id="inputoutput">Input/output</h4>
<ul>
<li>
<p>May be specific instructions</p>
</li>
<li>
<p><strong>May be done using data movement instructions (memory mapped)</strong></p>
</li>
<li>
<p><strong>May be done by a separate controller (<code>DMA</code>)</strong></p>
</li>
</ul>
<h4 id="system-control">System control</h4>
<ul>
<li>
<p>Privileged instructions</p>
</li>
<li>
<p>CPU needs to be in specific state</p>
<ul>
<li>Kernel mode</li>
</ul>
</li>
<li>
<p>For operating systems use</p>
</li>
<li>
<p>Some control instructions</p>
<ul>
<li>
<p><strong>Read or write a control register</strong></p>
</li>
<li>
<p><strong>Read or write a storage protection key</strong></p>
</li>
<li>
<p><strong>Access to process control blocks in a multiprogramming system</strong></p>
</li>
</ul>
</li>
</ul>
<h4 id="transfer-of-control">Transfer of control</h4>
<ul>
<li>
<p><strong>The first scenario is that we need to repeat some instructions</strong></p>
<ul>
<li>
<p><strong>Multiplication of vector or matrix is easy to implement if circular statements are used</strong></p>
</li>
<li>
<p><strong>Need use the transfer instruction, starting from the end of the loop body</strong></p>
</li>
<li>
<p>It is almost impossible without a transfer instruction</p>
</li>
</ul>
</li>
<li>
<p><strong>The second scenario is that when we write a program, we often need to judge which operation to do next according to a calculation result</strong></p>
<ul>
<li>
<p>When calculating division, you can first verify whether the divisor is 0. If it is 0, you can directly report an error</p>
</li>
<li>
<p><strong>Transfer instructions are required, and the instructions to be executed in the next step are determined according to the judgment results</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>The third scenario is that when we write programs, we often use procedures or functions</strong></p>
<ul>
<li>
<p>Break a large program into several small parts, and then process them separately</p>
</li>
<li>
<p>Procedures or functions can be called multiple times</p>
</li>
<li>
<p>Transfer instructions must be used when calling procedures or functions</p>
</li>
</ul>
</li>
</ul>
<h5 id="role-of-control-transfer">Role of control transfer</h5>
<ul>
<li>
<p><strong>Normal execution of instructions</strong></p>
<ul>
<li>
<p><strong>PC(program counter)stores the address of the next instruction to be executed</strong></p>
</li>
<li>
<p><strong>After the instruction retrieval is completed, PC automatically adds 1 to point to the next instruction address</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Control transfer instructions</strong></p>
<ul>
<li>
<p><strong>Determine the next instruction to be executed according to the execution result of the current instruction</strong></p>
</li>
<li>
<p><strong>Change the original instruction execution order</strong></p>
</li>
</ul>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter10-4.png" title="/img/Computer Organization and Architecture/chapter10-4.png" data-thumbnail="/img/Computer Organization and Architecture/chapter10-4.png" data-sub-html="<h2>Types of control transfer</h2>">
        
    </a><figcaption class="image-caption"><code>Types of control transfer</code></figcaption>
    </figure>
<h5 id="some-control-transfer-instruction">Some control transfer instruction</h5>
<ul>
<li>
<p>Branch</p>
<ul>
<li>
<p><strong>Also called jump</strong></p>
</li>
<li>
<p><strong>Take the address of next instruction to be executed as an operand of current instruction</strong></p>
</li>
<li>
<p>For conditional branch instructions, the branch is made only if a certain condition is met</p>
<ul>
<li>Otherwise, executes next instruction in sequence</li>
</ul>
</li>
<li>
<p>Usually the condition is taken as a result of an operation (arithmetic or logic)</p>
</li>
</ul>
</li>
<li>
<p>Skip</p>
<ul>
<li>
<p><strong>Skip execution of the next instruction</strong></p>
</li>
<li>
<p>It is not necessary to specify the address of the next instruction in the instruction</p>
</li>
<li>
<p>The skip instruction includes an implied address</p>
</li>
<li>
<p><strong>The skip implies that one instruction be skipped</strong></p>
<ul>
<li>The implied address equals the address of next instruction plus one instruction-length</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Subroutine call</p>
<ul>
<li>
<p><strong>Call the procedure code to execute the procedure</strong></p>
</li>
<li>
<p><strong>After execution, return to the point where the call occurred and continue to execute next instruction</strong></p>
</li>
<li>
<p><strong>A procedure is a subroutine, that is, a computer program, which can perform certain functions</strong></p>
</li>
<li>
<p>Write the general function as a procedure, which can be called many times in the program</p>
<ul>
<li>
<p>Save the workload of programming</p>
</li>
<li>
<p><strong>Memory space occupied by programs is also reduced</strong></p>
</li>
</ul>
</li>
<li>
<p>Through procedure writing, modular programming is carried out to improve the efficiency of programming</p>
</li>
</ul>
</li>
</ul>
<h4 id="procedure-call-instruction">Procedure call instruction</h4>
<ul>
<li>
<p>It is invoked by a calling instruction and returned by a return instruction</p>
<ul>
<li>
<p><strong>Procedure call can be nested</strong></p>
</li>
<li>
<p><strong>Each procedure call is matched by a return in the called program</strong></p>
</li>
</ul>
</li>
<li>
<p>The CPU must save the return addressï¼Œit also need to pass parameters to the procedure in one of the following ways</p>
<ul>
<li>
<p><strong>Register</strong></p>
</li>
<li>
<p><strong>Start of called procedure</strong></p>
</li>
<li>
<p><strong>Top of stack</strong></p>
</li>
</ul>
</li>
</ul>
<h5 id="nested-procedure-calls">Nested procedure calls</h5>
<ul>
<li>
<p>ä¸»ç¨‹åºä¸­è°ƒç”¨è¿‡ç¨‹1</p>
</li>
<li>
<p>è¿‡ç¨‹1ä¸­æœ‰2ä¸ªè°ƒç”¨è¿‡ç¨‹2çš„æ­¥éª¤</p>
</li>
<li>
<p>æ¯æ¬¡è°ƒç”¨å®Œå¿…é¡»æœ‰è¿”å›çš„æŒ‡ä»¤ï¼Œè¿”å›åˆ°è°ƒç”¨çš„åœ°æ–¹</p>
</li>
<li>
<p><strong>è¿”å›åœ°å€çš„ä¿å­˜å’Œä½¿ç”¨æ–¹å¼ï¼Œä¸€èˆ¬é‡‡ç”¨æ ˆæ¥å®Œæˆ</strong></p>
</li>
</ul>
<h5 id="use-of-stacks">Use of stacks</h5>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter10-5.png" title="/img/Computer Organization and Architecture/chapter10-5.png" data-thumbnail="/img/Computer Organization and Architecture/chapter10-5.png" data-sub-html="<h2>stack</h2>">
        
    </a><figcaption class="image-caption"><code>stack</code></figcaption>
    </figure>
<ul>
<li>
<p><strong>åˆå§‹åŒ–æ—¶ï¼Œæ ˆæ˜¯ç©ºæ ˆ</strong></p>
</li>
<li>
<p><strong>è°ƒç”¨è¿‡ç¨‹1æ—¶ï¼Œéœ€è¦æŠŠè¿”å›åœ°å€ï¼Œä¹Ÿå°±æ˜¯4101å‹æ ˆ</strong></p>
</li>
<li>
<p><strong>è¿‡ç¨‹1ä¸­è°ƒç”¨è¿‡ç¨‹2æ—¶ï¼Œéœ€è¦æŠŠè¿”å›åœ°å€4601å‹æ ˆ</strong></p>
</li>
<li>
<p><strong>ç¬¬ä¸€ä¸ªè¿‡ç¨‹2æ‰§è¡Œå®Œæˆï¼ŒæŠŠ4601å¼¹å‡ºï¼Œè¿™æ ·å°±è¿”å›åˆ°è¿‡ç¨‹è°ƒç”¨å‰çš„çŠ¶æ€</strong></p>
</li>
<li>
<p><strong>ç¬¬äºŒæ¬¡è°ƒç”¨è¿‡ç¨‹2ï¼ŒåŒæ ·æŠŠè¿”å›åœ°å€å‹æ ˆ</strong></p>
</li>
<li>
<p><strong>è¿‡ç¨‹æ‰§è¡Œç»“æŸï¼Œå¼¹å‡º4651ã€‚è¿‡ç¨‹1æ‰§è¡Œç»“æŸï¼Œå¼¹å‡º4101ï¼Œç»§ç»­æ‰§è¡Œä¸»ç¨‹åº</strong></p>
</li>
</ul>
<h5 id="passing-parameters">Passing parameters</h5>
<ul>
<li>
<p>Pass parameters is important to the procedure cal</p>
</li>
<li>
<p>Using registers</p>
<ul>
<li>Must assure that the registers are used properly</li>
</ul>
</li>
<li>
<p>Using memory cells</p>
<ul>
<li>It is difficult to exchange the variables</li>
</ul>
</li>
<li>
<p><strong>Using stack</strong></p>
<ul>
<li>
<p>more flexible</p>
</li>
<li>
<p>When a procedure is called</p>
<ul>
<li>
<p>Stack the return address</p>
</li>
<li>
<p>Stack parameters to be passed to the called procedure</p>
</li>
</ul>
</li>
<li>
<p>When return</p>
<ul>
<li>Return parameters can also be placed on the stack</li>
</ul>
</li>
<li>
<p><strong>All above stacked info for the procedure is called a stack frame(OS)</strong></p>
</li>
</ul>
</li>
</ul>
<hr>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter10-6.png" title="/img/Computer Organization and Architecture/chapter10-6.png" data-thumbnail="/img/Computer Organization and Architecture/chapter10-6.png">
        
    </a>
<ul>
<li>
<p>ä¸»ç¨‹åºè°ƒç”¨Pçš„æ—¶å€™ï¼Œå…ˆæŠŠè¿”å›åœ°å€å‹æ ˆï¼Œç„¶åå°†ä¹‹å‰çš„å¸§æŒ‡é’ˆåœ°å€ä¿å­˜ï¼Œä¹‹åå†å°†x1å’Œx2è¿™ä¸¤ä¸ªå‚æ•°å‹åˆ°æ ˆé‡Œé¢</p>
</li>
<li>
<p>Pè°ƒç”¨Qçš„æ—¶å€™ï¼Œå…ˆæŠŠè¿”å›åœ°å€å‹æ ˆï¼Œç„¶åå°†è€çš„å¸§åœ°å€ä¿å­˜ï¼Œå†å°†Pè¦ä¼ ç»™Qçš„y1å’Œy2åœ°å€å‹æ ˆ</p>
</li>
<li>
<p>é€šè¿‡æ ˆï¼Œå®Œæˆäº†å‚æ•°ã€è¿”å›åœ°å€çš„ä¼ é€’</p>
</li>
</ul>
<h4 id="stack">Stack</h4>
<ul>
<li>
<p>Queues work in two basic ways</p>
<ul>
<li><code>FIFO</code>: first in first out</li>
<li><code>LIFO</code>: last in first out</li>
</ul>
</li>
<li>
<p><strong>Stack is a <code>LIFO</code></strong></p>
</li>
<li>
<p>A stack is an ordered set of elements, only one of which can be accessed at a time</p>
</li>
<li>
<p>The point of access is called the top of the stack</p>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter10-7.png" title="/img/Computer Organization and Architecture/chapter10-7.png" data-thumbnail="/img/Computer Organization and Architecture/chapter10-7.png" data-sub-html="<h2>stack operation</h2>">
        
    </a><figcaption class="image-caption"><code>stack operation</code></figcaption>
    </figure>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter10-8.png" title="/img/Computer Organization and Architecture/chapter10-8.png" data-thumbnail="/img/Computer Organization and Architecture/chapter10-8.png" data-sub-html="<h2>Typical stack organization</h2>">
        
    </a><figcaption class="image-caption"><code>Typical stack organization</code></figcaption>
    </figure>
<h3 id="endian-support">Endian Support</h3>
<ul>
<li>Example of Endian
<ul>
<li>Suppose we want to store a 32-bit hex value 12345678 to address 184</li>
</ul>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter10-9.png" title="/img/Computer Organization and Architecture/chapter10-9.png" data-thumbnail="/img/Computer Organization and Architecture/chapter10-9.png">
        
    </a>
<h4 id="endian">Endian</h4>
<ul>
<li>
<p>Big endian</p>
<ul>
<li>
<p>The most significant byte in the lowest numerical byte address</p>
</li>
<li>
<p>Equivalent to the <strong>left-to-right order</strong> of writing</p>
</li>
</ul>
</li>
<li>
<p>Little endian</p>
<ul>
<li>
<p>The least significant byte in the lowest numerical byte address</p>
</li>
<li>
<p>Reminiscent of the <strong>right-to-left order</strong> of arithmetic operations in arithmetic units</p>
</li>
</ul>
</li>
<li>
<p>Machines from different manufacturers may adopt different endian</p>
</li>
</ul>
<h4 id="standard">Standard</h4>
<ul>
<li>
<p>Pentium (x86), VAX, Alpha are little-endian</p>
</li>
<li>
<p>BM 370, Motorola 680x0 (Mac), and most RISC are big-endian</p>
</li>
<li>
<p><strong>Internet is big-endian</strong></p>
<ul>
<li>
<p><strong>Makes writing Internet programs on PC more awkward!</strong></p>
</li>
<li>
<p><strong>WinSock provides HtoI and ItoH (Host to Internet &amp; Internet to Host) functions to convert</strong></p>
</li>
</ul>
</li>
</ul>
<p><strong>ARM endian support</strong></p>
<ul>
<li>
<p>ARM supports two endian</p>
</li>
<li>
<p>E-bit in system control register</p>
</li>
<li>
<p><strong>E-bit=0 is the big endian; if E-bit=1, it is the little endian E-bit=0</strong></p>
</li>
</ul>
]]></description>
</item>
<item>
    <title>Computer Organization and Architecture Computer Aritmetic</title>
    <link>https://Jungle430.github.io/posts/computer-organization-and-architecture/computer-organization-and-architecture-computer-aritmetic/</link>
    <pubDate>Tue, 24 Jan 2023 15:49:52 &#43;0800</pubDate><author>1239946358@qq.com (Jungle)</author><guid>https://Jungle430.github.io/posts/computer-organization-and-architecture/computer-organization-and-architecture-computer-aritmetic/</guid>
    <description><![CDATA[<h1 id="computer-organization-and-architecture">Computer Organization and Architecture</h1>
<h2 id="computer-arithmetic">Computer Arithmetic</h2>
<h3 id="outline">Outline</h3>
<ul>
<li>The Arithmetic and Logic Unit (ALU)</li>
<li>Integer Representation</li>
<li>Integer Arithmetic</li>
<li>Floating-Point Representation</li>
<li>Floating-Point Arithmetic</li>
</ul>
<h3 id="the-arithmetic-and-logic-unit-alu">The Arithmetic and Logic Unit (ALU)</h3>
<p><strong>Arithmetic &amp; logic unit</strong></p>
<ul>
<li>
<p><strong>Core of computer</strong></p>
</li>
<li>
<p><strong>Everything else in the computer is there to service this unit</strong></p>
</li>
<li>
<p>Does arithmetic and logic calculations</p>
</li>
<li>
<p>Handles integers</p>
<ul>
<li>
<p>May handle floating point (real) numbers</p>
</li>
<li>
<p>May be separate <code>FPU</code> ( maths co-processor)</p>
</li>
<li>
<p>May be on chip separate <code>FPU</code> ( <code>486DX + </code>)</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>ALU input &amp; output</strong></p>
<ul>
<li>
<p>ä¸€èˆ¬CPUå†…éƒ¨ä¼šæœ‰ä¸€ç»„å¯„å­˜å™¨ï¼Œç”¨äºç”¨äºä¸´æ—¶å­˜æ”¾æ•°æ®</p>
</li>
<li>
<p>æ§åˆ¶å•å…ƒå‘Šè¯‰ALUéœ€è¦åšä»€ä¹ˆæ“ä½œï¼ŒåŒæ—¶è¿˜æ§åˆ¶æ•°æ®çš„è¾“å…¥å’Œè¾“å‡º</p>
</li>
<li>
<p>æ•°æ®ç”±å¯„å­˜å™¨é€ç»™ALUè¿›è¡Œè¿ç®—ï¼Œè¿ç®—ä¹‹åçš„ç»“æœä¹Ÿä¿å­˜åœ¨å¯„å­˜å™¨ä¸­</p>
</li>
<li>
<p>ALUåœ¨è®¡ç®—åï¼Œä¼šè®¾ç½®ä¸€äº›æ ‡å¿—ï¼Œæ¯”å¦‚æº¢å‡ºæ ‡å¿—ç­‰ï¼Œæ ‡å¿—ä¹Ÿä¿å­˜åœ¨å¯„å­˜å™¨ä¸­</p>
</li>
</ul>
<h3 id="integer-representation">Integer Representation</h3>
<ul>
<li>
<p>Electronic components generally have only two basic states</p>
<ul>
<li>
<p>Whether there is charge, high and low level</p>
</li>
<li>
<p>Represents 0 and 1</p>
</li>
</ul>
</li>
<li>
<p>Computer use 0 &amp; 1 to represent everything</p>
<ul>
<li>
<p>Positive numbers stored in binary</p>
</li>
<li>
<p>e.g. 41=00101001</p>
</li>
<li>
<p>No minus sign</p>
</li>
<li>
<p>No period</p>
</li>
</ul>
</li>
<li>
<p><strong>How to represent negative numbers</strong></p>
<ul>
<li>
<p><strong>Sign-Magnitude</strong></p>
</li>
<li>
<p><strong>Twoâ€™s complement</strong></p>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p>unsigned</p>
<ul>
<li>
<p>Use only non-negative integers</p>
</li>
<li>
<p><strong>sign bit does not need</strong></p>
</li>
</ul>
</li>
<li>
<p>sign magnitude</p>
<ul>
<li>Sign +magnitude</li>
</ul>
</li>
<li>
<p>oneâ€™s complement</p>
<ul>
<li>represent the value by use inverse value of Sign +magnitude</li>
</ul>
</li>
<li>
<p>twoâ€™s complement</p>
<ul>
<li>Use twoâ€™s complement to express integer</li>
</ul>
</li>
<li>
<p><strong>biased</strong></p>
</li>
</ul>
<hr>
<h4 id="sign-magnitude">Sign-magnitude</h4>
<ul>
<li>
<p><strong>Left most bit is sign bit</strong></p>
</li>
<li>
<p><strong>0 means positive</strong></p>
</li>
<li>
<p><strong>1 means negative</strong></p>
</li>
</ul>
<p>$$
+18=00010010\newline
-18=10010010\newline
$$</p>
<hr>
<p>$$
A=\begin{cases}
\sum_{i=0}^{n-2}2^ia_i\ if\ a_{n-1}=0\newline
-\sum_{i=0}^{n-2}2^ia_i\ if\ a_{n-1}=1\newline
\end{cases}
$$</p>
<p>$The\ number\ of\ bits\ is\ n\rightarrow Range: [-(2^{n-1}-1),2^{n-1}-1]\newline$</p>
<ul>
<li>
<p>Problems</p>
<ul>
<li>
<p>Need to consider <strong>both sign and magnitude</strong> in arithmetic</p>
</li>
<li>
<p><strong>Two representations of zero (+0 and -0)</strong></p>
<ul>
<li>1000000(-0)</li>
<li>0000000(+0)</li>
</ul>
</li>
<li>
<p><strong>Two methods are required to judge 0</strong></p>
</li>
</ul>
</li>
</ul>
<hr>
<h4 id="ones-complement---">Oneâ€™s complement ! ! !</h4>
<ul>
<li>
<p>Historically important, and we use this representation to get 2â€™s complement integers</p>
</li>
<li>
<p><strong>positive integers use the same representation as unsigned</strong></p>
</li>
<li>
<p><strong>Negation is done by taking a bitwise complement of the positive representation</strong></p>
</li>
</ul>
<p>$$
Example:-3:0011\rightarrow 1100\newline
&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;\newline
\begin{align}
&amp;11100000:a\ negative\ number\newline
&amp;To\ find\ out\ the\ value,invert\ each\ bit\ 00011111\ is\ +31\ by\ sight,\newline
&amp;so\ 11100000=-31
\end{align}
$$</p>
<ul>
<li><strong>The 1â€™s complement number system using N bits has a range from</strong> $-(2^{N-1}-1)\ to\ +(2^{N-1}-1)\newline$</li>
</ul>
<p>$$
\begin{align}
&amp;8-bit\ examples\newline
&amp;1111\ 1110\rightarrow 0000\ 0001\rightarrow -1\newline
&amp;1111\ 1111\rightarrow 0000\ 0000\rightarrow -0\newline
&amp;0000\ 0000\rightarrow +0\newline
&amp;0000\ 0001\rightarrow +1\newline
\end{align}
$$</p>
<ul>
<li>
<p><strong>The two forms of zero are represented by</strong></p>
</li>
<li>
<p>$0000\ 0000(all\ zeros)\newline$</p>
</li>
<li>
<p>$1111\ 1111(all\ ones)\newline$</p>
</li>
</ul>
<hr>
<h4 id="twos-complement---">Twoâ€™s complement ! ! !</h4>
<ul>
<li>
<p>Twoâ€™s complement is a variation on 1â€™s complement</p>
<ul>
<li><strong>Does NOT have 2 representations for 0</strong></li>
</ul>
</li>
<li>
<p>negative: (for example -5)</p>
<ul>
<li>
<p>Take the positive value 00101 (+5)</p>
</li>
<li>
<p>Take the 1â€˜s complement 11010 (-5 in 1â€™s comp)</p>
</li>
<li>
<p>Add 1: 11011</p>
</li>
</ul>
</li>
</ul>
<p>$$
A=-2^{n-1}a_{n-1}+\sum^{n-2}_{i=0}2^ia_i\newline
$$</p>
<p><strong>Benefits</strong></p>
<ul>
<li>
<p>One representation of zero</p>
</li>
<li>
<p>Arithmetic works easily</p>
</li>
<li>
<p>Negating is fairly easy</p>
</li>
<li>
<p>Example: -3</p>
</li>
</ul>
<p>$$
(3)_{10}=(00000011)_2\newline
Boolean\ complement\ gives:11111100\newline
Add\ 1\ to\ LSB:11111101\newline
$$</p>
<p>$$
\begin{align}
&amp;One\ representation\ of\ zero\newline
&amp;0=00000000\newline
&amp;Bitwise\ not=11111111\newline
&amp;Add\ 1\ to\ LSB:+1\newline
&amp;Result:1\ 00000000\newline
&amp;Overflow\ is\ ignored\ so \rightarrow -0=0
\end{align}
$$</p>
<p><strong>Negation Special Case</strong>
$$
\begin{align}
&amp;-128=10000000\newline
&amp;-(-128)is:\newline
&amp;1. bitwise\ not:01111111\newline
&amp;2. Add\ 1\ to\ LSB:+1\newline
&amp;3. Result:10000000\newline
&amp;\rightarrow -(-128)=-128\newline
&amp;??? \rightarrow\ \times\ \newline
\end{align}
$$</p>
<p><strong>In two â€˜s complement notation, the range of positive and negative numbers is not completely symmetric</strong></p>
<p><strong>Range of numbers</strong></p>
<p>$The\ number\ of\ bits\ is\ n\rightarrow Range: [-2^{n-1},2^{n-1}-1]\newline$</p>
<h4 id="sign-extension">Sign extension</h4>
<ul>
<li>For <strong>sign magnitude number</strong>, simply move the sign bit to the new leftmost position and fill in with zeros</li>
</ul>
<p>$$
+18=00010010 \rightarrow extension : 00000000\ 00010010\newline
-18=10010010 \rightarrow extension : 10000000\ 00010010\newline
$$</p>
<ul>
<li>
<p>It is not going to work for twoâ€™s complement</p>
</li>
<li>
<p>The rule for <strong>twoâ€™s complement</strong> number is</p>
<ul>
<li>Positive number pack with leading zeros
$$
+18=00010010 \rightarrow extension :  00000000\ 00010010\newline
$$</li>
<li>Negative numbers pack with leading ones
$$
-18=10010010 \rightarrow extension : 11111111\ 10010010\newline
$$</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Characteristics of Twoâ€™s Complement</strong></p>
<table>
<thead>
<tr>
<th>ç‰¹ç‚¹</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>èŒƒå›´</td>
<td>$[-2^{n-1},2^{n-1}-1]$</td>
</tr>
<tr>
<td>0çš„è¡¨ç¤ºæ–¹æ³•</td>
<td>åªæœ‰1ä¸ª0çš„è¡¨ç¤ºæ³•</td>
</tr>
<tr>
<td>è®¡ç®—æ–¹æ³•</td>
<td>æŒ‰ä½å–ååï¼Œåœ¨æœ€åä¸€ä½åŠ 1ï¼Œå¯ä»¥å¾—åˆ°è¿™ä¸ªæ•°çš„ç›¸åæ•°çš„è¡¥ç </td>
</tr>
<tr>
<td>ä½çš„æ‰©å±•</td>
<td>ç”¨ç¬¦å·ä½è¿›è¡Œå¡«å……</td>
</tr>
<tr>
<td>æº¢å‡ºè§„åˆ™</td>
<td>å¦‚æœ2ä¸ªç›¸åŒç¬¦å·çš„æ•°ç›¸åŠ ï¼Œå¾—åˆ°çš„æ–°æ•°çš„ç¬¦å·ä½å’ŒåŸæ•°çš„ç¬¦å·ä½ä¸ä¸€æ ·ï¼Œå°±æ˜¯æº¢å‡º</td>
</tr>
<tr>
<td><strong>å‡æ³•è§„åˆ™</strong></td>
<td><strong>å–å‡æ•°çš„è¡¥ç ï¼Œç„¶åå’Œè¢«å‡æ•°ç›¸åŠ </strong></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="integer-arithmetic">Integer Arithmetic</h3>
<h4 id="addition-and-subtraction">Addition and Subtraction</h4>
<ul>
<li>
<p>Addition</p>
<ul>
<li>
<p>Normal binary addition</p>
</li>
<li>
<p>Monitor sign bit for overflow</p>
</li>
</ul>
</li>
<li>
<p><strong>Subtraction</strong></p>
<ul>
<li>
<p><strong>Take twos compliment of subtrahend and add to minuend</strong></p>
</li>
<li>
<p>$a-b=a+(-b)\newline$</p>
</li>
</ul>
</li>
<li>
<p><strong>So only need addition and complement circuits</strong></p>
</li>
<li>
<p>Straight forward approach consists of adding each bit together from right to left and propagating the carry from one bit to the</p>
</li>
</ul>
<p>$$
\begin{align}
Example:&amp;\newline
&amp;-7_{10}+5_{10}=1001_{2}+0101_{2}=1110_{2}=-2_{10}\newline
&amp;3_{10}+4_{10}=0011_{2}+0100_{2}=0111_{2}=7_{10}\newline
\end{align}
$$</p>
<hr>
<p><strong>Geometric Depiction of Twos Complement Integers</strong></p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter9-1.png" title="/img/Computer Organization and Architecture/chapter9-1.png" data-thumbnail="/img/Computer Organization and Architecture/chapter9-1.png">
        
    </a>
<ul>
<li>
<p>åœ†å‘¨ä¸Šåˆ—å‡ºäº†$4bit$çš„æ•°è¡¨ç¤ºçš„16ç§æƒ…å†µï¼Œä»0000åˆ°1111</p>
</li>
<li>
<p>ä¸­é—´æœ‰ä¸€ä¸ªå¯¹ç§°è½´ï¼Œä¸€ä¸ªæ•°çš„ç›¸åæ•°å°±æ˜¯å®ƒé’ˆå¯¹ä¸­é—´çš„å¯¹ç§°è½´çš„å¯¹ç§°ç‚¹</p>
</li>
<li>
<p>å¯ä»¥çœ‹åˆ°1000æ²¡æœ‰å¯¹ç§°ç‚¹ï¼Œæ‰€ä»¥åªæœ‰-8è€Œæ²¡æœ‰+8çš„è¡¨ç¤º</p>
</li>
<li>
<p>å¯¹äºåŠ æ³•ï¼Œå°±æ˜¯é¡ºæ—¶é’ˆç§»åŠ¨ï¼›è€Œå¯¹äºå‡æ³•ï¼Œå°±æ˜¯é€†æ—¶é’ˆç§»åŠ¨</p>
</li>
<li>
<p>æ— è®ºæ˜¯é¡ºæ—¶é’ˆç§»åŠ¨ï¼Œè¿˜æ˜¯é€†æ—¶é’ˆç§»åŠ¨ï¼Œå¦‚æœè¶Šè¿‡äº†æ­£è´Ÿçš„äº¤æ¥ç‚¹ï¼Œå°±è¡¨ç¤ºæœ‰æº¢å‡º</p>
</li>
</ul>
<hr>
<p><strong>Judgment of overflow</strong></p>
<ul>
<li>
<p>For different representations, the judgment methods of overflow are different</p>
</li>
<li>
<p>For example: 01111101+01111101 = 1 1111010</p>
<ul>
<li>
<p>For unsigned addition, no overflow</p>
</li>
<li>
<p>For signed addition, overflow</p>
</li>
</ul>
</li>
<li>
<p>Another example: 11111101+01111101 = ï¼ˆ1ï¼‰01111010</p>
<ul>
<li>
<p>For unsigned addition, overflow</p>
</li>
<li>
<p>For signed addition, no overflow</p>
</li>
</ul>
</li>
<li>
<p>Carry is not a flag to judge overflow</p>
</li>
</ul>
<hr>
<ul>
<li>
<p><strong>No overflow when adding a positive and a negative number</strong></p>
</li>
<li>
<p><strong>No overflow when signs are the same for subtraction</strong></p>
</li>
<li>
<p><strong>Judgment method for twoâ€™s complement addition</strong></p>
<ul>
<li>
<p><strong>When two numbers with the same sign are added, the sign bit of the result is opposite, which must be overflow</strong></p>
</li>
<li>
<p><strong>Subtraction is completed by addition, and the method to judge overflow is the same</strong></p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Hardware for Addition and Subtraction</strong></p>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter9-2.png" title="/img/Computer Organization and Architecture/chapter9-2.png" data-thumbnail="/img/Computer Organization and Architecture/chapter9-2.png" data-sub-html="<h2>Hardware</h2>">
        
    </a><figcaption class="image-caption"><code>Hardware</code></figcaption>
    </figure>
<ul>
<li>
<p>æ ¸å¿ƒæ˜¯ä¸€ä¸ªåŠ æ³•å™¨ã€‚å¯„å­˜å™¨Aå’ŒBæ˜¯åŠ æ³•å™¨çš„è¾“å…¥</p>
</li>
<li>
<p>è®¡ç®—çš„ç»“æœä¿å­˜åœ¨å¯„å­˜å™¨Aä¸­ï¼Œå¦‚æœæœ‰æº¢å‡ºï¼Œåˆ™æº¢å‡ºæ ‡å¿—ä¿å­˜åœ¨OFä¸­</p>
</li>
<li>
<p>SWå¼€å…³æ§åˆ¶æ˜¯åŠ æ³•è¿˜æ˜¯å‡æ³•ã€‚å¦‚æœæ˜¯åŠ æ³•ï¼ŒBå¯„å­˜å™¨çš„æ•°ç›´æ¥è¾“å…¥åˆ°åŠ æ³•å™¨ä¸­ï¼›å¦‚æœæ˜¯å‡æ³•ï¼Œåˆ™Bå¯„å­˜å™¨çš„æ•°æ®é€šè¿‡ä¸€ä¸ªè¡¥ç å™¨ç”Ÿæˆå®ƒçš„ç›¸åæ•°çš„è¡¥ç ï¼Œå†è¾“å…¥åˆ°åŠ æ³•å™¨ä¸­</p>
</li>
</ul>
<h4 id="multiplication">Multiplication</h4>
<ul>
<li>
<p>Much more complex than addition</p>
</li>
<li>
<p>Multiply each bit of the multiplier by the multiplicand to get the partial product</p>
</li>
<li>
<p>calculation of partial product should also take into account the position of the multiplying digit</p>
</li>
<li>
<p>Add all partial products to get the product</p>
</li>
<li>
<p>Itâ€™s similar to our manual multiplication</p>
</li>
<li>
<p>Involves the generation of partial products</p>
<ul>
<li>
<p>Equals 0 when the multiplier bit is 0</p>
</li>
<li>
<p>Equals the multiplicand when the multiplier is 1</p>
</li>
<li>
<p>Easier than decimal multiplication</p>
</li>
</ul>
</li>
<li>
<p>The total product is produced by summing the shifted partial products</p>
</li>
<li>
<p><strong>Two n binary number may result in a product of up to 2n bits in length</strong></p>
</li>
</ul>
<p>Example
$$
\begin{align}
&amp;1011\newline
\times&amp;1101\newline
&amp;\rule[-10pt]{5cm}{0.03em}\newline
&amp;1011\newline
0&amp;000\newline
10&amp;11\newline
101&amp;1\newline
&amp;\rule[-10pt]{5cm}{0.03em}\newline
&amp;10001111
\end{align}
$$
Note: ç»“æœéœ€è¦åŒå€çš„æ¯”ç‰¹ä½</p>
<h5 id="shift-operation--">Shift operation! ! !</h5>
<ul>
<li>
<p>A shift operation is involved in multiplication</p>
</li>
<li>
<p><strong>Any number multiplied by 2 n results the number shifted left by n bits</strong></p>
<ul>
<li>
<p>0000 0001 x 00000010 = 0000 0010</p>
</li>
<li>
<p>0000 0001 x 00000100 = 0000 0100</p>
</li>
<li>
<p>0000 0001 x 00001000 = 0000 1000</p>
</li>
</ul>
</li>
</ul>
<h5 id="unsigned-binary-multiplication">Unsigned binary multiplication</h5>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter9-3.png" title="/img/Computer Organization and Architecture/chapter9-3.png" data-thumbnail="/img/Computer Organization and Architecture/chapter9-3.png">
        
    </a>
<ul>
<li>
<p>æ ¸å¿ƒæ˜¯ä¸€ä¸ªnä½åŠ æ³•å™¨</p>
</li>
<li>
<p>å…ˆå–ä¹˜æ•°çš„æœ€ä½ä½$Q_0$ã€‚å¦‚æœæ˜¯1ï¼Œåˆ™å°†è¢«ä¹˜æ•°é€åˆ°åŠ æ³•å™¨ä¸­ã€‚å¦‚æœæ˜¯0ï¼Œåˆ™ä¸è¿›è¡ŒåŠ æ³•ã€‚</p>
</li>
<li>
<p>åŠ æ³•å™¨å°†Aå’ŒMç›¸åŠ ï¼Œç„¶åå‘å³ç§»ä½ã€‚æœ‰ä¸€ä¸ªç§»ä½çš„å¯„å­˜å™¨Cï¼Œç”¨äºä¿å­˜è¿›ä½</p>
</li>
<li>
<p><strong>ç§»ä½åï¼Œç»§ç»­è¿›è¡Œ</strong>$Q_1$<strong>çš„åˆ¤æ–­ï¼Œç„¶åç›¸åŠ ï¼Œç§»ä½ã€‚è¿™æ ·ç›´åˆ°æ‰€æœ‰çš„Qéƒ½è®¡ç®—å®Œæˆï¼Œè¿™æ ·å°±å¯ä»¥å¾—åˆ°æ— ç¬¦å·çš„ä¹˜æ³•ç»“æœ</strong></p>
</li>
</ul>
<p>Example</p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter9-4.png" title="/img/Computer Organization and Architecture/chapter9-4.png" data-thumbnail="/img/Computer Organization and Architecture/chapter9-4.png">
        
    </a>
<ul>
<li>
<p>åˆå§‹å€¼Cä¸º0ï¼ŒAå¯„å­˜å™¨ä¸º0ï¼Œä¹˜æ•°ä¸º1101ï¼Œè¢«ä¹˜æ•°ä½1011</p>
</li>
<li>
<p>å…ˆå–ä¹˜æ•°çš„æœ€ä½ä½$Q_0$ã€‚<strong>å¦‚æœæ˜¯1ï¼Œåˆ™å°†è¢«ä¹˜æ•°é€åˆ°åŠ æ³•å™¨ä¸­ã€‚å¦‚æœæ˜¯0ï¼Œåˆ™ä¸è¿›è¡ŒåŠ æ³•</strong></p>
</li>
<li>
<p>ç¬¬ä¸€æ­¥ï¼Œä¹˜æ•°æœ€åä¸€ä½æ˜¯1ï¼ŒAå’ŒMç›¸åŠ åï¼Œå¾—åˆ°Aä¸º1011ã€‚ç„¶åç§»ä½(<strong>Aæœ€ä½ä½ç§»å‘äº†Qçš„æœ€é«˜ä½ï¼Œå¤šå‡ºæ¥çš„é«˜ä½ç”¨0æ¥è¡¥é½</strong>)ï¼ŒAå’ŒQå¯„å­˜å™¨å°±å˜æˆäº†ï¼š0101 1110</p>
</li>
<li>
<p>ç¬¬äºŒæ­¥ï¼Œä¹˜æ•°æœ€åä¸€ä½æ˜¯0ï¼ŒAä¸å˜ï¼Œç„¶åç§»ä½ï¼ŒAå’ŒQå¯„å­˜å™¨å°±å˜æˆäº†ï¼š0010 1111</p>
</li>
<li>
<p>ç¬¬ä¸‰æ­¥ï¼Œä¹˜æ•°æœ€åä¸€ä½æ˜¯1ï¼Œå°†Aå’ŒMç›¸åŠ ï¼Œå¾—åˆ°1101ã€‚ç„¶åç§»ä½ï¼Œå¾—åˆ°Aå’ŒQå¯„å­˜å™¨å˜æˆäº†ï¼š0110 1111</p>
</li>
<li>
<p>ç¬¬å››æ­¥ï¼Œä¹˜æ•°æœ€åä¸€ä½æ˜¯1ï¼ŒAå’ŒMç›¸åŠ ï¼Œå¾—åˆ°10001ã€‚äº§ç”Ÿäº†ä¸€ä¸ªè¿›ä½ã€‚ç„¶åç§»ä½ï¼Œè¿›ä½ä¹Ÿå³ç§»åˆ°Açš„æœ€é«˜ä½ã€‚å¾—åˆ°Aå’ŒQå¯„å­˜å™¨å˜æˆäº†ï¼š1000 1111</p>
</li>
</ul>
<p><strong>Summary</strong></p>
<ul>
<li>
<p>ä¸‰ä¸ªå¯„å­˜å™¨Aã€Qå’ŒMã€‚å…¶ä¸­Aç”¨äºå­˜æ”¾ç»“æœçš„é«˜ä½ï¼Œåˆå§‹åŒ–ä¸º0ã€‚Qåˆå§‹åŒ–ä¸ºä¹˜æ•°ï¼ŒMåˆå§‹åŒ–ä¸ºè¢«ä¹˜æ•°ã€‚è¿˜æœ‰ä¸€ä¸ªè¿›ä½æ ‡å¿—Cã€‚nè¡¨ç¤ºè®¡ç®—æ¬¡æ•°</p>
</li>
<li>
<p>å…ˆæ£€æŸ¥$Q_0$ï¼Œå¦‚æœä¸º1ï¼Œå°†Aå’ŒMç›¸åŠ ï¼Œæ”¾åˆ°Cï¼ŒAã€‚ç„¶åå°†Cã€Aã€Qå³ç§»ä¸€ä½ã€‚åŒæ—¶n-1ï¼Œè¡¨ç¤ºå®Œæˆäº†1æ¬¡è®¡ç®—</p>
</li>
<li>
<p>å¦‚æœnä¸ä¸º0ï¼Œç»§ç»­è¿›è¡Œ$Q_0$çš„æ£€æµ‹å’Œè®¡ç®—ã€‚ç›´åˆ°nä¸º0</p>
</li>
<li>
<p><strong>ç»“æœä¿å­˜åœ¨Aå’ŒQä¸­ã€‚Aä¸ºé«˜ä½ï¼ŒQä¸ºä½ä½</strong></p>
</li>
</ul>
<h5 id="multiplying-negative-numbers--">Multiplying negative numbers! ! !</h5>
<ul>
<li>
<p>Solution 1</p>
<ul>
<li>
<p>Convert to positive if required</p>
</li>
<li>
<p>Multiply as above</p>
</li>
<li>
<p>If signs were different, negate answer</p>
</li>
<li>
<p>Convert to twoâ€™s complement</p>
</li>
<li>
<p>Itâ€™s the same way we do multiplication. Regardless of the sign bit, multiply, and then determine the sign of the result</p>
</li>
</ul>
</li>
<li>
<p><strong>Solution 2</strong></p>
<ul>
<li>
<p><strong>Boothâ€™s algorithm</strong></p>
</li>
<li>
<p><strong>Not only solves the problem, but also improves the efficiency</strong></p>
</li>
</ul>
</li>
</ul>
<h5 id="booths-algorithm--">Boothâ€™s algorithm! ! !</h5>
<ul>
<li>In particular, consider a positive multiplier consisting of one block of 1s surrounded by 0s</li>
</ul>
<p>Example
$$
\begin{align}
M \times (00011110)_2=&amp;M \times (2^4+2^3+2^2+2^1)\newline
=&amp;M \times (16+8+4+2)\newline
=&amp;M \times 30\newline
\end{align}
$$</p>
<p>$$
2^n+2^{N-1}+\dots+2^{n-K}=2^{n+1}-2^{n-K}
$$</p>
<p>$$
\begin{align}
M \times (00011110)_2&amp;=M \times (2^5-2^1)\newline
&amp;=M \times 30\newline
\end{align}
$$</p>
<ul>
<li>
<p><strong>For a binary number, we cannot require all its 1s to be connected together. What should we doï¼Ÿ</strong></p>
</li>
<li>
<p><strong>Use the idea of segmentation. Make the connected 1 into a block</strong></p>
</li>
<li>
<p><strong>If single 1 is surrounded by 0, a single 1 is also a block</strong></p>
</li>
</ul>
<p>$$
\begin{align}
M \times (01111010)_2&amp;=M \times (2^6 + 2^5 + 2^4 + 2^3 + 2^1)\newline
&amp;=M \times (2^7 - 2^3 + 2^2-2^1)\newline
\end{align}
$$</p>
<ul>
<li>
<p><strong>Boothâ€™s algorithm makes use of this rule. For continuous 1, it need not calculate, but only at the beginning and end</strong></p>
</li>
<li>
<p><strong>When 10 is encountered , subtraction is performed</strong></p>
</li>
<li>
<p><strong>When 01 is encountered , addition is performed</strong></p>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter9-5.png" title="/img/Computer Organization and Architecture/chapter9-5.png" data-thumbnail="/img/Computer Organization and Architecture/chapter9-5.png">
        
    </a>
<ul>
<li><strong>For continuous 1, it only needs to be calculated at the beginning and end to improve the calculation efficiency</strong></li>
</ul>
<p>$$
M \times (01111110)_2=M \times (2^7-2^0)\newline
$$</p>
<ul>
<li><strong>The worst case is that 0 and 1 alternate, so each time you need to calculate</strong></li>
</ul>
<p>$$
M \times (01010101)_2=M \times (2^7-2^6+2^5-2^4+2^3-2^2+2^1-2^0)\newline
$$</p>
<hr>
<p><strong>Diagram of Boothâ€™s algorithm</strong></p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter9-6.png" title="/img/Computer Organization and Architecture/chapter9-6.png" data-thumbnail="/img/Computer Organization and Architecture/chapter9-6.png">
        
    </a>
<ul>
<li>
<p>Aå¯„å­˜å™¨ä¿å­˜ç»“æœçš„é«˜ä½ï¼ŒQå¯„å­˜å™¨ä¿å­˜ä¹˜æ•°å’Œç»“æœçš„ä½ä½ï¼ŒMå¯„å­˜å™¨ä¿å­˜è¢«ä¹˜æ•°ã€‚$Q_{-1}$å¯„å­˜å™¨ä¿å­˜ä¸Šä¸€ä¸ªä¹˜æ•°æ•°å­—ã€‚åˆå§‹åŒ–æ—¶Aå’Œ$Q_{-1}$å‡ä¸º0</p>
</li>
<li>
<p>å¼€å§‹è®¡ç®—ï¼Œå¦‚æœ$Q_0$å’Œ$Q_{-1}$æ˜¯<strong>11æˆ–00</strong>ï¼ŒAå’ŒQä»¥åŠ$Q_{-1}$<strong>ä¸å¤„ç†</strong>ï¼Œç›´æ¥ç§»ä½</p>
</li>
<li>
<p>å¦‚æœ$Q_0$å’Œ$Q_{-1}$æ˜¯<strong>10ï¼Œå‡å»</strong>Mï¼Œç„¶åè¿›è¡Œç§»ä½</p>
</li>
<li>
<p>å¦‚æœ$Q_0$å’Œ$Q_{-1}$æ˜¯<strong>01</strong>ï¼Œ<strong>åŠ ä¸Š</strong>Mï¼Œç„¶åè¿›è¡Œç§»ä½</p>
</li>
<li>
<p>Aã€Qå’Œ$Q_{-1}$å³ç§»çš„æ—¶å€™ï¼ŒAçš„æœ€é«˜ä½å¾€ä¸‹ç§»ä½æ—¶,<strong>æœ€é«˜ä½ä¸æ˜¯è¡¥0ï¼Œè€Œæ˜¯å°†åŸæ¥çš„æœ€é«˜ä½ä¿ç•™ï¼Œä¹Ÿå°±æ˜¯ä¿ç•™ç¬¦å·ä½</strong></p>
</li>
<li>
<p>ç§»ä½ä¹‹åï¼Œç»§ç»­åˆ¤æ–­$Q_0$å’Œ$Q_{-1}$ï¼Œç›´åˆ°æ‰€æœ‰çš„ä½æ•°éƒ½å¤„ç†å®Œæ¯•</p>
</li>
</ul>
<hr>
<ul>
<li>
<p>Can the Boothâ€™s algorithm just discussed solve the multiplication problem of negative numbers?</p>
<ul>
<li>
<p>Yes</p>
</li>
<li>
<p>å…³é”®ç‚¹ï¼šç¬¦å·ä½ä¹Ÿè¿›è¡Œäº†ç§»ä½</p>
</li>
</ul>
</li>
</ul>
<h4 id="division">Division</h4>
<h5 id="division-of-unsigned-binary-integers">Division of unsigned binary integers</h5>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter9-7.png" title="/img/Computer Organization and Architecture/chapter9-7.png" data-thumbnail="/img/Computer Organization and Architecture/chapter9-7.png">
        
    </a>
<ul>
<li>
<p>è¢«é™¤æ•°çš„é«˜4ä½éƒ½æ¯”é™¤æ•°å°ã€‚åˆ°ç¬¬äº”ä½ï¼Œè¢«é™¤æ•°æ˜¯10010ï¼Œæ¯”é™¤æ•°å¤§ï¼Œæ‰€ä»¥å•†ä½ä¸º1ï¼Œç„¶åå‡å»é™¤æ•°ï¼Œå¾—åˆ°éƒ¨åˆ†ä½™æ•°æ˜¯111ï¼Œç»§ç»­ä¸‹ä¸€ä½ã€‚ç›´åˆ°è¢«é™¤æ•°çš„æœ€åä¸€ä½</p>
</li>
<li>
<p>äºŒè¿›åˆ¶çš„é•¿é™¤ç›¸å¯¹äº10è¿›åˆ¶çš„é•¿é™¤ç®€å•ä¸€äº›ã€‚10è¿›åˆ¶çš„æ—¶å€™ï¼Œå› ä¸ºå•†çš„æ¯ä¸€ä½å¯èƒ½æ˜¯0~9ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦æŒ¨ä¸ªå„¿å»è¯•ï¼Œçœ‹å•†çš„æ¯ä½æ˜¯å¤šå¤§</p>
</li>
<li>
<p>å¯¹äºäºŒè¿›åˆ¶ï¼Œå•†çš„æ¯ä¸€ä½åªèƒ½æ˜¯0æˆ–è€…1ï¼Œæ‰€ä»¥åªéœ€è¦å¯¹æ¯”è¢«é™¤æ•°å’Œé™¤æ•°çš„å¤§å°</p>
</li>
<li>
<p>ç»“æœåŒ…æ‹¬å•†å’Œä½™æ•°</p>
</li>
</ul>
<p><strong>Flowchart for Unsigned Binary Division</strong></p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter9-8.png" title="/img/Computer Organization and Architecture/chapter9-8.png" data-thumbnail="/img/Computer Organization and Architecture/chapter9-8.png">
        
    </a>
<ul>
<li>
<p>é™¤æ•°åœ¨Må¯„å­˜å™¨ä¸­ï¼Œè¢«é™¤æ•°æ”¾åœ¨Qå¯„å­˜å™¨ä¸­ã€‚Açš„åˆå§‹å€¼ä¸º0ï¼Œä¿å­˜è¢«é™¤æ•°çš„éƒ¨åˆ†ä½™æ•°</p>
</li>
<li>
<p>æ¯ä¸€æ¬¡ï¼Œå…ˆå°†Aå’ŒQè¿›è¡Œç§»ä½ï¼Œç„¶åæ£€æŸ¥Aå’ŒMçš„å¤§å°ï¼Œ<strong>ç”¨æ— ç¬¦å·å‡æ³•æ¥æ¯”è¾ƒã€‚å¦‚æœAå¤§äºMï¼Œå½“å‰çš„ä½™æ•°å¯ä»¥å‡å»Mï¼Œå¾—åˆ°ä¸€ä¸ªå•†ä½ä¸º1ï¼Œæ”¾åœ¨</strong>$Q_0$<strong>ã€‚å¦‚æœAæ¯”Må°ï¼Œåˆ™</strong>$Q_0$<strong>ä¸º0ï¼ŒåŒæ—¶Aæ¢å¤æˆå‡å»Mä¹‹å‰çš„å€¼</strong></p>
</li>
<li>
<p>ç„¶åç»§ç»­ç§»ä½(<strong>Aä¸QåŒæ—¶è¿›è¡Œå·¦ç§»,ç±»æ¯”ä¹˜æ³•ä¸­çš„æ•´ä½“ç§»ä½</strong>)å¹¶æ¯”è¾ƒã€‚ä¸€ç›´åˆ°è¢«é™¤æ•°çš„æ‰€æœ‰ä½éƒ½ç”¨å®Œ</p>
</li>
<li>
<p><strong>æœ€åå¾—åˆ°çš„å•†åœ¨Qå¯„å­˜å™¨ä¸­ï¼Œä½™æ•°ä¿å­˜åœ¨Aå¯„å­˜å™¨ä¸­</strong></p>
</li>
</ul>
<h3 id="floating-point-representation">Floating-Point Representation</h3>
<h4 id="real-numbers">Real numbers</h4>
<ul>
<li>
<p>Real number: number with fractions</p>
</li>
<li>
<p>Could be represent in pure binary</p>
</li>
</ul>
<p>$$
1001.1010=2^4+2^0+2^{-1}+2^{-3}=9.625
$$</p>
<h4 id="scientific-notation">Scientific Notation</h4>
<ul>
<li>
<p>In decimal, large numbers are represented by scientific notation</p>
</li>
<li>
<p>Use a mantissa to multiply by the power of 10</p>
</li>
</ul>
<p>$$
6.02_{10}\times 10^{23}
$$</p>
<ul>
<li>
<p>The same in binary</p>
</li>
<li>
<p>Represent a large binary number by multiplying the mantissa and the power of 2</p>
</li>
<li>
<p>Representation consists of three parts: <strong>sign bit, significant value and exponent</strong></p>
</li>
</ul>
<h4 id="floating-point">Floating point</h4>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter9-9.png" title="/img/Computer Organization and Architecture/chapter9-9.png" data-thumbnail="/img/Computer Organization and Architecture/chapter9-9.png">
        
    </a>
<ul>
<li>
<p><strong>Floating point representation</strong></p>
<ul>
<li>
<p><strong>Symbol represented by 0 or 1</strong></p>
</li>
<li>
<p><strong>Exponent of biased notation</strong></p>
</li>
<li>
<p><strong>Valid value, that is, the mantissa of the number</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>Binary point is the first place on the right of the highest significant value</strong></p>
</li>
</ul>
<hr>
<p><strong>Exponent! ! !</strong></p>
<ul>
<li>How to use biased notation?
<ul>
<li>For a k bit exponent,the bias is $2^{k-1}-1(exponent\ add\ \underbrace{0111111\dots111}_{k\ bits})\newline$</li>
<li>actual exponent range is: $[-(2^{k-1}-1),2^{k-1}]\newline$</li>
<li><strong>The bias is added to the actual exponent to get the stored exponent</strong></li>
</ul>
</li>
</ul>
<hr>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter9-10.png" title="/img/Computer Organization and Architecture/chapter9-10.png" data-thumbnail="/img/Computer Organization and Architecture/chapter9-10.png">
        
    </a>
<p>Example</p>
<ul>
<li>
<p>$-1.1010001 \times 2^{10100}\newline$</p>
</li>
<li>
<p>Sign: 1</p>
</li>
<li>
<p>Exponent: $\underbrace{01111111}_{bias}+\overbrace{10100}^{exponment}=10010011\newline$</p>
</li>
<li>
<p>Significand: 101 0001 0000 0000 0000 0000</p>
</li>
<li>
<p>The floating point representation for above number: 1 10010011 10100010000000000000000</p>
</li>
</ul>
<h4 id="normalization">Normalization</h4>
<ul>
<li>
<p>To simplify operations on floating-point numbers, it is required to normalize the number</p>
</li>
<li>
<p>How to normalize?</p>
<ul>
<li>
<p>The leftmost bit of the significand is 1</p>
<ul>
<li>e.g: $1.xxxxx \times 2^k\newline$</li>
</ul>
</li>
<li>
<p><strong>Because the most significand bit is always one, it is unnecessary to store this bit â€“ implicit</strong></p>
</li>
<li>
<p><strong>23-bit field is used to store a 24-bit significant</strong></p>
</li>
</ul>
</li>
</ul>
<h4 id="floating-point-range-and-accuracy">Floating point range and accuracy</h4>
<ul>
<li>
<p>For a 32 bit number</p>
<ul>
<li>8 bit exponentï¼Œ up to 128</li>
<li>$+|-2^{128}\approx1.0 \times 10^{39}\newline$</li>
</ul>
</li>
<li>
<p>Accuracy</p>
<ul>
<li>
<p>The effect of changing <code>lsb</code> of mantissa</p>
</li>
<li>
<p>23 bit mantissa $2^{-23}\approx 1.2 \times 10^{-7}\newline$</p>
</li>
<li>
<p>About 6 decimal places</p>
</li>
</ul>
</li>
<li>
<p><strong>Because total bits of floating point numbers is fixed, the range and accuracy are contradictory</strong></p>
</li>
</ul>
<hr>
<p><strong>Density of floating point numbers</strong></p>
<ul>
<li>
<p>For fixed-point numbers, the numbers are spaced evenly</p>
</li>
<li>
<p>For float-point notation, the numbers are not evenly spaced</p>
<ul>
<li>
<p>The length of exponent is fixed</p>
</li>
<li>
<p>As the number is getting bigger, the space between two numbers is bigger</p>
</li>
</ul>
</li>
</ul>
<h4 id="ieee-754">IEEE 754</h4>
<ul>
<li>
<p>Standard for floating point storage</p>
</li>
<li>
<p>32 and 64 bit standards</p>
</li>
<li>
<p><strong>32 bits standard</strong></p>
<ul>
<li><strong>8 bits exponent , 23 bits significand</strong></li>
</ul>
</li>
<li>
<p><strong>64 bits standard</strong></p>
<ul>
<li><strong>11 bits exponent , 52 bits significand</strong></li>
</ul>
</li>
<li>
<p>Extended formats (both mantissa and exponent) for intermediate results</p>
</li>
</ul>
<h4 id="special-about-ieee-754-formats">Special about IEEE 754 formats</h4>
<ul>
<li>
<p>Extreme value of the exponent to define a particular value</p>
</li>
<li>
<p>Exponent after bias is 2047, that is, all 1, indicating infinity</p>
</li>
<li>
<p>The actual range is smaller than the ideal range</p>
</li>
<li>
<p>For negative, the range is $[-(2-2^{-52}) \times 2^{1023},2^{-1022}]\newline$</p>
</li>
<li>
<p>For positive, the range is $[2^{-1022},(2-2^{-52}) \times 2^{1023}]\newline$</p>
</li>
</ul>
<h3 id="floating-point-arithmetic">Floating-Point Arithmetic</h3>
<h4 id="floating-point-arithmetic--">Floating point arithmetic +/-</h4>
<ul>
<li>
<p>Addition and subtraction of floating point numbers must first ensure that the exponent are the same</p>
</li>
<li>
<p>How to do thisï¼Ÿ Move the binary point position of the valid value of the operand</p>
</li>
<li>
<p><strong>Steps for addition and subtraction floating point numbers</strong></p>
<ul>
<li>
<p><strong>Check for zeros</strong></p>
</li>
<li>
<p><strong>Align significands (adjusting exponents)</strong></p>
</li>
<li>
<p><strong>Add or subtract significands</strong></p>
</li>
<li>
<p><strong>Normalize result</strong></p>
</li>
</ul>
</li>
</ul>
<p>Example
$$
\begin{gather}
1.011 \times 2^5+1.001 \times 2^3\newline
Align\ significands \rightarrow 1.001 \times 2^3=0.0101 \times 2^5\newline
Add\ or\ subtract\ significands \rightarrow 1.001+0.0101=1.1011\newline
Normalize\ result \rightarrow result=1.1011 \times 2^5\newline
\end{gather}
$$
<strong>FP Addition &amp; Subtraction Flowchart</strong></p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter9-11.png" title="/img/Computer Organization and Architecture/chapter9-11.png" data-thumbnail="/img/Computer Organization and Architecture/chapter9-11.png">
        
    </a>
<h4 id="floating-point-arithmetic-timesbackslashdiv">Floating point arithmetic $\times\backslash\div$</h4>
<ul>
<li>
<p>Multiplication and division are simpler than addition and subtraction</p>
</li>
<li>
<p><strong>Steps:</strong></p>
<ul>
<li>
<p><strong>Check for zero</strong></p>
</li>
<li>
<p><strong>Add/subtract exponents</strong></p>
</li>
<li>
<p><strong>Multiply/divide significands (watch sign)</strong></p>
</li>
<li>
<p><strong>Normalize</strong></p>
</li>
<li>
<p><strong>Round</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>All intermediate results should be in double length storage</strong></p>
</li>
</ul>
<hr>
<p><strong>Floating point multiplication</strong></p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter9-12.png" title="/img/Computer Organization and Architecture/chapter9-12.png" data-thumbnail="/img/Computer Organization and Architecture/chapter9-12.png">
        
    </a>
<p><strong>Floating point division</strong></p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter9-13.png" title="/img/Computer Organization and Architecture/chapter9-13.png" data-thumbnail="/img/Computer Organization and Architecture/chapter9-13.png">
        
    </a>
<p>Example:
$$
\begin{gather}
(1.001 \times 2^5) \times (1.001 \times 2^3)\newline
Check\ for\ zeros:no\ zero\newline
Add/subtract\ exponents\rightarrow5+3=8=(1000)_2\newline
Multiply/divide\ significands\rightarrow1.011\times1.001=1.100011\newline
Normalize\ result \rightarrow result=1.100011 \times 2^8\newline
Round \rightarrow 1.100011 \times 2^8\approx 1.100 \times 2^8\newline
\end{gather}
$$</p>
]]></description>
</item>
<item>
    <title>Computer Organization and Architecture Operating System</title>
    <link>https://Jungle430.github.io/posts/computer-organization-and-architecture/computer-organization-and-architecture-operating-system/</link>
    <pubDate>Sun, 22 Jan 2023 17:47:46 &#43;0800</pubDate><author>1239946358@qq.com (Jungle)</author><guid>https://Jungle430.github.io/posts/computer-organization-and-architecture/computer-organization-and-architecture-operating-system/</guid>
    <description><![CDATA[<h1 id="computer-organization-and-architecture">Computer Organization and Architecture</h1>
<h2 id="operating-system-support">Operating System Support</h2>
<h3 id="outline">Outline</h3>
<ul>
<li>
<p>Operating System Overview</p>
</li>
<li>
<p>Scheduling</p>
</li>
<li>
<p>Memory Management</p>
</li>
</ul>
<h3 id="operating-system-overview">Operating System Overview</h3>
<ul>
<li>ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿ</li>
</ul>
<blockquote>
<p>æ“ä½œç³»ç»Ÿæ˜¯ä¸€ç»„ä¸»ç®¡å¹¶æ§åˆ¶è®¡ç®—æœºæ“ä½œã€è¿ç”¨å’Œè¿è¡Œç¡¬ä»¶ã€è½¯ä»¶èµ„æºå’Œæä¾›å…¬å…±æœåŠ¡æ¥ç»„ç»‡ç”¨æˆ·äº¤äº’çš„ç›¸äº’å…³è”çš„ç³»ç»Ÿè½¯ä»¶ç¨‹åºã€‚æ ¹æ®è¿è¡Œçš„ç¯å¢ƒï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥åˆ†ä¸ºæ¡Œé¢æ“ä½œç³»ç»Ÿï¼Œæ‰‹æœºæ“ä½œç³»ç»Ÿï¼ŒæœåŠ¡å™¨æ“ä½œç³»ç»Ÿï¼ŒåµŒå…¥å¼æ“ä½œç³»ç»Ÿç­‰</p>
</blockquote>
<ul>
<li>æœ‰å“ªäº›å¸¸ç”¨çš„æ“ä½œç³»ç»Ÿ
<ul>
<li>DOS</li>
<li>windows</li>
<li>UNIX</li>
<li>Linux</li>
<li>OS/2</li>
<li>IOS,Android</li>
<li>Mac OS</li>
</ul>
</li>
</ul>
<h4 id="operating-system-objectives-and-functions">Operating System Objectives and Functions</h4>
<ul>
<li>
<p><strong>Operating system, or OS for short, is a computer program that manages computer hardware and software resources</strong></p>
</li>
<li>
<p>The operating system deals with such basic matters as</p>
<ul>
<li>
<p><strong>managing and configuring memory</strong></p>
</li>
<li>
<p><strong>determining the priority of system resource supply and demand</strong></p>
</li>
<li>
<p><strong>controlling input devices and output devices</strong></p>
</li>
<li>
<p><strong>operating networks and managing file systems</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>The operating system also provides an operation interface for users to interact with the system</strong></p>
</li>
</ul>
<h5 id="objectives-and-functions">Objectives and Functions</h5>
<ul>
<li>
<p>A system program developed to improve resource utilization and enhance computer system performance</p>
</li>
<li>
<p>Convenience</p>
<ul>
<li>
<p>Shields the details of computer hardware</p>
</li>
<li>
<p>Provides convenient interfaces for users</p>
</li>
<li>
<p>Making the computer easier to use</p>
</li>
</ul>
</li>
<li>
<p>Efficiency</p>
<ul>
<li>
<p>Process scheduling</p>
</li>
<li>
<p>Memory management</p>
</li>
<li>
<p>Fully exploit the power of computer</p>
</li>
</ul>
</li>
</ul>
<h5 id="characteristic">Characteristic</h5>
<ul>
<li>
<p>The most fundamental system program is the operating system</p>
<ul>
<li>
<p>Provides an interface between the user and the computer</p>
</li>
<li>
<p>Manages the computer resources</p>
</li>
<li>
<p>Provides an environment for the application program execution</p>
</li>
<li>
<p>Improves the efficiency and stability of program execution</p>
</li>
</ul>
</li>
</ul>
<h5 id="layers-of-a-computer-system">Layers of a Computer System</h5>
<ul>
<li>
<p>ç³»ç»Ÿè½¯ä»¶æ˜¯æŒ‡æ§åˆ¶å’Œåè°ƒè®¡ç®—æœºåŠå¤–éƒ¨è®¾å¤‡,æ”¯æŒåº”ç”¨è½¯ä»¶å¼€å‘å’Œè¿è¡Œçš„ç³»ç»Ÿï¼Œä¸»è¦åŠŸèƒ½æ˜¯è°ƒåº¦ï¼Œç›‘æ§å’Œç»´æŠ¤è®¡ç®—æœºç³»ç»Ÿ</p>
</li>
<li>
<p>ç³»ç»Ÿè½¯ä»¶åŒ…æ‹¬æ“ä½œç³»ç»Ÿå’Œä¸€ç³»åˆ—åŸºæœ¬çš„å·¥å…·ï¼Œæ¯”å¦‚ç¼–è¯‘å™¨ï¼Œæ•°æ®åº“ç®¡ç†ï¼Œå­˜å‚¨å™¨æ ¼å¼åŒ–ï¼Œæ–‡ä»¶ç³»ç»Ÿç®¡ç†ç­‰ï¼Œæ”¯æŒè®¡ç®—æœºç³»ç»Ÿæ­£å¸¸è¿è¡Œå¹¶å®ç°ç”¨æˆ·æ“ä½œ</p>
</li>
<li>
<p>æ“ä½œç³»ç»Ÿæ˜¯æœ€é‡è¦çš„ç³»ç»Ÿè½¯ä»¶ï¼Œä½äºç¡¬ä»¶å’Œå·¥å…·ä¹‹é—´</p>
</li>
<li>
<p>ä½¿å¾—ä¸Šå±‚æ–¹ä¾¿åœ°è®¿é—®å’Œä½¿ç”¨è®¡ç®—æœºç³»ç»Ÿæä¾›çš„èµ„æºå’ŒæœåŠ¡</p>
</li>
</ul>
<h5 id="operating-system-services">Operating system services</h5>
<ul>
<li>
<p>Program creation</p>
</li>
<li>
<p>Program execution</p>
</li>
<li>
<p>Access to I/O devices</p>
</li>
<li>
<p>Controlled access to files</p>
</li>
<li>
<p>System access</p>
</li>
<li>
<p>Error detection and response</p>
</li>
<li>
<p>Accounting</p>
</li>
</ul>
<h5 id="os-as-a-resource-management">OS as a resource management</h5>
<ul>
<li>
<p>æ“ä½œç³»ç»Ÿæ˜¯ä¸€ä¸ªè®¡ç®—æœºç¨‹åºï¼Œæ‰§è¡Œä¹Ÿæ˜¯ç”±å¤„ç†å™¨æ¥è¿›è¡Œï¼Œé€šè¿‡ç»™å¤„ç†å™¨æä¾›ä¸€ç³»åˆ—æŒ‡ä»¤ï¼Œæ¥æ‰§è¡Œæ“ä½œç³»ç»Ÿç¨‹åº</p>
</li>
<li>
<p><strong>æ“ä½œç³»ç»Ÿä¸èƒ½ä¸€ç›´å ç”¨äº†å¤„ç†å™¨ï¼Œè€Œæ˜¯éœ€è¦æ”¾å¼ƒå¯¹å¤„ç†å™¨çš„æ§åˆ¶ï¼Œè®©å¤„ç†å™¨å»æ‰§è¡Œåº”ç”¨ç¨‹åº</strong>ã€‚ä¹‹åï¼Œå®ƒå†æ¬¡è·å¾—æ§åˆ¶æƒï¼Œä¸ºä¸‹ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æ‰§è¡Œè¿›è¡Œå‡†å¤‡(System Call)</p>
</li>
<li>
<p><strong>æ“ä½œç³»ç»Ÿæœ‰ä¸€éƒ¨åˆ†é©»ç•™åœ¨å†…å­˜ä¸­ï¼Œç§°ä¸ºæ“ä½œç³»ç»Ÿå†…æ ¸</strong></p>
</li>
<li>
<p>æ“ä½œç³»ç»Ÿè¿˜è¦å¯¹I/Oçš„ä½¿ç”¨è¿›è¡Œåˆ†é…</p>
</li>
</ul>
<h4 id="types-of-operating-systems">Types of Operating Systems</h4>
<p><strong>Operating system support batch processing or not?</strong></p>
<ul>
<li>
<p>Interactive</p>
<ul>
<li>
<p>User usually interacts with the computer by keyboard or display</p>
</li>
<li>
<p>Request to execute jobs or process transactions</p>
</li>
</ul>
</li>
<li>
<p>Batch</p>
<ul>
<li>
<p>Multiple user programs are packaged and submits to the computer in batches for processing</p>
</li>
<li>
<p>After processing, print the results</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Support multiple programs or not?</strong></p>
<ul>
<li>
<p>Single program (<code>Uni</code>-programming)</p>
<ul>
<li>Processor can only process one program at a time</li>
</ul>
</li>
<li>
<p>Multi-programming (Multi-tasking)</p>
<ul>
<li>
<p>Processor can process multiple programs at one time</p>
</li>
<li>
<p>Multiple programs loaded into memory at the same time</p>
</li>
<li>
<p>processor switches between programs and processes</p>
</li>
</ul>
</li>
</ul>
<h5 id="memory-layout-for-resident-monitor">Memory layout for resident monitor</h5>
<ul>
<li>
<p>å¤šç¨‹åºæ‰¹é‡å¤„ç†ç³»ç»Ÿä¸­ï¼Œå†…å­˜åˆ’åˆ†ä¸ºç›‘æ§ç¨‹åºå’Œç”¨æˆ·ç¨‹åºä¸¤ä¸ªåŒºåŸŸ</p>
<ul>
<li>
<p>ç›‘æ§ç¨‹åºåŒ…æ‹¬ï¼šä¸­æ–­å¤„ç†ï¼Œè®¾å¤‡é©±åŠ¨ç¨‹åºï¼Œä½œä¸šæ’åºï¼Œæ§åˆ¶è¯­è¨€è§£é‡Šå™¨</p>
</li>
<li>
<p>é€šè¿‡ç›‘æ§ç¨‹åºï¼Œå®ç°äº†ä½œä¸šçš„è°ƒåº¦</p>
</li>
</ul>
</li>
<li>
<p>ç”¨æˆ·ç¨‹åºæäº¤ä¹‹åï¼Œå°±å¯ä»¥æŒ‰ç…§é¡ºåºå¤„ç†ï¼Œä¸ä¼šæµªè´¹å¤„ç†å™¨</p>
</li>
</ul>
<h5 id="required-hardware-support">Required hardware support</h5>
<ul>
<li>
<p>Memory protection</p>
<ul>
<li>To protect the Monitor</li>
</ul>
</li>
<li>
<p>Timer</p>
<ul>
<li>To prevent a job monopolizing the system</li>
</ul>
</li>
<li>
<p>Privileged instructions</p>
<ul>
<li>Only executed by Monitor</li>
<li>e.g. I/O</li>
</ul>
</li>
<li>
<p>Interrupts</p>
<ul>
<li>Allows operation system for relinquishing and regaining control</li>
</ul>
</li>
</ul>
<h5 id="multi-programmed-batch-system">Multi-programmed batch system</h5>
<ul>
<li>
<p>Batch system performs monitoring and user programs <strong>in turn</strong>, which improves the utilization of the whole system</p>
</li>
<li>
<p>I/O devices very slow</p>
</li>
<li>
<p>Processors are also often idle</p>
</li>
<li>
<p><strong>Multi-programmed batch systems</strong></p>
<ul>
<li>
<p><strong>Memory load multiple user programs</strong></p>
</li>
<li>
<p><strong>When one program is waiting for I/O, another can use the CPU</strong></p>
</li>
<li>
<p><strong>CPU keeps working</strong></p>
</li>
<li>
<p><strong>Core idea of modern operation system</strong></p>
</li>
</ul>
</li>
</ul>
<p><strong>Single program</strong></p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter8-1.png" title="/img/Computer Organization and Architecture/chapter8-1.png" data-thumbnail="/img/Computer Organization and Architecture/chapter8-1.png">
        
    </a>
<p><strong>Multi-Programming with two programs</strong></p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter8-2.png" title="/img/Computer Organization and Architecture/chapter8-2.png" data-thumbnail="/img/Computer Organization and Architecture/chapter8-2.png">
        
    </a>
<p><strong>Multi-Programming with three programs</strong></p>
<ul>
<li>
<p>åŒæ—¶æœ‰ä¸‰ä¸ªç¨‹åºå¤„äºæ‰§è¡ŒçŠ¶æ€</p>
</li>
<li>
<p>CPUç­‰å¾…çŠ¶æ€çš„æ—¶é—´æ›´å°‘</p>
</li>
<li>
<p>CPUæ•ˆç‡æ›´é«˜</p>
</li>
</ul>
<p><strong>Utilization</strong></p>
<ul>
<li>
<p>å•ä¸ªç¨‹åºé€ä¸ªæ‰§è¡Œï¼Œæ€»å…±éœ€è¦30ä¸ªæ—¶é—´å•ä½</p>
</li>
<li>
<p>å¤šé“ç¨‹åºåŒæ—¶æ‰§è¡Œï¼Œåªéœ€è¦15ä¸ªæ—¶é—´å•ä½</p>
</li>
<li>
<p>èŠ‚çœäº†ä¸€åŠæ—¶é—´</p>
</li>
</ul>
<h5 id="time-sharing-systems">Time sharing systems</h5>
<ul>
<li>
<p><strong>Multi-programmed batch system</strong></p>
<ul>
<li>
<p><strong>Improve the efficiency of system operation</strong></p>
</li>
<li>
<p><strong>Disadvantage is that the response to users is not timely</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>For multiple interactive job scenarios, a time-sharing system is proposed</strong></p>
<ul>
<li>
<p><strong>Multiple users to share processor time and interact with the processor</strong></p>
</li>
<li>
<p><strong>Operating system responds to each user&rsquo;s request in time slices computer</strong></p>
</li>
<li>
<p><strong>For each user, he thinks the processor only serves him</strong></p>
</li>
</ul>
</li>
</ul>
<h3 id="scheduling">Scheduling</h3>
<ul>
<li>
<p><strong>Key to multi-programming</strong></p>
</li>
<li>
<p><strong>Determines the efficiency of multiprogramming</strong></p>
</li>
<li>
<p>Includes long term, medium term, short term</p>
<ul>
<li>
<p><strong>Long term: determines the number of processes added to the pending process pool</strong></p>
</li>
<li>
<p><strong>Medium term: determines the number of processes added to main memory</strong></p>
</li>
<li>
<p><strong>Short term: decide which process the processor will execute</strong></p>
</li>
</ul>
</li>
</ul>
<h4 id="five-state-process-model">Five state process model</h4>
<div class="mermaid" id="id-1"></div>
<ul>
<li>
<p>æ–°å»ºçŠ¶æ€ï¼šè°ƒåº¦ç¨‹åºæäº¤ä¸€ä¸ªç¨‹åºï¼Œæ“ä½œç³»ç»Ÿä¸ºè¿™ä¸ªç¨‹åºåˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œå¹¶å°†è¿›ç¨‹ç§»å…¥å°±ç»ªçŠ¶æ€</p>
</li>
<li>
<p>å°±ç»ªçŠ¶æ€ï¼šè¿›ç¨‹å·²ç»å‡†å¤‡å°±ç»ªï¼Œç­‰å¾…å¤„ç†å™¨çš„æ‰§è¡Œ</p>
</li>
<li>
<p>è¿è¡ŒçŠ¶æ€ï¼šè¿›ç¨‹æ­£åœ¨ç”±å¤„ç†å™¨æ‰§è¡Œ</p>
</li>
<li>
<p>ç­‰å¾…çŠ¶æ€ï¼šè¿›ç¨‹åœ¨ç­‰å¾…èµ„æºï¼Œå¤„äºæŒ‚èµ·çŠ¶æ€</p>
</li>
<li>
<p>ç»ˆæ­¢çŠ¶æ€ï¼šè¿›ç¨‹è¿è¡Œç»“æŸ</p>
</li>
</ul>
<h4 id="what-is-process---">What is process? ! ! !</h4>
<ul>
<li>
<p><strong>A program in execution</strong></p>
<ul>
<li>
<p><strong>An instance of a program running on a computer</strong></p>
</li>
<li>
<p><strong>The entity that can be assigned to and executed on a processor</strong></p>
</li>
<li>
<p><strong>A unit of activity characterized by the execution of a sequence of instructions, a current state, and an associated set of system instructions</strong></p>
</li>
</ul>
</li>
</ul>
<h4 id="process-elements">Process elements</h4>
<ul>
<li>
<p>A process is comprised of</p>
<ul>
<li>
<p><strong>Program code (possibly shared)</strong></p>
</li>
<li>
<p><strong>A set of data</strong></p>
</li>
<li>
<p><strong>A number of attributes describing the state of the process</strong></p>
</li>
</ul>
</li>
<li>
<p>Process elements</p>
<ul>
<li>
<p><strong>Identifier</strong></p>
</li>
<li>
<p><strong>State</strong></p>
</li>
<li>
<p><strong>Priority</strong></p>
</li>
<li>
<p><strong>Program counter</strong></p>
</li>
<li>
<p><strong>Memory pointers</strong></p>
</li>
<li>
<p><strong>Context data</strong></p>
</li>
<li>
<p><strong>I/O status information</strong></p>
</li>
<li>
<p><strong>Accounting information</strong></p>
</li>
</ul>
</li>
</ul>
<h4 id="process-control-block">Process control block</h4>
<ul>
<li>
<p><strong>Contains the process elements</strong></p>
</li>
<li>
<p><strong>Created and manage by the operating system</strong></p>
</li>
<li>
<p><strong>Allows support for multiple processes</strong></p>
</li>
</ul>
<div class="mermaid" id="id-2"></div>
<h4 id="trace-of-the-process">Trace of the process</h4>
<ul>
<li>
<p>The behavior of an individual process is shown by listing the sequence of instructions that are executed</p>
<ul>
<li><strong>This list is called a Trace</strong></li>
</ul>
</li>
<li>
<p>Processor needs to execute multiple processes one by one</p>
<ul>
<li>
<p><strong>Dispatcher is responsible for scheduling the process</strong></p>
</li>
<li>
<p><strong>Dispatcher is a small program which switches the processor from one process to another</strong></p>
</li>
</ul>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter8-3.png" title="/img/Computer Organization and Architecture/chapter8-3.png" data-thumbnail="/img/Computer Organization and Architecture/chapter8-3.png" data-sub-html="<h2>trace</h2>">
        
    </a><figcaption class="image-caption"><code>trace</code></figcaption>
    </figure>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter8-4.png" title="/img/Computer Organization and Architecture/chapter8-4.png" data-thumbnail="/img/Computer Organization and Architecture/chapter8-4.png" data-sub-html="<h2>trace</h2>">
        
    </a><figcaption class="image-caption"><code>trace</code></figcaption>
    </figure>
<h4 id="virtual-memory">Virtual memory</h4>
<ul>
<li>
<p>è™šæ‹Ÿå­˜å‚¨å™¨æ˜¯å†…å­˜ç®¡ç†çš„ä¸€ç§æŠ€æœ¯ï¼Œå…è®¸ç¨‹åºä»é€»è¾‘çš„è§’åº¦å¯¹å†…å­˜è¿›è¡Œå¯»å€ï¼Œè€Œä¸è€ƒè™‘ç‰©ç†ä¸Šå¯ç”¨çš„å†…å­˜ç©ºé—´</p>
</li>
<li>
<p><strong>æœ¬è´¨ä¸Šæ˜¯ä¸€ç§å†…å­˜æ‰©å……æŠ€æœ¯ï¼Œä¸ä¼šä½¿å†…å­˜çš„ç‰©ç†ç©ºé—´å¤§å°å‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯èƒ½å¤Ÿä½¿ç¨‹åºè®¿é—®å†…å­˜çš„æ–¹å¼æ›´çµæ´»</strong></p>
</li>
<li>
<p><strong>ç”±äºè™šæ‹Ÿå†…å­˜çš„å­˜åœ¨ï¼Œæ‰€ä»¥ç¨‹åºä¸­å¯ä»¥åªå°†å…¶ä¸­çš„ä¸€éƒ¨åˆ†åŠ è½½åˆ°ç‰©ç†å†…å­˜ä¸­ã€‚åªæœ‰å½“éœ€è¦çš„ç¨‹åºæ®µä¸åœ¨å†…å­˜ä¸­çš„æ—¶å€™ï¼Œæ‰é€šè¿‡æ¢é¡µçš„æ–¹å¼å°†å®ƒåŠ è½½åˆ°å†…å­˜ä¸­</strong></p>
</li>
</ul>
<h4 id="execution-of-a-process">Execution of a process</h4>
<ul>
<li>
<p><strong>Entire program does not need to be loaded to memory</strong></p>
<ul>
<li>
<p><strong>Operating system brings into main memory a few pieces of the program</strong></p>
</li>
<li>
<p><strong>Resident set - portion of process that is in main memory</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>An interrupt is generated when an address is needed that is not in main memory</strong></p>
<ul>
<li><strong>Operating system places the process in a blocking state</strong></li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p><strong>Piece of process that contains the logical address is brought into main memory</strong></p>
<ul>
<li>
<p><strong>Operating system issues a disk I/O Read request</strong></p>
</li>
<li>
<p><strong>Another process is dispatched to run while the disk I/O takes place</strong></p>
</li>
<li>
<p><strong>An interrupt is issued when disk I/O complete which causes the operating system to place the affected process in the Ready state</strong></p>
</li>
</ul>
</li>
</ul>
<h4 id="implications-of-this-new-strategy">Implications of this new strategy</h4>
<ul>
<li>
<p>More processes may be maintained in main memory</p>
<ul>
<li>
<p>Only load in some of the pieces of each process</p>
</li>
<li>
<p>With so many processes in main memory, it is very likely a process will be in the Ready state at any particular time</p>
</li>
</ul>
</li>
<li>
<p>A process may be larger than all of main memory</p>
</li>
</ul>
<h4 id="wording-mode-of-os">Wording mode of OS</h4>
<ul>
<li>
<p><strong>æ“ä½œç³»ç»Ÿä¸­ç»´æŠ¤ä¸€ä¸ªé•¿æœŸé˜Ÿåˆ—å’Œä¸€ä¸ªçŸ­æœŸé˜Ÿåˆ—</strong></p>
</li>
<li>
<p><strong>é•¿æœŸé˜Ÿåˆ—æ˜¯ç­‰å¾…ç³»ç»Ÿèµ„æºçš„ä½œä¸šåˆ—è¡¨ï¼ŒçŸ­æœŸé˜Ÿåˆ—åŒ…å«æ‰€æœ‰å°±ç»ªçŠ¶æ€çš„è¿›ç¨‹</strong></p>
</li>
<li>
<p><strong>ä¸­æ–­å‘ç”Ÿæ—¶ï¼Œæ“ä½œç³»ç»Ÿæ¥ç®¡å¤„ç†å™¨çš„æ§åˆ¶æƒï¼Œæ‰§è¡Œä¸­æ–­å¤„ç†ç¨‹åº</strong></p>
</li>
<li>
<p><strong>è¿›ç¨‹è°ƒç”¨æœåŠ¡æ—¶ï¼Œæ“ä½œç³»ç»Ÿæ‰§è¡ŒæœåŠ¡è°ƒç”¨å¤„ç†ç¨‹åº</strong></p>
</li>
<li>
<p><strong>ä¸­æ–­æˆ–æœåŠ¡è°ƒç”¨ç¨‹åºå¤„ç†å®Œæˆåï¼ŒçŸ­æœŸè°ƒåº¦ä¼šè°ƒåº¦æŸä¸ªè¿›ç¨‹è¿›å…¥åˆ°è¿è¡ŒçŠ¶æ€</strong></p>
</li>
<li>
<p><strong>æ¯ä¸ªI/Oè®¾å¤‡æœ‰ä¸€ä¸ªI/Oé˜Ÿåˆ—</strong></p>
</li>
</ul>
<h5 id="process-scheduling---">Process scheduling ï¼ ï¼ ï¼</h5>
<ul>
<li>
<p><strong>è¿›ç¨‹è¯·æ±‚è¿›å…¥é•¿æœŸé˜Ÿåˆ—</strong></p>
</li>
<li>
<p><strong>è¿›ç¨‹çš„è¯·æ±‚æ»¡è¶³åï¼Œè¿›ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€å¹¶è¿›å…¥çŸ­æœŸé˜Ÿåˆ—</strong></p>
</li>
<li>
<p><strong>å¦‚æœè¿›ç¨‹è¯·æ±‚I/Oï¼Œåˆ™è¿›å…¥I/Oé˜Ÿåˆ—</strong></p>
</li>
<li>
<p><strong>I/Oå®Œæˆåï¼Œç»§ç»­è¿›å…¥çŸ­æœŸé˜Ÿåˆ—ï¼Œå®Œæˆè¿›ç¨‹çš„æ‰§è¡Œ</strong></p>
</li>
</ul>
<h3 id="memory-management">Memory Management</h3>
<ul>
<li>
<p><strong><code>Uni</code>-program</strong></p>
<ul>
<li>
<p><strong>Memory split into two</strong></p>
</li>
<li>
<p><strong>One for Operating System (monitor)</strong></p>
</li>
<li>
<p><strong>One for currently executing program</strong></p>
</li>
</ul>
</li>
<li>
<p><strong><code>Multi</code>-program</strong></p>
<ul>
<li><strong>â€œUserâ€ part is sub-divided and shared among active processes</strong></li>
</ul>
</li>
<li>
<p>Memory management</p>
<ul>
<li>
<p>Make full use of the memory space</p>
</li>
<li>
<p>keep the CPU busy</p>
</li>
<li>
<p>avoid idle CPU due to IO waiting</p>
</li>
</ul>
</li>
</ul>
<h4 id="methods-of-memory-management">Methods of memory management</h4>
<ul>
<li>
<p>Swapping</p>
</li>
<li>
<p>Partitioning</p>
</li>
<li>
<p>Paging</p>
</li>
<li>
<p>Virtual Memory</p>
</li>
<li>
<p>Translation Lookaside Buffer</p>
</li>
<li>
<p>Segmentation</p>
</li>
</ul>
<h5 id="swapping">Swapping</h5>
<ul>
<li>
<p>Problem</p>
<ul>
<li>
<p><strong>I/O is so slow compared with CPU</strong></p>
</li>
<li>
<p>Even in multi-programming systemï¼ŒCPU is idle most of the time</p>
</li>
</ul>
</li>
<li>
<p>Solutions</p>
<ul>
<li>
<p>Increase main memoryï¼Œmore process in memory</p>
<ul>
<li>
<p>Expensive</p>
</li>
<li>
<p>Leads to larger programs</p>
</li>
</ul>
</li>
<li>
<p><strong>Swapping</strong></p>
</li>
</ul>
</li>
</ul>
<p><strong>What is swapping?</strong></p>
<ul>
<li>
<p>Long term queue of processes stored on disk</p>
<ul>
<li>
<p>Processes â€œswappedâ€ in as space becomes available</p>
</li>
<li>
<p>As a process completes it is moved out of main memory</p>
</li>
</ul>
</li>
<li>
<p>If none of the processes in memory are ready (i.e. all I/O blocked)</p>
<ul>
<li>
<p>Swap out a blocked process to intermediate queue</p>
</li>
<li>
<p>Swap in a ready process or a new process</p>
</li>
<li>
<p><strong>Swapping is an I/O process</strong></p>
</li>
</ul>
</li>
</ul>
<p><strong>Use of swapping</strong></p>
<ul>
<li>
<p><strong>ç®€å•çš„è¿›ç¨‹è°ƒåº¦ä¸­ï¼Œç£ç›˜ç»´æŠ¤ä¸€ä¸ªé•¿å‘¨æœŸé˜Ÿåˆ—ã€‚å½“å†…å­˜ä¸­æœ‰ä½œä¸šå®Œæˆäº†ï¼Œä¼šå°†å®ƒä»å†…å­˜ä¸­å»æ‰ï¼ŒåŒæ—¶å°†é•¿å‘¨æœŸé˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªä½œä¸šæ”¾åˆ°å†…å­˜ä¸­</strong></p>
</li>
<li>
<p><strong>äº¤æ¢è°ƒåº¦ä¸­ï¼Œç£ç›˜ä¸­ç»´æŠ¤äº†ä¸€ä¸ªä¸­é—´é˜Ÿåˆ—ã€‚é˜»å¡è¿›ç¨‹å°†ä¼šè¢«â€œäº¤æ¢â€åˆ°ä¸­é—´é˜Ÿåˆ—ä¸­ï¼Œå¹¶ä»ä¸­é—´é˜Ÿåˆ—ä¸­è°ƒå…¥ä¸€ä¸ªå·²ç»å°±ç»ªçš„è¿›ç¨‹ã€‚å¦‚æœä¸­é—´é˜Ÿåˆ—æ²¡æœ‰å°±ç»ªçš„è¿›ç¨‹ï¼Œå°±ä»é•¿æœŸé˜Ÿåˆ—ä¸­è°ƒåº¦ä¸€ä¸ªæ–°çš„è¿›ç¨‹åˆ°å†…å­˜ä¸­</strong></p>
</li>
<li>
<p><strong>é€šè¿‡ä¸­é—´é˜Ÿåˆ—ï¼Œå¯ä»¥åœ¨è¿›ç¨‹å‡å¤„äºé˜»å¡çš„æ—¶å€™è¿›è¡Œè¿›ç¨‹çš„æœ‰æ•ˆè°ƒåº¦ï¼Œæé«˜CPUæ•ˆç‡</strong></p>
</li>
</ul>
<h5 id="partitioning">Partitioning</h5>
<ul>
<li>
<p>Swapping does not explain how memory is managed</p>
</li>
<li>
<p><strong>Memory management mode</strong></p>
<ul>
<li>
<p>Partitioning</p>
</li>
<li>
<p>Paging</p>
</li>
<li>
<p>Segmentation</p>
</li>
</ul>
</li>
<li>
<p><strong>Partitioning: Splitting memory into sections to allocate to processes (including Operating System)</strong></p>
</li>
</ul>
<p><strong>Fixed partitioning</strong></p>
<ul>
<li>
<p><strong>åˆ†åŒºå¤§å°å›ºå®šï¼Œä½†ä¸ä¸€å®šéƒ½æ˜¯ä¸€æ ·å¤§</strong></p>
</li>
<li>
<p>è¿›ç¨‹åˆ†é…å†…å­˜æ—¶ï¼Œåˆ†é…åˆ°<strong>èƒ½å®¹çº³å®ƒçš„æœ€å°åˆ†åŒº</strong></p>
</li>
<li>
<p><strong>å­˜åœ¨å†…å­˜æµªè´¹çš„ç°è±¡</strong></p>
</li>
<li>
<p>é‡‡å–éå›ºå®šå¤§å°åˆ†åŒºå¯èƒ½ä¼šæ›´å¥½</p>
</li>
</ul>
<h6 id="variable-sized-partitions">Variable sized partitions</h6>
<ul>
<li>
<p>Allocate exactly the required memory to a process</p>
</li>
<li>
<p>This leads to a hole at the end of memory, too small to use</p>
<ul>
<li>Only one small hole - less waste</li>
</ul>
</li>
<li>
<p><strong>When all processes are blocked, swap out a process and bring in another processï¼Œleads to another hole</strong></p>
</li>
<li>
<p><strong>A process is completed and swapped outï¼Œnew process is swapped in. May leads to a hole</strong></p>
</li>
<li>
<p>Eventually have lots of holes (called fragmentation)</p>
</li>
<li>
<p>Solutions</p>
<ul>
<li>
<p><strong>Coalesce - Join adjacent holes into one large hole</strong></p>
</li>
<li>
<p><strong>Compaction- From time to time go through memory and move all hole into one free block</strong> (like $\rightarrow$ <code>disk de-fragmentation</code>)</p>
</li>
</ul>
</li>
</ul>
<h6 id="effect-of-dynamic-partitioning">Effect of Dynamic Partitioning</h6>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter8-5.png" title="/img/Computer Organization and Architecture/chapter8-5.png" data-thumbnail="/img/Computer Organization and Architecture/chapter8-5.png" data-sub-html="<h2>Dynamic Partitioning</h2>">
        
    </a><figcaption class="image-caption"><code>Dynamic Partitioning</code></figcaption>
    </figure>
<ul>
<li>
<p>åˆ†é…è¿›ç¨‹1~3çš„æ—¶å€™ï¼ŒæŒ‰éœ€æ±‚åˆ†é…ï¼Œå‰©ä¸‹$4M$çš„ç©ºé—´</p>
</li>
<li>
<p>è¿›ç¨‹2äº¤æ¢å‡ºå»äº†ï¼Œè¿›ç¨‹4è¿›æ¥äº†ã€‚è¿›ç¨‹4åªæœ‰$8M$ï¼Œåœ¨è¿›ç¨‹4å’Œè¿›ç¨‹3ä¹‹é—´ï¼Œå½¢æˆäº†ä¸€ä¸ª$6M$çš„ç©ºå—</p>
</li>
<li>
<p>è¿›ç¨‹1äº¤æ¢å‡ºå»äº†ï¼Œè¿›ç¨‹2è¿›æ¥ã€‚è¿›ç¨‹1æœ‰$20M$ï¼Œè¿›ç¨‹2åªæœ‰$14M$ï¼Œåœ¨è¿›ç¨‹2å’Œè¿›ç¨‹4ä¹‹é—´ï¼Œåˆå½¢æˆäº†ä¸€ä¸ª$6M$çš„ç©ºå—</p>
</li>
<li>
<p>æœ‰2ä¸ª$6M$ç©ºå—å’Œ1ä¸ª$4M$ç©ºå—</p>
</li>
</ul>
<h6 id="problem-about-relocation">Problem about relocation</h6>
<ul>
<li>
<p>No guarantee that process will load into the same place in memory</p>
</li>
<li>
<p>Instructions contain addresses information</p>
<ul>
<li>
<p>Locations of data</p>
</li>
<li>
<p>Addresses for instructions (e.g. branching)</p>
</li>
</ul>
</li>
<li>
<p><strong>If a fixed address is used, memory address of process changes after the process is swapped out and then swapped in</strong></p>
</li>
<li>
<p><strong>Data and instructions cannot be addressed</strong></p>
</li>
</ul>
<hr>
<ul>
<li>
<p>Using logical address and physical address</p>
<ul>
<li>
<p>Logical address - relative to beginning of program</p>
</li>
<li>
<p>Physical address - actual location in memory (this time)</p>
</li>
</ul>
</li>
<li>
<p>Starting unit address of the current process is set as the base address</p>
</li>
<li>
<p>Addressing data and instructions using logical addresses in programs</p>
</li>
</ul>
<h5 id="paging">Paging</h5>
<ul>
<li>
<p>Partitioning will lead to waste of memory</p>
</li>
<li>
<p><strong>Paging Management</strong></p>
<ul>
<li>
<p><strong>Split memory into equal sized, small chunks -page frames</strong></p>
</li>
<li>
<p><strong>Split programs (processes) into equal sized small chunks â€“ pages</strong></p>
</li>
<li>
<p><strong>Allocate the required number page frames to a process</strong></p>
</li>
</ul>
</li>
<li>
<p>Operating System completes paging management</p>
<ul>
<li>
<p><strong>A process does not require contiguous page frames</strong></p>
</li>
<li>
<p><strong>Use page table to keep track</strong></p>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>
<p>Each process has its own page table</p>
</li>
<li>
<p><strong>Each page table entry contains the frame number of the corresponding page in main memory</strong></p>
</li>
<li>
<p><strong>Two extra bits are needed to indicate</strong></p>
<ul>
<li>
<p><strong>whether the page is in main memory or not</strong></p>
</li>
<li>
<p><strong>Whether the contents of the page has been altered since it was last loaded</strong></p>
</li>
</ul>
</li>
</ul>
<h6 id="paging-table">Paging table</h6>
<ul>
<li>
<p><strong>å¯»å€çš„è™šæ‹Ÿåœ°å€ä¸ºâ€œé¡µå·+åç§»é‡â€</strong></p>
</li>
<li>
<p>é¡µè¡¨ä¸­æŒ‡æ˜äº†è¿™ä¸ªé¡µå¯¹åº”çš„å†…å­˜çš„å¸§åºå·</p>
</li>
<li>
<p><strong>é€šè¿‡[é¡µ</strong>$\rightarrow$<strong>å¸§]çš„è½¬æ¢ï¼Œä»¥åŠé¡µå†…çš„åç§»é‡ï¼Œå°±å¯ä»¥å¾—åˆ°é€»è¾‘åœ°å€åœ¨å†…å­˜ä¸­çš„å®é™…åœ°å€</strong></p>
</li>
</ul>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter8-6.png" title="/img/Computer Organization and Architecture/chapter8-6.png" data-thumbnail="/img/Computer Organization and Architecture/chapter8-6.png">
        
    </a>
<h6 id="allocation-of-free-frames">Allocation of free frames</h6>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter8-7.png" title="/img/Computer Organization and Architecture/chapter8-7.png" data-thumbnail="/img/Computer Organization and Architecture/chapter8-7.png">
        
    </a>
<ul>
<li>
<p>å†…å­˜ä¸­å¸§13-15æ˜¯ç©ºé—²çš„ï¼Œåˆ†é…ç»™äº†è¿›ç¨‹Aåœ°ç¬¬1-3é¡µ</p>
</li>
<li>
<p>å¸§16ã€17å…¶ä»–è¿›ç¨‹å ç”¨</p>
</li>
<li>
<p>å¸§18åˆ†é…ç»™è¿›ç¨‹Açš„0é¡µ</p>
</li>
<li>
<p><strong>åˆ†é…å¸§çš„æ—¶å€™ï¼Œæ—¢ä¸è¦æ±‚æ˜¯è¿ç»­çš„ï¼Œä¹Ÿä¸è¦æ±‚å‰åé¡ºåº</strong></p>
</li>
</ul>
<h6 id="real-and-virtual-memory">Real and virtual memory</h6>
<ul>
<li>
<p>On the basis of logical address, expand the memory, which leads to the concept of virtual memory</p>
</li>
<li>
<p><strong>Real memory</strong></p>
<ul>
<li><strong>Main memory, the actual RAM</strong></li>
</ul>
</li>
<li>
<p><strong>Virtual memory</strong></p>
<ul>
<li><strong>Memory on disk</strong></li>
</ul>
</li>
<li>
<p><strong>Allows for effective multiprogramming and relieves the user of tight constraints of main memory</strong></p>
</li>
</ul>
<hr>
<p><strong>Support deeded for virtual memory</strong></p>
<ul>
<li>
<p><strong>Hardware must support paging and segmentation</strong></p>
</li>
<li>
<p><strong>Operating system must be able to manage the movement of pages and/or segments between secondary memory and main memory</strong></p>
</li>
</ul>
<hr>
<p><strong>Virtual memory</strong></p>
<ul>
<li>
<p>Page load-demand paging</p>
<ul>
<li>
<p>Do not require all pages of a process in memory</p>
</li>
<li>
<p>Bring in pages as required</p>
</li>
</ul>
</li>
<li>
<p>Page fault</p>
<ul>
<li>
<p>Required page is not in memory</p>
</li>
<li>
<p>Operating System must swap in required page</p>
</li>
<li>
<p>May need to swap out a page to make space</p>
</li>
<li>
<p>Select page to throw out based on recent history</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Thrashing</strong></p>
<ul>
<li>
<p>Too many processes in too little memory</p>
</li>
<li>
<p><strong>Operating System spends all its time swapping</strong></p>
</li>
<li>
<p>Little or no real work is done</p>
</li>
<li>
<p>Disk light is on all the time</p>
</li>
<li>
<p><strong>Solutions</strong></p>
<ul>
<li>
<p><strong>Good page replacement algorithms</strong></p>
</li>
<li>
<p><strong>Reduce number of processes running</strong></p>
</li>
<li>
<p><strong>Fit more memory</strong></p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Advantage of virtual memory</strong></p>
<ul>
<li>
<p>Do not need all of a process in memory for it to run</p>
</li>
<li>
<p>Swap in pages as required</p>
</li>
<li>
<p><strong>So can now run processes that are bigger than total memory available!</strong></p>
</li>
<li>
<p><strong>Main memory is called real memory</strong></p>
</li>
<li>
<p><strong>User/programmer sees much bigger memory - virtual memory</strong></p>
</li>
</ul>
<hr>
<p><strong>Page tables</strong></p>
<ul>
<li>
<p>Each process must have a page table to convert logical address or virtual address to physical address</p>
</li>
<li>
<p>Some processes are very large, and their page tables themselves are very large</p>
<ul>
<li>
<p><strong>Page tables are also stored in virtual memory</strong></p>
</li>
<li>
<p><strong>When a process is running, part of its page table is in main memory</strong></p>
</li>
<li>
<p><strong>Load the required page table through exchange</strong></p>
</li>
</ul>
</li>
</ul>
<figure><a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter8-1.png" title="/img/Computer Organization and Architecture/chapter8-1.png" data-thumbnail="/img/Computer Organization and Architecture/chapter8-1.png" data-sub-html="<h2>Two-Level Hierarchical Page Table</h2>">
        
    </a><figcaption class="image-caption"><code>Two-Level Hierarchical Page Table</code></figcaption>
    </figure>
<p><strong>Address Translation for Hierarchical page table</strong></p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter8-9.png" title="/img/Computer Organization and Architecture/chapter8-9.png" data-thumbnail="/img/Computer Organization and Architecture/chapter8-9.png">
        
    </a>
<ul>
<li>
<p>è™šæ‹Ÿåœ°å€åŒ…æ‹¬æ ¹é¡µè¡¨æ®µã€ç”¨æˆ·é¡µè¡¨æ®µå’Œé¡µå†…åç§»é‡</p>
</li>
<li>
<p>æ ¹æ®æ ¹é¡µè¡¨æŒ‡é’ˆå’Œæ ¹é¡µè¡¨æ®µï¼Œå¾—åˆ°ç”¨æˆ·é¡µè¡¨æ®µçš„åŸºå‡†åœ°å€</p>
</li>
<li>
<p>åŠ ä¸Šç”¨æˆ·é¡µè¡¨æ®µåœ°å€ï¼Œå¾—åˆ°ç”¨æˆ·é¡µè¡¨åœ°å€</p>
</li>
<li>
<p>å†åŠ ä¸Šé¡µå†…åç§»é‡ï¼Œå¾—åˆ°åœ¨å®é™…å†…å­˜ä¸­çš„åœ°å€</p>
</li>
</ul>
<hr>
<p><strong>Problem about page tables</strong></p>
<ul>
<li>
<p>A drawback of the type of page tables is that their size is proportional to that of the virtual address space</p>
<ul>
<li>
<p>Each virtual space page needs a row in the page table</p>
</li>
<li>
<p>If the virtual space of the user program is large, the page table will also be very large</p>
</li>
</ul>
</li>
<li>
<p>An alternative is Inverted Page Tables</p>
</li>
</ul>
<h6 id="inverted-page-table">Inverted page table</h6>
<ul>
<li>
<p>Used on <code>PowerPC</code>, <code>UltraSPARC</code>, and <code>IA-64 architecture</code></p>
</li>
<li>
<p><strong>Page number portion of a virtual address is mapped into a hash value</strong></p>
</li>
<li>
<p><strong>Hash value points to inverted page table</strong></p>
</li>
<li>
<p>Fixed proportion of real memory is required for the tables regardless of the number of processes</p>
</li>
<li>
<p><strong>åå‘é¡µè¡¨çš„è¡Œæ•°æ˜¯ç‰©ç†å†…å­˜çš„å¸§æ•°ï¼Œå’Œè¿›ç¨‹æ•°æ— å…³</strong></p>
</li>
</ul>
<hr>
<ul>
<li>
<p>Each entry in the page table includes</p>
<ul>
<li>
<p>Page number</p>
</li>
<li>
<p>Process identifier</p>
<ul>
<li>The process that owns this page</li>
</ul>
</li>
<li>
<p>Control bits</p>
<ul>
<li>includes flags, such as valid, referenced, etc</li>
</ul>
</li>
<li>
<p><strong>Chain pointer</strong></p>
<ul>
<li><strong>the index value of the next entry in the chain</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Use of inverted page table</strong></p>
<a class="lightgallery" href="/img/Computer%20Organization%20and%20Architecture/chapter8-10.png" title="/img/Computer Organization and Architecture/chapter8-10.png" data-thumbnail="/img/Computer Organization and Architecture/chapter8-10.png">
        
    </a>
<ul>
<li>
<p>è™šæ‹Ÿåœ°å€ä¸­çš„é¡µå·é€šè¿‡æ•£åˆ—å‡½æ•°ï¼Œå½¢æˆä¸€ä¸ªæ•£åˆ—å€¼ï¼Œæ˜ å°„åˆ°åå‘é¡µè¡¨</p>
</li>
<li>
<p>é€šè¿‡é¡µå·çš„æ•£åˆ—å€¼å’Œè¿›ç¨‹IDï¼Œç¡®å®šè™šæ‹Ÿåœ°å€çš„é¡µæ˜¯å¦åœ¨å†…å­˜ä¸­</p>
</li>
<li>
<p>é€šè¿‡é“¾æŠ€æœ¯æ¥æé«˜æŸ¥æ‰¾çš„é€Ÿåº¦</p>
</li>
</ul>
<h6 id="translation-lookaside-buffer">Translation lookaside buffer</h6>
<ul>
<li>
<p>Every virtual memory reference causes two physical memory access</p>
<ul>
<li>
<p>Fetch page table entry</p>
</li>
<li>
<p>Fetch data</p>
</li>
</ul>
</li>
<li>
<p>To overcome this problem a high-speed cache is set up for page table entries</p>
<ul>
<li>
<p>Called a Translation Lookaside Buffer (<code>TLB</code>)</p>
</li>
<li>
<p>Contains page table entries that have been most recently used</p>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong><code>TLB</code> operation</strong></p>
<ul>
<li>
<p>æ ¹æ®è™šæ‹Ÿåœ°å€ä¸­çš„é¡µåœ°å€ï¼Œå»å¿«è¡¨ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰é¡µå¸§åœ°å€</p>
</li>
<li>
<p>å¦‚æœæœ‰ï¼Œæ¥å°±å¯ä»¥ç”Ÿæˆç‰©ç†åœ°å€</p>
</li>
<li>
<p>å¦‚æœæ²¡æœ‰ï¼Œå°±å»çœ‹å†…å­˜ä¸­çš„é¡µè¡¨ä¸­æ˜¯å¦æœ‰è¿™ä¸ªé¡µ</p>
</li>
<li>
<p>å¦‚æœåœ¨å†…å­˜ä¸­çš„è¯ï¼Œå°±å…ˆæ›´æ–°å¿«è¡¨ï¼Œç„¶åç”Ÿæˆç‰©ç†åœ°å€</p>
</li>
<li>
<p>å¦‚æœä¹Ÿæ²¡æœ‰ï¼Œå°±è¦å»è¯»å–I/Oï¼Œç„¶åæ›´æ–°å†…å­˜é¡µè¡¨</p>
</li>
</ul>
<h5 id="segmentation">Segmentation</h5>
<ul>
<li>
<p>Paging is not (usually) visible to the programmer</p>
</li>
<li>
<p>Segmentation is visible to the programmer</p>
</li>
<li>
<p>Usually different segments allocated to program and data</p>
</li>
<li>
<p>May be a number of program and data segments</p>
</li>
</ul>
<hr>
<p><strong>Advantage of segmentation</strong></p>
<ul>
<li>
<p>Simplified management</p>
<ul>
<li>
<p>Programmers need not know how much space data needs</p>
</li>
<li>
<p>Data can be allocated to its own segment and can be dynamically expanded</p>
</li>
</ul>
</li>
<li>
<p>Allows programs to be altered and recompiled independently</p>
</li>
<li>
<p>The segment can be shared among multiple processes</p>
</li>
<li>
<p>Protections from assigning access privileges</p>
</li>
</ul>
<hr>
<p><strong>Segment tables</strong></p>
<ul>
<li>
<p>Corresponding segment in main memory</p>
</li>
<li>
<p>æ®µéœ€è¦æœ‰æ®µè¡¨æ¥å®ç°åœ°å€è½¬æ¢</p>
</li>
<li>
<p>è™šæ‹Ÿåœ°å€ä¸­åŒ…å«æ®µå·ï¼Œä»æ®µè¡¨ä¸­æ‰¾åˆ°è¯¥æ®µå·å¯¹åº”çš„æ®µåŸºå€ï¼Œå°±å¯ä»¥æ ¹æ®åç§»é‡åˆ°å†…å­˜ä¸­å¾—åˆ°è¿™ä¸ªè™šæ‹Ÿåœ°å€å¯¹åº”çš„ç‰©ç†åœ°å€</p>
</li>
</ul>
<hr>
<p><strong>Combined segmentation and paging</strong></p>
<ul>
<li>
<p>ç¨‹åºå‘˜å°†è¿›ç¨‹åˆ†ä¸ºè‹¥å¹²ä¸ªæ®µ</p>
</li>
<li>
<p>ç³»ç»Ÿå°†æ¯ä¸ªæ®µåˆ†ä¸ºå¤šä¸ªé¡µ</p>
</li>
<li>
<p>åœ¨è¿›è¡Œåœ°å€è½¬æ¢çš„æ—¶å€™ï¼Œæ ¹æ®æ®µå·ï¼Œåˆ°æ®µè¡¨ä¸­æ‰¾åˆ°æ®µåŸºå€ï¼Œæ ¹æ®é¡µå·ï¼Œåˆ°é¡µè¡¨ä¸­æ‰¾åˆ°å¯¹åº”çš„å¸§å·ï¼Œç„¶åæ®µåŸºå€å’Œå¸§å·ç»“åˆï¼Œå¯ä»¥å¾—åˆ°å®é™…çš„ç‰©ç†åœ°å€</p>
</li>
</ul>
]]></description>
</item>
</channel>
</rss>
